!function(modules){function hotDownloadUpdateChunk(chunkId){var head=document.getElementsByTagName("head")[0],script=document.createElement("script");script.type="text/javascript",script.charset="utf-8",script.src=__webpack_require__.p+""+chunkId+"."+hotCurrentHash+".hot-update.js",head.appendChild(script)}function hotDownloadManifest(callback){if("undefined"==typeof XMLHttpRequest)return callback(new Error("No browser support"));try{var request=new XMLHttpRequest,requestPath=__webpack_require__.p+""+hotCurrentHash+".hot-update.json";request.open("GET",requestPath,!0),request.timeout=1e4,request.send(null)}catch(err){return callback(err)}request.onreadystatechange=function(){if(4===request.readyState)if(0===request.status)callback(new Error("Manifest request to "+requestPath+" timed out."));else if(404===request.status)callback();else if(200!==request.status&&304!==request.status)callback(new Error("Manifest request to "+requestPath+" failed."));else{try{var update=JSON.parse(request.responseText)}catch(e){return void callback(e)}callback(null,update)}}}function hotCreateRequire(moduleId){function ensure(chunkId,callback){"ready"===hotStatus&&hotSetStatus("prepare"),hotChunksLoading++,__webpack_require__.e(chunkId,function(){function finishChunkLoading(){hotChunksLoading--,"prepare"===hotStatus&&(hotWaitingFilesMap[chunkId]||hotEnsureUpdateChunk(chunkId),0===hotChunksLoading&&0===hotWaitingFiles&&hotUpdateDownloaded())}try{callback.call(null,fn)}finally{finishChunkLoading()}})}var me=installedModules[moduleId];if(!me)return __webpack_require__;var fn=function(request){return me.hot.active?installedModules[request]?(installedModules[request].parents.indexOf(moduleId)<0&&installedModules[request].parents.push(moduleId),me.children.indexOf(request)<0&&me.children.push(request)):hotCurrentParents=[moduleId]:hotCurrentParents=[],__webpack_require__(request)};for(var name in __webpack_require__)Object.prototype.hasOwnProperty.call(__webpack_require__,name)&&(Object.defineProperty?Object.defineProperty(fn,name,function(name){return{configurable:!0,enumerable:!0,get:function(){return __webpack_require__[name]},set:function(value){__webpack_require__[name]=value}}}(name)):fn[name]=__webpack_require__[name]);return Object.defineProperty?Object.defineProperty(fn,"e",{enumerable:!0,value:ensure}):fn.e=ensure,fn}function hotCreateModule(moduleId){var hot={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],active:!0,accept:function(dep,callback){if("undefined"==typeof dep)hot._selfAccepted=!0;else if("function"==typeof dep)hot._selfAccepted=dep;else if("object"==typeof dep)for(var i=0;i<dep.length;i++)hot._acceptedDependencies[dep[i]]=callback;else hot._acceptedDependencies[dep]=callback},decline:function(dep){if("undefined"==typeof dep)hot._selfDeclined=!0;else if("number"==typeof dep)hot._declinedDependencies[dep]=!0;else for(var i=0;i<dep.length;i++)hot._declinedDependencies[dep[i]]=!0},dispose:function(callback){hot._disposeHandlers.push(callback)},addDisposeHandler:function(callback){hot._disposeHandlers.push(callback)},removeDisposeHandler:function(callback){var idx=hot._disposeHandlers.indexOf(callback);idx>=0&&hot._disposeHandlers.splice(idx,1)},check:hotCheck,apply:hotApply,status:function(l){return l?void hotStatusHandlers.push(l):hotStatus},addStatusHandler:function(l){hotStatusHandlers.push(l)},removeStatusHandler:function(l){var idx=hotStatusHandlers.indexOf(l);idx>=0&&hotStatusHandlers.splice(idx,1)},data:hotCurrentModuleData[moduleId]};return hot}function hotSetStatus(newStatus){hotStatus=newStatus;for(var i=0;i<hotStatusHandlers.length;i++)hotStatusHandlers[i].call(null,newStatus)}function toModuleId(id){var isNumber=+id+""===id;return isNumber?+id:id}function hotCheck(apply,callback){if("idle"!==hotStatus)throw new Error("check() is only allowed in idle status");"function"==typeof apply?(hotApplyOnUpdate=!1,callback=apply):(hotApplyOnUpdate=apply,callback=callback||function(err){if(err)throw err}),hotSetStatus("check"),hotDownloadManifest(function(err,update){if(err)return callback(err);if(!update)return hotSetStatus("idle"),void callback(null,null);hotRequestedFilesMap={},hotAvailibleFilesMap={},hotWaitingFilesMap={};for(var i=0;i<update.c.length;i++)hotAvailibleFilesMap[update.c[i]]=!0;hotUpdateNewHash=update.h,hotSetStatus("prepare"),hotCallback=callback,hotUpdate={};var chunkId=0;hotEnsureUpdateChunk(chunkId),"prepare"===hotStatus&&0===hotChunksLoading&&0===hotWaitingFiles&&hotUpdateDownloaded()})}function hotAddUpdateChunk(chunkId,moreModules){if(hotAvailibleFilesMap[chunkId]&&hotRequestedFilesMap[chunkId]){hotRequestedFilesMap[chunkId]=!1;for(var moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(hotUpdate[moduleId]=moreModules[moduleId]);0===--hotWaitingFiles&&0===hotChunksLoading&&hotUpdateDownloaded()}}function hotEnsureUpdateChunk(chunkId){hotAvailibleFilesMap[chunkId]?(hotRequestedFilesMap[chunkId]=!0,hotWaitingFiles++,hotDownloadUpdateChunk(chunkId)):hotWaitingFilesMap[chunkId]=!0}function hotUpdateDownloaded(){hotSetStatus("ready");var callback=hotCallback;if(hotCallback=null,callback)if(hotApplyOnUpdate)hotApply(hotApplyOnUpdate,callback);else{var outdatedModules=[];for(var id in hotUpdate)Object.prototype.hasOwnProperty.call(hotUpdate,id)&&outdatedModules.push(toModuleId(id));callback(null,outdatedModules)}}function hotApply(options,callback){function getAffectedStuff(module){for(var outdatedModules=[module],outdatedDependencies={},queue=outdatedModules.slice();queue.length>0;){var moduleId=queue.pop(),module=installedModules[moduleId];if(module&&!module.hot._selfAccepted){if(module.hot._selfDeclined)return new Error("Aborted because of self decline: "+moduleId);if(0===moduleId)return;for(var i=0;i<module.parents.length;i++){var parentId=module.parents[i],parent=installedModules[parentId];if(parent.hot._declinedDependencies[moduleId])return new Error("Aborted because of declined dependency: "+moduleId+" in "+parentId);outdatedModules.indexOf(parentId)>=0||(parent.hot._acceptedDependencies[moduleId]?(outdatedDependencies[parentId]||(outdatedDependencies[parentId]=[]),addAllToSet(outdatedDependencies[parentId],[moduleId])):(delete outdatedDependencies[parentId],outdatedModules.push(parentId),queue.push(parentId)))}}}return[outdatedModules,outdatedDependencies]}function addAllToSet(a,b){for(var i=0;i<b.length;i++){var item=b[i];a.indexOf(item)<0&&a.push(item)}}if("ready"!==hotStatus)throw new Error("apply() is only allowed in ready status");"function"==typeof options?(callback=options,options={}):options&&"object"==typeof options?callback=callback||function(err){if(err)throw err}:(options={},callback=callback||function(err){if(err)throw err});var outdatedDependencies={},outdatedModules=[],appliedUpdate={};for(var id in hotUpdate)if(Object.prototype.hasOwnProperty.call(hotUpdate,id)){var moduleId=toModuleId(id),result=getAffectedStuff(moduleId);if(!result){if(options.ignoreUnaccepted)continue;return hotSetStatus("abort"),callback(new Error("Aborted because "+moduleId+" is not accepted"))}if(result instanceof Error)return hotSetStatus("abort"),callback(result);appliedUpdate[moduleId]=hotUpdate[moduleId],addAllToSet(outdatedModules,result[0]);for(var moduleId in result[1])Object.prototype.hasOwnProperty.call(result[1],moduleId)&&(outdatedDependencies[moduleId]||(outdatedDependencies[moduleId]=[]),addAllToSet(outdatedDependencies[moduleId],result[1][moduleId]))}for(var outdatedSelfAcceptedModules=[],i=0;i<outdatedModules.length;i++){var moduleId=outdatedModules[i];installedModules[moduleId]&&installedModules[moduleId].hot._selfAccepted&&outdatedSelfAcceptedModules.push({module:moduleId,errorHandler:installedModules[moduleId].hot._selfAccepted})}hotSetStatus("dispose");for(var queue=outdatedModules.slice();queue.length>0;){var moduleId=queue.pop(),module=installedModules[moduleId];if(module){for(var data={},disposeHandlers=module.hot._disposeHandlers,j=0;j<disposeHandlers.length;j++){var cb=disposeHandlers[j];cb(data)}hotCurrentModuleData[moduleId]=data,module.hot.active=!1,delete installedModules[moduleId];for(var j=0;j<module.children.length;j++){var child=installedModules[module.children[j]];if(child){var idx=child.parents.indexOf(moduleId);idx>=0&&child.parents.splice(idx,1)}}}}for(var moduleId in outdatedDependencies)if(Object.prototype.hasOwnProperty.call(outdatedDependencies,moduleId))for(var module=installedModules[moduleId],moduleOutdatedDependencies=outdatedDependencies[moduleId],j=0;j<moduleOutdatedDependencies.length;j++){var dependency=moduleOutdatedDependencies[j],idx=module.children.indexOf(dependency);idx>=0&&module.children.splice(idx,1)}hotSetStatus("apply"),hotCurrentHash=hotUpdateNewHash;for(var moduleId in appliedUpdate)Object.prototype.hasOwnProperty.call(appliedUpdate,moduleId)&&(modules[moduleId]=appliedUpdate[moduleId]);var error=null;for(var moduleId in outdatedDependencies)if(Object.prototype.hasOwnProperty.call(outdatedDependencies,moduleId)){for(var module=installedModules[moduleId],moduleOutdatedDependencies=outdatedDependencies[moduleId],callbacks=[],i=0;i<moduleOutdatedDependencies.length;i++){var dependency=moduleOutdatedDependencies[i],cb=module.hot._acceptedDependencies[dependency];callbacks.indexOf(cb)>=0||callbacks.push(cb)}for(var i=0;i<callbacks.length;i++){var cb=callbacks[i];try{cb(outdatedDependencies)}catch(err){error||(error=err)}}}for(var i=0;i<outdatedSelfAcceptedModules.length;i++){var item=outdatedSelfAcceptedModules[i],moduleId=item.module;hotCurrentParents=[moduleId];try{__webpack_require__(moduleId)}catch(err){if("function"==typeof item.errorHandler)try{item.errorHandler(err)}catch(err){error||(error=err)}else error||(error=err)}}return error?(hotSetStatus("fail"),callback(error)):(hotSetStatus("idle"),void callback(null,outdatedModules))}function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1,hot:hotCreateModule(moduleId),parents:hotCurrentParents,children:[]};return modules[moduleId].call(module.exports,module,module.exports,hotCreateRequire(moduleId)),module.loaded=!0,module.exports}var parentHotUpdateCallback=this.webpackHotUpdate;this.webpackHotUpdate=function(chunkId,moreModules){hotAddUpdateChunk(chunkId,moreModules),parentHotUpdateCallback&&parentHotUpdateCallback(chunkId,moreModules)};var hotCallback,hotUpdate,hotUpdateNewHash,hotApplyOnUpdate=!0,hotCurrentHash="ec1c45bc1646b042a40b",hotCurrentModuleData={},hotCurrentParents=[],hotStatusHandlers=[],hotStatus="idle",hotWaitingFiles=0,hotChunksLoading=0,hotWaitingFilesMap={},hotRequestedFilesMap={},hotAvailibleFilesMap={},installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__.h=function(){return hotCurrentHash},hotCreateRequire(0)(0)}([function(module,exports,__webpack_require__){module.exports=__webpack_require__(1)},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _assetsLoaded(){assetsLoaded=!0,domLoaded&&_init()}function _domLoaded(){domLoaded=!0,assetsLoaded&&_init()}function _init(){window.Easings=_mcgl2["default"].Easings.instance,window.isMobile=!1,function(a){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(isMobile=!0)}(navigator.userAgent||navigator.vendor||window.opera);var iPad=navigator.userAgent.toLowerCase().indexOf("ipad")!==-1;isMobile||(isMobile=iPad),canvas=document.createElement("canvas"),canvas.className="canvas",document.body.appendChild(canvas);var p=document.createElement("p");p.setAttribute("id","info"),p.innerHTML=isMobile?"TOUCH SCREEN TO START":"";var p2=document.createElement("p");p2.setAttribute("id","sound"),p2.innerHTML="TOGGLE SOUND";var p3=document.createElement("p");if(p3.setAttribute("id","info2"),p3.innerHTML="Music: Yeah Yeah Yeah, Kognitif",document.body.appendChild(p),document.body.appendChild(p2),document.body.appendChild(p3),gl=canvas.getContext("webgl"))if(_mcgl.GL.reset(gl),window.addEventListener("mousemove",function(e){mouseX=2*(e.clientX/window.innerWidth-.5),mouseY=2*(e.clientY/window.innerHeight-.5)}),window.addEventListener("resize",resize),resize(),scene=new _Scene2["default"],p2.addEventListener("click",scene.toggleSound.bind(scene)),p2.addEventListener("tap",scene.toggleSound.bind(scene)),update(),navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var args=["\n %c 🍔 ⚡ mcgl.js %c 🍔  ","background: #000000; padding:5px 0; color: #ffffff","background: #000000; padding:5px 0; color: #ffffff;"];window.console.log.apply(console,args)}else window.console&&window.console.log("mcgl.js ")}function update(){Easings.update(),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),globalTime+=.01,scene.update(),window.requestAnimationFrame(update)}function resize(){Math.min(window.innerWidth,window.innerHeight,500);scene&&scene.resize(window.innerWidth,window.innerHeight),_mcgl.GL.resize(window.innerWidth,window.innerHeight)}var _mcgl=__webpack_require__(2),_mcgl2=_interopRequireDefault(_mcgl),_Loader=__webpack_require__(133),_Loader2=_interopRequireDefault(_Loader),_Scene=__webpack_require__(221),_Scene2=_interopRequireDefault(_Scene),_datGui=__webpack_require__(250);_interopRequireDefault(_datGui);window.addEventListener("DOMContentLoaded",_domLoaded),window.GL=_mcgl.GL,window.ASSET_URL="assets/";var scene,gl,mouseX,mouseY,canvas,globalTime=1e4*Math.random(),loader=new _Loader2["default"];loader.onComplete.addOnce(_assetsLoaded),loader.addCSS(ASSET_URL+"styles/fonts.css"),loader.addFonts(["Quicksand"]),loader.addAssets([ASSET_URL+"images/stroke.png"]);var domLoaded=!1,assetsLoaded=!1;loader.load();var scene,gl,mouseX,mouseY,canvas,globalTime=1e4*Math.random()},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_GLTool=__webpack_require__(4),_GLTool2=_interopRequireDefault(_GLTool),_GLShader=__webpack_require__(35),_GLShader2=_interopRequireDefault(_GLShader),_Texture=__webpack_require__(37),_Texture2=_interopRequireDefault(_Texture),_indexCamera=__webpack_require__(38),_indexCamera2=_interopRequireDefault(_indexCamera),_OrbitalControl=__webpack_require__(107),_OrbitalControl2=_interopRequireDefault(_OrbitalControl),_CameraControl=__webpack_require__(108),_CameraControl2=_interopRequireDefault(_CameraControl),_indexGeom=__webpack_require__(109),_indexGeom2=_interopRequireDefault(_indexGeom),_Controller=__webpack_require__(120),_Controller2=_interopRequireDefault(_Controller),_Easings=__webpack_require__(123),_Easings2=_interopRequireDefault(_Easings),_FrameBuffer=__webpack_require__(124),_FrameBuffer2=_interopRequireDefault(_FrameBuffer),_Mesh=__webpack_require__(111),_Mesh2=_interopRequireDefault(_Mesh),_BatchCopy=__webpack_require__(125),_BatchCopy2=_interopRequireDefault(_BatchCopy),Mcgl=function Mcgl(){(0,_classCallCheck3["default"])(this,Mcgl),this.GL=_GLTool2["default"],this.GLTool=_GLTool2["default"],this.GLShader=_GLShader2["default"],this.camera=_indexCamera2["default"],this.orbitalControl=new _OrbitalControl2["default"],this.CameraControl=_CameraControl2["default"],this.geom=_indexGeom2["default"],this.Mesh=_Mesh2["default"],this.Texture=_Texture2["default"],this.Controller=_Controller2["default"],this.Easings=_Easings2["default"],this.FBO=_FrameBuffer2["default"],this.BatchCopy=_BatchCopy2["default"]};exports["default"]=new Mcgl,module.exports=exports["default"]},function(module,exports){"use strict";exports.__esModule=!0,exports["default"]=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),_Matrices=__webpack_require__(24),_glMatrix=(_interopRequireDefault(_Matrices),__webpack_require__(25)),_glMatrix2=_interopRequireDefault(_glMatrix),getAttribLoc=function(gl,shaderProgram,name){return void 0===shaderProgram.cacheAttribLoc&&(shaderProgram.cacheAttribLoc={}),void 0===shaderProgram.cacheAttribLoc[name]&&(shaderProgram.cacheAttribLoc[name]=gl.getAttribLocation(shaderProgram,name)),shaderProgram.cacheAttribLoc[name]},gl=void 0,GLTool=function(){function GLTool(){(0,_classCallCheck3["default"])(this,GLTool),this.gl=null,this.canvas=null,this.width=0,this.height=0,this.aspectRatio=0;var isMobile=!1;!function(a){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(isMobile=!0)}(navigator.userAgent||navigator.vendor||window.opera);var iPad=navigator.userAgent.toLowerCase().indexOf("ipad")!==-1;isMobile||(isMobile=iPad),this.isMobile=isMobile,this.camera=null,this.shader=null,this.shaderProgram=null,this.inverseViewMatrix=_glMatrix2["default"].mat4.create(),this.modelMatrix=_glMatrix2["default"].mat4.create(),this.identityMatrix=_glMatrix2["default"].mat4.create(),this.matrix=_glMatrix2["default"].mat4.create(),_glMatrix2["default"].mat4.identity(this.identityMatrix,this.identityMatrix),this._enabledVertexAttribute=[],this._lastMesh=null}return(0,_createClass3["default"])(GLTool,[{key:"reset",value:function(_gl){this.gl=_gl,gl=_gl,this.canvas=gl.canvas;var ctx=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl");gl=this.gl=ctx;var extensions=["EXT_shader_texture_lod","EXT_sRGB","EXT_frag_depth","OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","WEBGL_depth_texture","EXT_texture_filter_anisotropic","ANGLE_instanced_arrays","WEBGL_draw_buffers"];this.extensions={};for(var i=0;i<extensions.length;i++)this.extensions[extensions[i]]=gl.getExtension(extensions[i])}},{key:"useShader",value:function(shader){this.shader=shader,this.shaderProgram=this.shader.shaderProgram}},{key:"setMatrices",value:function(camera){this.camera=camera,this.rotate(this.identityMatrix)}},{key:"rotate",value:function(rotation){_glMatrix2["default"].mat4.copy(this.modelMatrix,rotation),_glMatrix2["default"].mat4.multiply(this.matrix,this.camera.matrix,this.modelMatrix),_glMatrix2["default"].mat3.fromMat4(this.inverseViewMatrix,this.matrix),_glMatrix2["default"].mat3.invert(this.inverseViewMatrix,this.inverseViewMatrix)}},{key:"draw",value:function(mMesh,mDrawingType){this._lastMesh!==mMesh&&this._bindBuffers(mMesh),this.camera&&void 0!==this.camera&&this.camera.projection&&(this.shader.uniform("u_projectionMatrix","mat4",this.camera.projection),this.shader.uniform("u_viewMatrix","mat4",this.camera.matrix),this.shader.uniform("u_inverseViewMatrix","mat4",this.inverseViewMatrix),this.shader.uniform("u_modelMatrix","mat4",this.modelMatrix));var drawType=mMesh.drawType;void 0!==mDrawingType&&(drawType=mDrawingType),gl.drawElements(drawType,mMesh.iBuffer.numItems,gl.UNSIGNED_SHORT,0)}},{key:"_bindBuffers",value:function(mMesh){for(var i=0;i<mMesh._attributes.length;i++){var attribute=mMesh._attributes[i];gl.bindBuffer(gl.ARRAY_BUFFER,attribute.buffer);var attrPosition=getAttribLoc(gl,this.shaderProgram,attribute.name);gl.vertexAttribPointer(attrPosition,attribute.itemSize,gl.FLOAT,!1,0,0),this._enabledVertexAttribute.indexOf(attrPosition)===-1&&(gl.enableVertexAttribArray(attrPosition),this._enabledVertexAttribute.push(attrPosition))}gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,mMesh.iBuffer),this._lastMesh=mMesh}},{key:"checkExtension",value:function(mExtension){return!!this.extensions[mExtension]}},{key:"getExtension",value:function(mExtension){return this.extensions[mExtension]}},{key:"resize",value:function(width,height){this.canvas.style.width=width+"px",this.canvas.style.height=height+"px",this.canvas.style.top=(window.innerHeight-height)/2+"px",this.canvas.style.left=(window.innerWidth-width)/2+"px",this.width=width,this.height=height,this.canvas.width=this.width,this.canvas.height=this.height,this.aspectRatio=this.width/this.height,this.gl.viewport(0,0,this.width,this.height)}}]),GLTool}();exports["default"]=new GLTool,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0;var _defineProperty=__webpack_require__(6),_defineProperty2=_interopRequireDefault(_defineProperty);exports["default"]=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),(0,_defineProperty2["default"])(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}()},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(7),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(8);var $Object=__webpack_require__(11).Object;module.exports=function(it,key,desc){return $Object.defineProperty(it,key,desc)}},function(module,exports,__webpack_require__){var $export=__webpack_require__(9);$export($export.S+$export.F*!__webpack_require__(19),"Object",{defineProperty:__webpack_require__(15).f})},function(module,exports,__webpack_require__){var global=__webpack_require__(10),core=__webpack_require__(11),ctx=__webpack_require__(12),hide=__webpack_require__(14),PROTOTYPE="prototype",$export=function(type,name,source){var key,own,out,IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,IS_WRAP=type&$export.W,exports=IS_GLOBAL?core:core[name]||(core[name]={}),expProto=exports[PROTOTYPE],target=IS_GLOBAL?global:IS_STATIC?global[name]:(global[name]||{})[PROTOTYPE];IS_GLOBAL&&(source=name);for(key in source)own=!IS_FORCED&&target&&void 0!==target[key],own&&key in exports||(out=own?target[key]:source[key],exports[key]=IS_GLOBAL&&"function"!=typeof target[key]?source[key]:IS_BIND&&own?ctx(out,global):IS_WRAP&&target[key]==out?function(C){var F=function(a,b,c){if(this instanceof C){switch(arguments.length){case 0:return new C;case 1:return new C(a);case 2:return new C(a,b)}return new C(a,b,c)}return C.apply(this,arguments)};return F[PROTOTYPE]=C[PROTOTYPE],F}(out):IS_PROTO&&"function"==typeof out?ctx(Function.call,out):out,IS_PROTO&&((exports.virtual||(exports.virtual={}))[key]=out,type&$export.R&&expProto&&!expProto[key]&&hide(expProto,key,out)))};$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128,module.exports=$export},function(module,exports){var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global)},function(module,exports){var core=module.exports={version:"2.4.0"};"number"==typeof __e&&(__e=core)},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(13);module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},function(module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(it+" is not a function!");return it}},function(module,exports,__webpack_require__){var dP=__webpack_require__(15),createDesc=__webpack_require__(23);module.exports=__webpack_require__(19)?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){return object[key]=value,object}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(16),IE8_DOM_DEFINE=__webpack_require__(18),toPrimitive=__webpack_require__(22),dP=Object.defineProperty;exports.f=__webpack_require__(19)?Object.defineProperty:function(O,P,Attributes){if(anObject(O),P=toPrimitive(P,!0),anObject(Attributes),IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");return"value"in Attributes&&(O[P]=Attributes.value),O}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(17);module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},function(module,exports){module.exports=function(it){return"object"==typeof it?null!==it:"function"==typeof it}},function(module,exports,__webpack_require__){module.exports=!__webpack_require__(19)&&!__webpack_require__(20)(function(){return 7!=Object.defineProperty(__webpack_require__(21)("div"),"a",{get:function(){return 7}}).a})},function(module,exports,__webpack_require__){module.exports=!__webpack_require__(20)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return!0}}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(17),document=__webpack_require__(10).document,is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(17);module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;if("function"==typeof(fn=it.valueOf)&&!isObject(val=fn.call(it)))return val;if(!S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},function(module,exports){module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value:value}}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),Matrices=function(){function Matrices(){(0,_classCallCheck3["default"])(this,Matrices)}return(0,_createClass3["default"])(Matrices,[{key:"multiply",value:function(a,b,dst){dst=dst||new Float32Array(16);var b00=b[0],b01=b[1],b02=b[2],b03=b[3],b10=b[4],b11=b[5],b12=b[6],b13=b[7],b20=b[8],b21=b[9],b22=b[10],b23=b[11],b30=b[12],b31=b[13],b32=b[14],b33=b[15],a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15];return dst[0]=b00*a00+b01*a10+b02*a20+b03*a30,dst[1]=b00*a01+b01*a11+b02*a21+b03*a31,dst[2]=b00*a02+b01*a12+b02*a22+b03*a32,dst[3]=b00*a03+b01*a13+b02*a23+b03*a33,dst[4]=b10*a00+b11*a10+b12*a20+b13*a30,dst[5]=b10*a01+b11*a11+b12*a21+b13*a31,dst[6]=b10*a02+b11*a12+b12*a22+b13*a32,dst[7]=b10*a03+b11*a13+b12*a23+b13*a33,dst[8]=b20*a00+b21*a10+b22*a20+b23*a30,dst[9]=b20*a01+b21*a11+b22*a21+b23*a31,dst[10]=b20*a02+b21*a12+b22*a22+b23*a32,dst[11]=b20*a03+b21*a13+b22*a23+b23*a33,dst[12]=b30*a00+b31*a10+b32*a20+b33*a30,dst[13]=b30*a01+b31*a11+b32*a21+b33*a31,dst[14]=b30*a02+b31*a12+b32*a22+b33*a32,dst[15]=b30*a03+b31*a13+b32*a23+b33*a33,dst}},{key:"projection",value:function(width,height,dst){return dst=dst||this.identity(),dst=[2/width,0,0,0,0,-2/height,0,0,-1,1,1,0,0,0,0,1]}},{key:"yRotate",value:function(m,angleInRadians,dst){dst=dst||new Float32Array(16);
var m00=m[0],m01=m[1],m02=m[2],m03=m[3],m20=m[8],m21=m[9],m22=m[10],m23=m[11],c=Math.cos(angleInRadians),s=Math.sin(angleInRadians);return dst[0]=c*m00-s*m20,dst[1]=c*m01-s*m21,dst[2]=c*m02-s*m22,dst[3]=c*m03-s*m23,dst[8]=c*m20+s*m00,dst[9]=c*m21+s*m01,dst[10]=c*m22+s*m02,dst[11]=c*m23+s*m03,m!==dst&&(dst[4]=m[4],dst[5]=m[5],dst[6]=m[6],dst[7]=m[7],dst[12]=m[12],dst[13]=m[13],dst[14]=m[14],dst[15]=m[15]),dst}},{key:"translate",value:function(m,tx,ty,tz,dst){dst=dst||new Float32Array(16);var m00=m[0],m01=m[1],m02=m[2],m03=m[3],m10=m[4],m11=m[5],m12=m[6],m13=m[7],m20=m[8],m21=m[9],m22=m[10],m23=m[11],m30=m[12],m31=m[13],m32=m[14],m33=m[15];return m!==dst&&(dst[0]=m00,dst[1]=m01,dst[2]=m02,dst[3]=m03,dst[4]=m10,dst[5]=m11,dst[6]=m12,dst[7]=m13,dst[8]=m20,dst[9]=m21,dst[10]=m22,dst[11]=m23),dst[12]=m00*tx+m10*ty+m20*tz+m30,dst[13]=m01*tx+m11*ty+m21*tz+m31,dst[14]=m02*tx+m12*ty+m22*tz+m32,dst[15]=m03*tx+m13*ty+m23*tz+m33,dst}},{key:"translation",value:function(tx,ty,tz,dst){return dst=dst||new Float32Array(16),dst[0]=1,dst[1]=0,dst[2]=0,dst[3]=0,dst[4]=0,dst[5]=1,dst[6]=0,dst[7]=0,dst[8]=0,dst[9]=0,dst[10]=1,dst[11]=0,dst[12]=tx,dst[13]=ty,dst[14]=tz,dst[15]=1,dst}},{key:"yRotation",value:function(angleInRadians,dst){dst=dst||new Float32Array(16);var c=Math.cos(angleInRadians),s=Math.sin(angleInRadians);return dst[0]=c,dst[1]=0,dst[2]=-s,dst[3]=0,dst[4]=0,dst[5]=1,dst[6]=0,dst[7]=0,dst[8]=s,dst[9]=0,dst[10]=c,dst[11]=0,dst[12]=0,dst[13]=0,dst[14]=0,dst[15]=1,dst}},{key:"rotationMatrix",value:function(axis,angle,matrice){matrice=matrice||this.identity(),axis=this.normalize(axis);var s=Math.sin(angle),c=Math.cos(angle),oc=1-c;return[oc*axis.x*axis.x+c,oc*axis.x*axis.y-axis.z*s,oc*axis.z*axis.x+axis.y*s,0,oc*axis.x*axis.y+axis.z*s,oc*axis.y*axis.y+c,oc*axis.y*axis.z-axis.x*s,0,oc*axis.z*axis.x-axis.y*s,oc*axis.y*axis.z+axis.x*s,oc*axis.z*axis.z+c,0,0,0,0,1]}},{key:"identity",value:function(dst){return dst=dst||new Float32Array(16),dst[0]=1,dst[1]=0,dst[2]=0,dst[3]=0,dst[4]=0,dst[5]=1,dst[6]=0,dst[7]=0,dst[8]=0,dst[9]=0,dst[10]=1,dst[11]=0,dst[12]=0,dst[13]=0,dst[14]=0,dst[15]=1,dst}},{key:"transpose",value:function(m,dst){return dst=dst||new Float32Array(16),dst[0]=m[0],dst[1]=m[4],dst[2]=m[8],dst[3]=m[12],dst[4]=m[1],dst[5]=m[5],dst[6]=m[9],dst[7]=m[13],dst[8]=m[2],dst[9]=m[6],dst[10]=m[10],dst[11]=m[14],dst[12]=m[3],dst[13]=m[7],dst[14]=m[11],dst[15]=m[15],dst}},{key:"inverse",value:function(m,dst){dst=dst||new Float32Array(16);var m00=m[0],m01=m[1],m02=m[2],m03=m[3],m10=m[4],m11=m[5],m12=m[6],m13=m[7],m20=m[8],m21=m[9],m22=m[10],m23=m[11],m30=m[12],m31=m[13],m32=m[14],m33=m[15],tmp_0=m22*m33,tmp_1=m32*m23,tmp_2=m12*m33,tmp_3=m32*m13,tmp_4=m12*m23,tmp_5=m22*m13,tmp_6=m02*m33,tmp_7=m32*m03,tmp_8=m02*m23,tmp_9=m22*m03,tmp_10=m02*m13,tmp_11=m12*m03,tmp_12=m20*m31,tmp_13=m30*m21,tmp_14=m10*m31,tmp_15=m30*m11,tmp_16=m10*m21,tmp_17=m20*m11,tmp_18=m00*m31,tmp_19=m30*m01,tmp_20=m00*m21,tmp_21=m20*m01,tmp_22=m00*m11,tmp_23=m10*m01,t0=tmp_0*m11+tmp_3*m21+tmp_4*m31-(tmp_1*m11+tmp_2*m21+tmp_5*m31),t1=tmp_1*m01+tmp_6*m21+tmp_9*m31-(tmp_0*m01+tmp_7*m21+tmp_8*m31),t2=tmp_2*m01+tmp_7*m11+tmp_10*m31-(tmp_3*m01+tmp_6*m11+tmp_11*m31),t3=tmp_5*m01+tmp_8*m11+tmp_11*m21-(tmp_4*m01+tmp_9*m11+tmp_10*m21),d=1/(m00*t0+m10*t1+m20*t2+m30*t3);return dst[0]=d*t0,dst[1]=d*t1,dst[2]=d*t2,dst[3]=d*t3,dst[4]=d*(tmp_1*m10+tmp_2*m20+tmp_5*m30-(tmp_0*m10+tmp_3*m20+tmp_4*m30)),dst[5]=d*(tmp_0*m00+tmp_7*m20+tmp_8*m30-(tmp_1*m00+tmp_6*m20+tmp_9*m30)),dst[6]=d*(tmp_3*m00+tmp_6*m10+tmp_11*m30-(tmp_2*m00+tmp_7*m10+tmp_10*m30)),dst[7]=d*(tmp_4*m00+tmp_9*m10+tmp_10*m20-(tmp_5*m00+tmp_8*m10+tmp_11*m20)),dst[8]=d*(tmp_12*m13+tmp_15*m23+tmp_16*m33-(tmp_13*m13+tmp_14*m23+tmp_17*m33)),dst[9]=d*(tmp_13*m03+tmp_18*m23+tmp_21*m33-(tmp_12*m03+tmp_19*m23+tmp_20*m33)),dst[10]=d*(tmp_14*m03+tmp_19*m13+tmp_22*m33-(tmp_15*m03+tmp_18*m13+tmp_23*m33)),dst[11]=d*(tmp_17*m03+tmp_20*m13+tmp_23*m23-(tmp_16*m03+tmp_21*m13+tmp_22*m23)),dst[12]=d*(tmp_14*m22+tmp_17*m32+tmp_13*m12-(tmp_16*m32+tmp_12*m12+tmp_15*m22)),dst[13]=d*(tmp_20*m32+tmp_12*m02+tmp_19*m22-(tmp_18*m22+tmp_21*m32+tmp_13*m02)),dst[14]=d*(tmp_18*m12+tmp_23*m32+tmp_15*m02-(tmp_22*m32+tmp_14*m02+tmp_19*m12)),dst[15]=d*(tmp_22*m22+tmp_16*m02+tmp_21*m12-(tmp_20*m12+tmp_23*m22+tmp_17*m02)),dst}},{key:"cross",value:function(a,b,dst){return dst=dst||new Float32Array(3),dst[0]=a[1]*b[2]-a[2]*b[1],dst[1]=a[2]*b[0]-a[0]*b[2],dst[2]=a[0]*b[1]-a[1]*b[0],dst}},{key:"normalize",value:function(v,dst){dst=dst||new Float32Array(3);var length=Math.sqrt(v[0]*v[0]+v[1]*v[1]+v[2]*v[2]);return length>1e-5&&(dst[0]=v[0]/length,dst[1]=v[1]/length,dst[2]=v[2]/length),dst}},{key:"multiplyVectorsScalar",value:function(scalar,a,dst){return dst=dst||new Float32Array(3),dst[0]=a[0]*scalar,dst[1]=a[1]*scalar,dst[2]=a[2]*scalar,dst}},{key:"subtractVectors",value:function(a,b,dst){return dst=dst||new Float32Array(3),dst[0]=a[0]-b[0],dst[1]=a[1]-b[1],dst[2]=a[2]-b[2],dst}},{key:"addVectors",value:function(a,b,dst){return dst=dst||new Float32Array(3),dst[0]=a[0]+b[0],dst[1]=a[1]+b[1],dst[2]=a[2]+b[2],dst}}]),Matrices}(),m=new Matrices;exports["default"]=m,module.exports=exports["default"]},function(module,exports,__webpack_require__){exports.glMatrix=__webpack_require__(26),exports.mat2=__webpack_require__(27),exports.mat2d=__webpack_require__(28),exports.mat3=__webpack_require__(29),exports.mat4=__webpack_require__(30),exports.quat=__webpack_require__(31),exports.vec2=__webpack_require__(34),exports.vec3=__webpack_require__(32),exports.vec4=__webpack_require__(33)},function(module,exports){var glMatrix={};glMatrix.EPSILON=1e-6,glMatrix.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,glMatrix.RANDOM=Math.random,glMatrix.ENABLE_SIMD=!1,glMatrix.SIMD_AVAILABLE=glMatrix.ARRAY_TYPE===Float32Array&&"SIMD"in this,glMatrix.USE_SIMD=glMatrix.ENABLE_SIMD&&glMatrix.SIMD_AVAILABLE,glMatrix.setMatrixArrayType=function(type){glMatrix.ARRAY_TYPE=type};var degree=Math.PI/180;glMatrix.toRadian=function(a){return a*degree},glMatrix.equals=function(a,b){return Math.abs(a-b)<=glMatrix.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))},module.exports=glMatrix},function(module,exports,__webpack_require__){var glMatrix=__webpack_require__(26),mat2={};mat2.create=function(){var out=new glMatrix.ARRAY_TYPE(4);return out[0]=1,out[1]=0,out[2]=0,out[3]=1,out},mat2.clone=function(a){var out=new glMatrix.ARRAY_TYPE(4);return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out},mat2.copy=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out},mat2.identity=function(out){return out[0]=1,out[1]=0,out[2]=0,out[3]=1,out},mat2.fromValues=function(m00,m01,m10,m11){var out=new glMatrix.ARRAY_TYPE(4);return out[0]=m00,out[1]=m01,out[2]=m10,out[3]=m11,out},mat2.set=function(out,m00,m01,m10,m11){return out[0]=m00,out[1]=m01,out[2]=m10,out[3]=m11,out},mat2.transpose=function(out,a){if(out===a){var a1=a[1];out[1]=a[2],out[2]=a1}else out[0]=a[0],out[1]=a[2],out[2]=a[1],out[3]=a[3];return out},mat2.invert=function(out,a){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],det=a0*a3-a2*a1;return det?(det=1/det,out[0]=a3*det,out[1]=-a1*det,out[2]=-a2*det,out[3]=a0*det,out):null},mat2.adjoint=function(out,a){var a0=a[0];return out[0]=a[3],out[1]=-a[1],out[2]=-a[2],out[3]=a0,out},mat2.determinant=function(a){return a[0]*a[3]-a[2]*a[1]},mat2.multiply=function(out,a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],b0=b[0],b1=b[1],b2=b[2],b3=b[3];return out[0]=a0*b0+a2*b1,out[1]=a1*b0+a3*b1,out[2]=a0*b2+a2*b3,out[3]=a1*b2+a3*b3,out},mat2.mul=mat2.multiply,mat2.rotate=function(out,a,rad){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],s=Math.sin(rad),c=Math.cos(rad);return out[0]=a0*c+a2*s,out[1]=a1*c+a3*s,out[2]=a0*-s+a2*c,out[3]=a1*-s+a3*c,out},mat2.scale=function(out,a,v){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],v0=v[0],v1=v[1];return out[0]=a0*v0,out[1]=a1*v0,out[2]=a2*v1,out[3]=a3*v1,out},mat2.fromRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);return out[0]=c,out[1]=s,out[2]=-s,out[3]=c,out},mat2.fromScaling=function(out,v){return out[0]=v[0],out[1]=0,out[2]=0,out[3]=v[1],out},mat2.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},mat2.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))},mat2.LDU=function(L,D,U,a){return L[2]=a[2]/a[0],U[0]=a[0],U[1]=a[1],U[3]=a[3]-L[2]*U[1],[L,D,U]},mat2.add=function(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out[2]=a[2]+b[2],out[3]=a[3]+b[3],out},mat2.subtract=function(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out[3]=a[3]-b[3],out},mat2.sub=mat2.subtract,mat2.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]},mat2.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],b0=b[0],b1=b[1],b2=b[2],b3=b[3];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=glMatrix.EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))},mat2.multiplyScalar=function(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out[3]=a[3]*b,out},mat2.multiplyScalarAndAdd=function(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out[2]=a[2]+b[2]*scale,out[3]=a[3]+b[3]*scale,out},module.exports=mat2},function(module,exports,__webpack_require__){var glMatrix=__webpack_require__(26),mat2d={};mat2d.create=function(){var out=new glMatrix.ARRAY_TYPE(6);return out[0]=1,out[1]=0,out[2]=0,out[3]=1,out[4]=0,out[5]=0,out},mat2d.clone=function(a){var out=new glMatrix.ARRAY_TYPE(6);return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out},mat2d.copy=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out},mat2d.identity=function(out){return out[0]=1,out[1]=0,out[2]=0,out[3]=1,out[4]=0,out[5]=0,out},mat2d.fromValues=function(a,b,c,d,tx,ty){var out=new glMatrix.ARRAY_TYPE(6);return out[0]=a,out[1]=b,out[2]=c,out[3]=d,out[4]=tx,out[5]=ty,out},mat2d.set=function(out,a,b,c,d,tx,ty){return out[0]=a,out[1]=b,out[2]=c,out[3]=d,out[4]=tx,out[5]=ty,out},mat2d.invert=function(out,a){var aa=a[0],ab=a[1],ac=a[2],ad=a[3],atx=a[4],aty=a[5],det=aa*ad-ab*ac;return det?(det=1/det,out[0]=ad*det,out[1]=-ab*det,out[2]=-ac*det,out[3]=aa*det,out[4]=(ac*aty-ad*atx)*det,out[5]=(ab*atx-aa*aty)*det,out):null},mat2d.determinant=function(a){return a[0]*a[3]-a[1]*a[2]},mat2d.multiply=function(out,a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5];return out[0]=a0*b0+a2*b1,out[1]=a1*b0+a3*b1,out[2]=a0*b2+a2*b3,out[3]=a1*b2+a3*b3,out[4]=a0*b4+a2*b5+a4,out[5]=a1*b4+a3*b5+a5,out},mat2d.mul=mat2d.multiply,mat2d.rotate=function(out,a,rad){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],s=Math.sin(rad),c=Math.cos(rad);return out[0]=a0*c+a2*s,out[1]=a1*c+a3*s,out[2]=a0*-s+a2*c,out[3]=a1*-s+a3*c,out[4]=a4,out[5]=a5,out},mat2d.scale=function(out,a,v){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],v0=v[0],v1=v[1];return out[0]=a0*v0,out[1]=a1*v0,out[2]=a2*v1,out[3]=a3*v1,out[4]=a4,out[5]=a5,out},mat2d.translate=function(out,a,v){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],v0=v[0],v1=v[1];return out[0]=a0,out[1]=a1,out[2]=a2,out[3]=a3,out[4]=a0*v0+a2*v1+a4,out[5]=a1*v0+a3*v1+a5,out},mat2d.fromRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);return out[0]=c,out[1]=s,out[2]=-s,out[3]=c,out[4]=0,out[5]=0,out},mat2d.fromScaling=function(out,v){return out[0]=v[0],out[1]=0,out[2]=0,out[3]=v[1],out[4]=0,out[5]=0,out},mat2d.fromTranslation=function(out,v){return out[0]=1,out[1]=0,out[2]=0,out[3]=1,out[4]=v[0],out[5]=v[1],out},mat2d.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"},mat2d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)},mat2d.add=function(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out[2]=a[2]+b[2],out[3]=a[3]+b[3],out[4]=a[4]+b[4],out[5]=a[5]+b[5],out},mat2d.subtract=function(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out[3]=a[3]-b[3],out[4]=a[4]-b[4],out[5]=a[5]-b[5],out},mat2d.sub=mat2d.subtract,mat2d.multiplyScalar=function(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out[3]=a[3]*b,out[4]=a[4]*b,out[5]=a[5]*b,out},mat2d.multiplyScalarAndAdd=function(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out[2]=a[2]+b[2]*scale,out[3]=a[3]+b[3]*scale,out[4]=a[4]+b[4]*scale,out[5]=a[5]+b[5]*scale,out},mat2d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]},mat2d.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=glMatrix.EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=glMatrix.EPSILON*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=glMatrix.EPSILON*Math.max(1,Math.abs(a5),Math.abs(b5))},module.exports=mat2d},function(module,exports,__webpack_require__){var glMatrix=__webpack_require__(26),mat3={};mat3.create=function(){var out=new glMatrix.ARRAY_TYPE(9);return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=1,out[5]=0,out[6]=0,out[7]=0,out[8]=1,out},mat3.fromMat4=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[4],out[4]=a[5],out[5]=a[6],out[6]=a[8],out[7]=a[9],out[8]=a[10],out},mat3.clone=function(a){var out=new glMatrix.ARRAY_TYPE(9);return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],out},mat3.copy=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],out},mat3.fromValues=function(m00,m01,m02,m10,m11,m12,m20,m21,m22){var out=new glMatrix.ARRAY_TYPE(9);return out[0]=m00,out[1]=m01,out[2]=m02,out[3]=m10,out[4]=m11,out[5]=m12,out[6]=m20,out[7]=m21,out[8]=m22,out},mat3.set=function(out,m00,m01,m02,m10,m11,m12,m20,m21,m22){return out[0]=m00,out[1]=m01,out[2]=m02,out[3]=m10,out[4]=m11,out[5]=m12,out[6]=m20,out[7]=m21,out[8]=m22,out},mat3.identity=function(out){return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=1,out[5]=0,out[6]=0,out[7]=0,out[8]=1,out},mat3.transpose=function(out,a){if(out===a){var a01=a[1],a02=a[2],a12=a[5];out[1]=a[3],out[2]=a[6],out[3]=a01,out[5]=a[7],out[6]=a02,out[7]=a12}else out[0]=a[0],out[1]=a[3],out[2]=a[6],out[3]=a[1],out[4]=a[4],out[5]=a[7],out[6]=a[2],out[7]=a[5],out[8]=a[8];return out},mat3.invert=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],b01=a22*a11-a12*a21,b11=-a22*a10+a12*a20,b21=a21*a10-a11*a20,det=a00*b01+a01*b11+a02*b21;return det?(det=1/det,out[0]=b01*det,out[1]=(-a22*a01+a02*a21)*det,out[2]=(a12*a01-a02*a11)*det,out[3]=b11*det,out[4]=(a22*a00-a02*a20)*det,out[5]=(-a12*a00+a02*a10)*det,out[6]=b21*det,out[7]=(-a21*a00+a01*a20)*det,out[8]=(a11*a00-a01*a10)*det,out):null},mat3.adjoint=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8];return out[0]=a11*a22-a12*a21,out[1]=a02*a21-a01*a22,out[2]=a01*a12-a02*a11,out[3]=a12*a20-a10*a22,out[4]=a00*a22-a02*a20,out[5]=a02*a10-a00*a12,out[6]=a10*a21-a11*a20,out[7]=a01*a20-a00*a21,out[8]=a00*a11-a01*a10,out},mat3.determinant=function(a){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8];return a00*(a22*a11-a12*a21)+a01*(-a22*a10+a12*a20)+a02*(a21*a10-a11*a20)},mat3.multiply=function(out,a,b){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],b00=b[0],b01=b[1],b02=b[2],b10=b[3],b11=b[4],b12=b[5],b20=b[6],b21=b[7],b22=b[8];return out[0]=b00*a00+b01*a10+b02*a20,out[1]=b00*a01+b01*a11+b02*a21,out[2]=b00*a02+b01*a12+b02*a22,out[3]=b10*a00+b11*a10+b12*a20,out[4]=b10*a01+b11*a11+b12*a21,out[5]=b10*a02+b11*a12+b12*a22,out[6]=b20*a00+b21*a10+b22*a20,out[7]=b20*a01+b21*a11+b22*a21,out[8]=b20*a02+b21*a12+b22*a22,out},mat3.mul=mat3.multiply,mat3.translate=function(out,a,v){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],x=v[0],y=v[1];return out[0]=a00,out[1]=a01,out[2]=a02,out[3]=a10,out[4]=a11,out[5]=a12,out[6]=x*a00+y*a10+a20,out[7]=x*a01+y*a11+a21,out[8]=x*a02+y*a12+a22,out},mat3.rotate=function(out,a,rad){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],s=Math.sin(rad),c=Math.cos(rad);return out[0]=c*a00+s*a10,out[1]=c*a01+s*a11,out[2]=c*a02+s*a12,out[3]=c*a10-s*a00,out[4]=c*a11-s*a01,out[5]=c*a12-s*a02,out[6]=a20,out[7]=a21,out[8]=a22,out},mat3.scale=function(out,a,v){var x=v[0],y=v[1];return out[0]=x*a[0],out[1]=x*a[1],out[2]=x*a[2],out[3]=y*a[3],out[4]=y*a[4],out[5]=y*a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],out},mat3.fromTranslation=function(out,v){return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=1,out[5]=0,out[6]=v[0],out[7]=v[1],out[8]=1,out},mat3.fromRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);return out[0]=c,out[1]=s,out[2]=0,out[3]=-s,out[4]=c,out[5]=0,out[6]=0,out[7]=0,out[8]=1,out},mat3.fromScaling=function(out,v){return out[0]=v[0],out[1]=0,out[2]=0,out[3]=0,out[4]=v[1],out[5]=0,out[6]=0,out[7]=0,out[8]=1,out},mat3.fromMat2d=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=0,out[3]=a[2],out[4]=a[3],out[5]=0,out[6]=a[4],out[7]=a[5],out[8]=1,out},mat3.fromQuat=function(out,q){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,yx=y*x2,yy=y*y2,zx=z*x2,zy=z*y2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;return out[0]=1-yy-zz,out[3]=yx-wz,out[6]=zx+wy,out[1]=yx+wz,out[4]=1-xx-zz,out[7]=zy-wx,out[2]=zx-wy,out[5]=zy+wx,out[8]=1-xx-yy,out},mat3.normalFromMat4=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;return det?(det=1/det,out[0]=(a11*b11-a12*b10+a13*b09)*det,out[1]=(a12*b08-a10*b11-a13*b07)*det,out[2]=(a10*b10-a11*b08+a13*b06)*det,out[3]=(a02*b10-a01*b11-a03*b09)*det,out[4]=(a00*b11-a02*b08+a03*b07)*det,out[5]=(a01*b08-a00*b10-a03*b06)*det,out[6]=(a31*b05-a32*b04+a33*b03)*det,out[7]=(a32*b02-a30*b05-a33*b01)*det,out[8]=(a30*b04-a31*b02+a33*b00)*det,out):null},mat3.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"},mat3.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))},mat3.add=function(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out[2]=a[2]+b[2],out[3]=a[3]+b[3],out[4]=a[4]+b[4],out[5]=a[5]+b[5],out[6]=a[6]+b[6],out[7]=a[7]+b[7],out[8]=a[8]+b[8],out},mat3.subtract=function(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out[3]=a[3]-b[3],out[4]=a[4]-b[4],out[5]=a[5]-b[5],out[6]=a[6]-b[6],out[7]=a[7]-b[7],out[8]=a[8]-b[8],out},mat3.sub=mat3.subtract,mat3.multiplyScalar=function(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out[3]=a[3]*b,out[4]=a[4]*b,out[5]=a[5]*b,out[6]=a[6]*b,out[7]=a[7]*b,out[8]=a[8]*b,out},mat3.multiplyScalarAndAdd=function(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out[2]=a[2]+b[2]*scale,out[3]=a[3]+b[3]*scale,out[4]=a[4]+b[4]*scale,out[5]=a[5]+b[5]*scale,out[6]=a[6]+b[6]*scale,out[7]=a[7]+b[7]*scale,out[8]=a[8]+b[8]*scale,out},mat3.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]},mat3.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],a6=a[6],a7=a[7],a8=a[8],b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=a[6],b7=b[7],b8=b[8];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=glMatrix.EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=glMatrix.EPSILON*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=glMatrix.EPSILON*Math.max(1,Math.abs(a5),Math.abs(b5))&&Math.abs(a6-b6)<=glMatrix.EPSILON*Math.max(1,Math.abs(a6),Math.abs(b6))&&Math.abs(a7-b7)<=glMatrix.EPSILON*Math.max(1,Math.abs(a7),Math.abs(b7))&&Math.abs(a8-b8)<=glMatrix.EPSILON*Math.max(1,Math.abs(a8),Math.abs(b8))},module.exports=mat3},function(module,exports,__webpack_require__){var glMatrix=__webpack_require__(26),mat4={scalar:{},SIMD:{}};mat4.create=function(){var out=new glMatrix.ARRAY_TYPE(16);return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=1,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=1,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},mat4.clone=function(a){var out=new glMatrix.ARRAY_TYPE(16);return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],out[9]=a[9],out[10]=a[10],out[11]=a[11],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15],out},mat4.copy=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],out[9]=a[9],out[10]=a[10],out[11]=a[11],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15],out},mat4.fromValues=function(m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33){var out=new glMatrix.ARRAY_TYPE(16);return out[0]=m00,out[1]=m01,out[2]=m02,out[3]=m03,out[4]=m10,out[5]=m11,out[6]=m12,out[7]=m13,out[8]=m20,out[9]=m21,out[10]=m22,out[11]=m23,out[12]=m30,out[13]=m31,out[14]=m32,out[15]=m33,out},mat4.set=function(out,m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33){return out[0]=m00,out[1]=m01,out[2]=m02,out[3]=m03,out[4]=m10,out[5]=m11,out[6]=m12,out[7]=m13,out[8]=m20,out[9]=m21,out[10]=m22,out[11]=m23,out[12]=m30,out[13]=m31,out[14]=m32,out[15]=m33,out},mat4.identity=function(out){return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=1,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=1,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},mat4.scalar.transpose=function(out,a){if(out===a){var a01=a[1],a02=a[2],a03=a[3],a12=a[6],a13=a[7],a23=a[11];out[1]=a[4],out[2]=a[8],out[3]=a[12],out[4]=a01,out[6]=a[9],out[7]=a[13],out[8]=a02,out[9]=a12,out[11]=a[14],out[12]=a03,out[13]=a13,out[14]=a23}else out[0]=a[0],out[1]=a[4],out[2]=a[8],out[3]=a[12],out[4]=a[1],out[5]=a[5],out[6]=a[9],out[7]=a[13],out[8]=a[2],out[9]=a[6],out[10]=a[10],out[11]=a[14],out[12]=a[3],out[13]=a[7],out[14]=a[11],out[15]=a[15];return out},mat4.SIMD.transpose=function(out,a){var a0,a1,a2,a3,tmp01,tmp23,out0,out1,out2,out3;return a0=SIMD.Float32x4.load(a,0),a1=SIMD.Float32x4.load(a,4),a2=SIMD.Float32x4.load(a,8),a3=SIMD.Float32x4.load(a,12),tmp01=SIMD.Float32x4.shuffle(a0,a1,0,1,4,5),tmp23=SIMD.Float32x4.shuffle(a2,a3,0,1,4,5),out0=SIMD.Float32x4.shuffle(tmp01,tmp23,0,2,4,6),out1=SIMD.Float32x4.shuffle(tmp01,tmp23,1,3,5,7),SIMD.Float32x4.store(out,0,out0),SIMD.Float32x4.store(out,4,out1),tmp01=SIMD.Float32x4.shuffle(a0,a1,2,3,6,7),tmp23=SIMD.Float32x4.shuffle(a2,a3,2,3,6,7),out2=SIMD.Float32x4.shuffle(tmp01,tmp23,0,2,4,6),out3=SIMD.Float32x4.shuffle(tmp01,tmp23,1,3,5,7),SIMD.Float32x4.store(out,8,out2),SIMD.Float32x4.store(out,12,out3),out},mat4.transpose=glMatrix.USE_SIMD?mat4.SIMD.transpose:mat4.scalar.transpose,mat4.scalar.invert=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;return det?(det=1/det,out[0]=(a11*b11-a12*b10+a13*b09)*det,out[1]=(a02*b10-a01*b11-a03*b09)*det,out[2]=(a31*b05-a32*b04+a33*b03)*det,out[3]=(a22*b04-a21*b05-a23*b03)*det,out[4]=(a12*b08-a10*b11-a13*b07)*det,out[5]=(a00*b11-a02*b08+a03*b07)*det,out[6]=(a32*b02-a30*b05-a33*b01)*det,out[7]=(a20*b05-a22*b02+a23*b01)*det,out[8]=(a10*b10-a11*b08+a13*b06)*det,out[9]=(a01*b08-a00*b10-a03*b06)*det,out[10]=(a30*b04-a31*b02+a33*b00)*det,out[11]=(a21*b02-a20*b04-a23*b00)*det,out[12]=(a11*b07-a10*b09-a12*b06)*det,out[13]=(a00*b09-a01*b07+a02*b06)*det,out[14]=(a31*b01-a30*b03-a32*b00)*det,out[15]=(a20*b03-a21*b01+a22*b00)*det,out):null},mat4.SIMD.invert=function(out,a){var row0,row1,row2,row3,tmp1,minor0,minor1,minor2,minor3,det,a0=SIMD.Float32x4.load(a,0),a1=SIMD.Float32x4.load(a,4),a2=SIMD.Float32x4.load(a,8),a3=SIMD.Float32x4.load(a,12);return tmp1=SIMD.Float32x4.shuffle(a0,a1,0,1,4,5),row1=SIMD.Float32x4.shuffle(a2,a3,0,1,4,5),row0=SIMD.Float32x4.shuffle(tmp1,row1,0,2,4,6),row1=SIMD.Float32x4.shuffle(row1,tmp1,1,3,5,7),tmp1=SIMD.Float32x4.shuffle(a0,a1,2,3,6,7),row3=SIMD.Float32x4.shuffle(a2,a3,2,3,6,7),row2=SIMD.Float32x4.shuffle(tmp1,row3,0,2,4,6),row3=SIMD.Float32x4.shuffle(row3,tmp1,1,3,5,7),tmp1=SIMD.Float32x4.mul(row2,row3),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor0=SIMD.Float32x4.mul(row1,tmp1),minor1=SIMD.Float32x4.mul(row0,tmp1),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor0=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row1,tmp1),minor0),minor1=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0,tmp1),minor1),minor1=SIMD.Float32x4.swizzle(minor1,2,3,0,1),tmp1=SIMD.Float32x4.mul(row1,row2),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor0=SIMD.Float32x4.add(SIMD.Float32x4.mul(row3,tmp1),minor0),minor3=SIMD.Float32x4.mul(row0,tmp1),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor0=SIMD.Float32x4.sub(minor0,SIMD.Float32x4.mul(row3,tmp1)),minor3=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0,tmp1),minor3),minor3=SIMD.Float32x4.swizzle(minor3,2,3,0,1),tmp1=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(row1,2,3,0,1),row3),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),row2=SIMD.Float32x4.swizzle(row2,2,3,0,1),minor0=SIMD.Float32x4.add(SIMD.Float32x4.mul(row2,tmp1),minor0),minor2=SIMD.Float32x4.mul(row0,tmp1),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor0=SIMD.Float32x4.sub(minor0,SIMD.Float32x4.mul(row2,tmp1)),minor2=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0,tmp1),minor2),minor2=SIMD.Float32x4.swizzle(minor2,2,3,0,1),tmp1=SIMD.Float32x4.mul(row0,row1),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor2=SIMD.Float32x4.add(SIMD.Float32x4.mul(row3,tmp1),minor2),minor3=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row2,tmp1),minor3),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor2=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row3,tmp1),minor2),minor3=SIMD.Float32x4.sub(minor3,SIMD.Float32x4.mul(row2,tmp1)),tmp1=SIMD.Float32x4.mul(row0,row3),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor1=SIMD.Float32x4.sub(minor1,SIMD.Float32x4.mul(row2,tmp1)),minor2=SIMD.Float32x4.add(SIMD.Float32x4.mul(row1,tmp1),minor2),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor1=SIMD.Float32x4.add(SIMD.Float32x4.mul(row2,tmp1),minor1),minor2=SIMD.Float32x4.sub(minor2,SIMD.Float32x4.mul(row1,tmp1)),tmp1=SIMD.Float32x4.mul(row0,row2),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor1=SIMD.Float32x4.add(SIMD.Float32x4.mul(row3,tmp1),minor1),minor3=SIMD.Float32x4.sub(minor3,SIMD.Float32x4.mul(row1,tmp1)),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor1=SIMD.Float32x4.sub(minor1,SIMD.Float32x4.mul(row3,tmp1)),minor3=SIMD.Float32x4.add(SIMD.Float32x4.mul(row1,tmp1),minor3),det=SIMD.Float32x4.mul(row0,minor0),det=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(det,2,3,0,1),det),det=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(det,1,0,3,2),det),tmp1=SIMD.Float32x4.reciprocalApproximation(det),det=SIMD.Float32x4.sub(SIMD.Float32x4.add(tmp1,tmp1),SIMD.Float32x4.mul(det,SIMD.Float32x4.mul(tmp1,tmp1))),(det=SIMD.Float32x4.swizzle(det,0,0,0,0))?(SIMD.Float32x4.store(out,0,SIMD.Float32x4.mul(det,minor0)),SIMD.Float32x4.store(out,4,SIMD.Float32x4.mul(det,minor1)),SIMD.Float32x4.store(out,8,SIMD.Float32x4.mul(det,minor2)),SIMD.Float32x4.store(out,12,SIMD.Float32x4.mul(det,minor3)),out):null},mat4.invert=glMatrix.USE_SIMD?mat4.SIMD.invert:mat4.scalar.invert,mat4.scalar.adjoint=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15];return out[0]=a11*(a22*a33-a23*a32)-a21*(a12*a33-a13*a32)+a31*(a12*a23-a13*a22),out[1]=-(a01*(a22*a33-a23*a32)-a21*(a02*a33-a03*a32)+a31*(a02*a23-a03*a22)),out[2]=a01*(a12*a33-a13*a32)-a11*(a02*a33-a03*a32)+a31*(a02*a13-a03*a12),out[3]=-(a01*(a12*a23-a13*a22)-a11*(a02*a23-a03*a22)+a21*(a02*a13-a03*a12)),out[4]=-(a10*(a22*a33-a23*a32)-a20*(a12*a33-a13*a32)+a30*(a12*a23-a13*a22)),out[5]=a00*(a22*a33-a23*a32)-a20*(a02*a33-a03*a32)+a30*(a02*a23-a03*a22),out[6]=-(a00*(a12*a33-a13*a32)-a10*(a02*a33-a03*a32)+a30*(a02*a13-a03*a12)),out[7]=a00*(a12*a23-a13*a22)-a10*(a02*a23-a03*a22)+a20*(a02*a13-a03*a12),out[8]=a10*(a21*a33-a23*a31)-a20*(a11*a33-a13*a31)+a30*(a11*a23-a13*a21),out[9]=-(a00*(a21*a33-a23*a31)-a20*(a01*a33-a03*a31)+a30*(a01*a23-a03*a21)),out[10]=a00*(a11*a33-a13*a31)-a10*(a01*a33-a03*a31)+a30*(a01*a13-a03*a11),out[11]=-(a00*(a11*a23-a13*a21)-a10*(a01*a23-a03*a21)+a20*(a01*a13-a03*a11)),out[12]=-(a10*(a21*a32-a22*a31)-a20*(a11*a32-a12*a31)+a30*(a11*a22-a12*a21)),out[13]=a00*(a21*a32-a22*a31)-a20*(a01*a32-a02*a31)+a30*(a01*a22-a02*a21),out[14]=-(a00*(a11*a32-a12*a31)-a10*(a01*a32-a02*a31)+a30*(a01*a12-a02*a11)),out[15]=a00*(a11*a22-a12*a21)-a10*(a01*a22-a02*a21)+a20*(a01*a12-a02*a11),out},mat4.SIMD.adjoint=function(out,a){var a0,a1,a2,a3,row0,row1,row2,row3,tmp1,minor0,minor1,minor2,minor3,a0=SIMD.Float32x4.load(a,0),a1=SIMD.Float32x4.load(a,4),a2=SIMD.Float32x4.load(a,8),a3=SIMD.Float32x4.load(a,12);return tmp1=SIMD.Float32x4.shuffle(a0,a1,0,1,4,5),row1=SIMD.Float32x4.shuffle(a2,a3,0,1,4,5),row0=SIMD.Float32x4.shuffle(tmp1,row1,0,2,4,6),row1=SIMD.Float32x4.shuffle(row1,tmp1,1,3,5,7),tmp1=SIMD.Float32x4.shuffle(a0,a1,2,3,6,7),row3=SIMD.Float32x4.shuffle(a2,a3,2,3,6,7),row2=SIMD.Float32x4.shuffle(tmp1,row3,0,2,4,6),row3=SIMD.Float32x4.shuffle(row3,tmp1,1,3,5,7),tmp1=SIMD.Float32x4.mul(row2,row3),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor0=SIMD.Float32x4.mul(row1,tmp1),minor1=SIMD.Float32x4.mul(row0,tmp1),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor0=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row1,tmp1),minor0),minor1=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0,tmp1),minor1),minor1=SIMD.Float32x4.swizzle(minor1,2,3,0,1),tmp1=SIMD.Float32x4.mul(row1,row2),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor0=SIMD.Float32x4.add(SIMD.Float32x4.mul(row3,tmp1),minor0),minor3=SIMD.Float32x4.mul(row0,tmp1),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor0=SIMD.Float32x4.sub(minor0,SIMD.Float32x4.mul(row3,tmp1)),minor3=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0,tmp1),minor3),minor3=SIMD.Float32x4.swizzle(minor3,2,3,0,1),tmp1=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(row1,2,3,0,1),row3),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),row2=SIMD.Float32x4.swizzle(row2,2,3,0,1),minor0=SIMD.Float32x4.add(SIMD.Float32x4.mul(row2,tmp1),minor0),minor2=SIMD.Float32x4.mul(row0,tmp1),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor0=SIMD.Float32x4.sub(minor0,SIMD.Float32x4.mul(row2,tmp1)),minor2=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0,tmp1),minor2),minor2=SIMD.Float32x4.swizzle(minor2,2,3,0,1),tmp1=SIMD.Float32x4.mul(row0,row1),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor2=SIMD.Float32x4.add(SIMD.Float32x4.mul(row3,tmp1),minor2),minor3=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row2,tmp1),minor3),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),
minor2=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row3,tmp1),minor2),minor3=SIMD.Float32x4.sub(minor3,SIMD.Float32x4.mul(row2,tmp1)),tmp1=SIMD.Float32x4.mul(row0,row3),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor1=SIMD.Float32x4.sub(minor1,SIMD.Float32x4.mul(row2,tmp1)),minor2=SIMD.Float32x4.add(SIMD.Float32x4.mul(row1,tmp1),minor2),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor1=SIMD.Float32x4.add(SIMD.Float32x4.mul(row2,tmp1),minor1),minor2=SIMD.Float32x4.sub(minor2,SIMD.Float32x4.mul(row1,tmp1)),tmp1=SIMD.Float32x4.mul(row0,row2),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor1=SIMD.Float32x4.add(SIMD.Float32x4.mul(row3,tmp1),minor1),minor3=SIMD.Float32x4.sub(minor3,SIMD.Float32x4.mul(row1,tmp1)),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor1=SIMD.Float32x4.sub(minor1,SIMD.Float32x4.mul(row3,tmp1)),minor3=SIMD.Float32x4.add(SIMD.Float32x4.mul(row1,tmp1),minor3),SIMD.Float32x4.store(out,0,minor0),SIMD.Float32x4.store(out,4,minor1),SIMD.Float32x4.store(out,8,minor2),SIMD.Float32x4.store(out,12,minor3),out},mat4.adjoint=glMatrix.USE_SIMD?mat4.SIMD.adjoint:mat4.scalar.adjoint,mat4.determinant=function(a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32;return b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06},mat4.SIMD.multiply=function(out,a,b){var a0=SIMD.Float32x4.load(a,0),a1=SIMD.Float32x4.load(a,4),a2=SIMD.Float32x4.load(a,8),a3=SIMD.Float32x4.load(a,12),b0=SIMD.Float32x4.load(b,0),out0=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0,0,0,0,0),a0),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0,1,1,1,1),a1),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0,2,2,2,2),a2),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0,3,3,3,3),a3))));SIMD.Float32x4.store(out,0,out0);var b1=SIMD.Float32x4.load(b,4),out1=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1,0,0,0,0),a0),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1,1,1,1,1),a1),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1,2,2,2,2),a2),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1,3,3,3,3),a3))));SIMD.Float32x4.store(out,4,out1);var b2=SIMD.Float32x4.load(b,8),out2=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2,0,0,0,0),a0),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2,1,1,1,1),a1),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2,2,2,2,2),a2),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2,3,3,3,3),a3))));SIMD.Float32x4.store(out,8,out2);var b3=SIMD.Float32x4.load(b,12),out3=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3,0,0,0,0),a0),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3,1,1,1,1),a1),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3,2,2,2,2),a2),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3,3,3,3,3),a3))));return SIMD.Float32x4.store(out,12,out3),out},mat4.scalar.multiply=function(out,a,b){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b0=b[0],b1=b[1],b2=b[2],b3=b[3];return out[0]=b0*a00+b1*a10+b2*a20+b3*a30,out[1]=b0*a01+b1*a11+b2*a21+b3*a31,out[2]=b0*a02+b1*a12+b2*a22+b3*a32,out[3]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[4],b1=b[5],b2=b[6],b3=b[7],out[4]=b0*a00+b1*a10+b2*a20+b3*a30,out[5]=b0*a01+b1*a11+b2*a21+b3*a31,out[6]=b0*a02+b1*a12+b2*a22+b3*a32,out[7]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[8],b1=b[9],b2=b[10],b3=b[11],out[8]=b0*a00+b1*a10+b2*a20+b3*a30,out[9]=b0*a01+b1*a11+b2*a21+b3*a31,out[10]=b0*a02+b1*a12+b2*a22+b3*a32,out[11]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[12],b1=b[13],b2=b[14],b3=b[15],out[12]=b0*a00+b1*a10+b2*a20+b3*a30,out[13]=b0*a01+b1*a11+b2*a21+b3*a31,out[14]=b0*a02+b1*a12+b2*a22+b3*a32,out[15]=b0*a03+b1*a13+b2*a23+b3*a33,out},mat4.multiply=glMatrix.USE_SIMD?mat4.SIMD.multiply:mat4.scalar.multiply,mat4.mul=mat4.multiply,mat4.scalar.translate=function(out,a,v){var a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,x=v[0],y=v[1],z=v[2];return a===out?(out[12]=a[0]*x+a[4]*y+a[8]*z+a[12],out[13]=a[1]*x+a[5]*y+a[9]*z+a[13],out[14]=a[2]*x+a[6]*y+a[10]*z+a[14],out[15]=a[3]*x+a[7]*y+a[11]*z+a[15]):(a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],out[0]=a00,out[1]=a01,out[2]=a02,out[3]=a03,out[4]=a10,out[5]=a11,out[6]=a12,out[7]=a13,out[8]=a20,out[9]=a21,out[10]=a22,out[11]=a23,out[12]=a00*x+a10*y+a20*z+a[12],out[13]=a01*x+a11*y+a21*z+a[13],out[14]=a02*x+a12*y+a22*z+a[14],out[15]=a03*x+a13*y+a23*z+a[15]),out},mat4.SIMD.translate=function(out,a,v){var a0=SIMD.Float32x4.load(a,0),a1=SIMD.Float32x4.load(a,4),a2=SIMD.Float32x4.load(a,8),a3=SIMD.Float32x4.load(a,12),vec=SIMD.Float32x4(v[0],v[1],v[2],0);a!==out&&(out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],out[9]=a[9],out[10]=a[10],out[11]=a[11]),a0=SIMD.Float32x4.mul(a0,SIMD.Float32x4.swizzle(vec,0,0,0,0)),a1=SIMD.Float32x4.mul(a1,SIMD.Float32x4.swizzle(vec,1,1,1,1)),a2=SIMD.Float32x4.mul(a2,SIMD.Float32x4.swizzle(vec,2,2,2,2));var t0=SIMD.Float32x4.add(a0,SIMD.Float32x4.add(a1,SIMD.Float32x4.add(a2,a3)));return SIMD.Float32x4.store(out,12,t0),out},mat4.translate=glMatrix.USE_SIMD?mat4.SIMD.translate:mat4.scalar.translate,mat4.scalar.scale=function(out,a,v){var x=v[0],y=v[1],z=v[2];return out[0]=a[0]*x,out[1]=a[1]*x,out[2]=a[2]*x,out[3]=a[3]*x,out[4]=a[4]*y,out[5]=a[5]*y,out[6]=a[6]*y,out[7]=a[7]*y,out[8]=a[8]*z,out[9]=a[9]*z,out[10]=a[10]*z,out[11]=a[11]*z,out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15],out},mat4.SIMD.scale=function(out,a,v){var a0,a1,a2,vec=SIMD.Float32x4(v[0],v[1],v[2],0);return a0=SIMD.Float32x4.load(a,0),SIMD.Float32x4.store(out,0,SIMD.Float32x4.mul(a0,SIMD.Float32x4.swizzle(vec,0,0,0,0))),a1=SIMD.Float32x4.load(a,4),SIMD.Float32x4.store(out,4,SIMD.Float32x4.mul(a1,SIMD.Float32x4.swizzle(vec,1,1,1,1))),a2=SIMD.Float32x4.load(a,8),SIMD.Float32x4.store(out,8,SIMD.Float32x4.mul(a2,SIMD.Float32x4.swizzle(vec,2,2,2,2))),out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15],out},mat4.scale=glMatrix.USE_SIMD?mat4.SIMD.scale:mat4.scalar.scale,mat4.rotate=function(out,a,rad,axis){var s,c,t,a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,b00,b01,b02,b10,b11,b12,b20,b21,b22,x=axis[0],y=axis[1],z=axis[2],len=Math.sqrt(x*x+y*y+z*z);return Math.abs(len)<glMatrix.EPSILON?null:(len=1/len,x*=len,y*=len,z*=len,s=Math.sin(rad),c=Math.cos(rad),t=1-c,a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],b00=x*x*t+c,b01=y*x*t+z*s,b02=z*x*t-y*s,b10=x*y*t-z*s,b11=y*y*t+c,b12=z*y*t+x*s,b20=x*z*t+y*s,b21=y*z*t-x*s,b22=z*z*t+c,out[0]=a00*b00+a10*b01+a20*b02,out[1]=a01*b00+a11*b01+a21*b02,out[2]=a02*b00+a12*b01+a22*b02,out[3]=a03*b00+a13*b01+a23*b02,out[4]=a00*b10+a10*b11+a20*b12,out[5]=a01*b10+a11*b11+a21*b12,out[6]=a02*b10+a12*b11+a22*b12,out[7]=a03*b10+a13*b11+a23*b12,out[8]=a00*b20+a10*b21+a20*b22,out[9]=a01*b20+a11*b21+a21*b22,out[10]=a02*b20+a12*b21+a22*b22,out[11]=a03*b20+a13*b21+a23*b22,a!==out&&(out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out)},mat4.scalar.rotateX=function(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11];return a!==out&&(out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out[4]=a10*c+a20*s,out[5]=a11*c+a21*s,out[6]=a12*c+a22*s,out[7]=a13*c+a23*s,out[8]=a20*c-a10*s,out[9]=a21*c-a11*s,out[10]=a22*c-a12*s,out[11]=a23*c-a13*s,out},mat4.SIMD.rotateX=function(out,a,rad){var s=SIMD.Float32x4.splat(Math.sin(rad)),c=SIMD.Float32x4.splat(Math.cos(rad));a!==out&&(out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]);var a_1=SIMD.Float32x4.load(a,4),a_2=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(out,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(a_1,c),SIMD.Float32x4.mul(a_2,s))),SIMD.Float32x4.store(out,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a_2,c),SIMD.Float32x4.mul(a_1,s))),out},mat4.rotateX=glMatrix.USE_SIMD?mat4.SIMD.rotateX:mat4.scalar.rotateX,mat4.scalar.rotateY=function(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a20=a[8],a21=a[9],a22=a[10],a23=a[11];return a!==out&&(out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out[0]=a00*c-a20*s,out[1]=a01*c-a21*s,out[2]=a02*c-a22*s,out[3]=a03*c-a23*s,out[8]=a00*s+a20*c,out[9]=a01*s+a21*c,out[10]=a02*s+a22*c,out[11]=a03*s+a23*c,out},mat4.SIMD.rotateY=function(out,a,rad){var s=SIMD.Float32x4.splat(Math.sin(rad)),c=SIMD.Float32x4.splat(Math.cos(rad));a!==out&&(out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]);var a_0=SIMD.Float32x4.load(a,0),a_2=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(out,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a_0,c),SIMD.Float32x4.mul(a_2,s))),SIMD.Float32x4.store(out,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(a_0,s),SIMD.Float32x4.mul(a_2,c))),out},mat4.rotateY=glMatrix.USE_SIMD?mat4.SIMD.rotateY:mat4.scalar.rotateY,mat4.scalar.rotateZ=function(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7];return a!==out&&(out[8]=a[8],out[9]=a[9],out[10]=a[10],out[11]=a[11],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out[0]=a00*c+a10*s,out[1]=a01*c+a11*s,out[2]=a02*c+a12*s,out[3]=a03*c+a13*s,out[4]=a10*c-a00*s,out[5]=a11*c-a01*s,out[6]=a12*c-a02*s,out[7]=a13*c-a03*s,out},mat4.SIMD.rotateZ=function(out,a,rad){var s=SIMD.Float32x4.splat(Math.sin(rad)),c=SIMD.Float32x4.splat(Math.cos(rad));a!==out&&(out[8]=a[8],out[9]=a[9],out[10]=a[10],out[11]=a[11],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]);var a_0=SIMD.Float32x4.load(a,0),a_1=SIMD.Float32x4.load(a,4);return SIMD.Float32x4.store(out,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(a_0,c),SIMD.Float32x4.mul(a_1,s))),SIMD.Float32x4.store(out,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a_1,c),SIMD.Float32x4.mul(a_0,s))),out},mat4.rotateZ=glMatrix.USE_SIMD?mat4.SIMD.rotateZ:mat4.scalar.rotateZ,mat4.fromTranslation=function(out,v){return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=1,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=1,out[11]=0,out[12]=v[0],out[13]=v[1],out[14]=v[2],out[15]=1,out},mat4.fromScaling=function(out,v){return out[0]=v[0],out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=v[1],out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=v[2],out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},mat4.fromRotation=function(out,rad,axis){var s,c,t,x=axis[0],y=axis[1],z=axis[2],len=Math.sqrt(x*x+y*y+z*z);return Math.abs(len)<glMatrix.EPSILON?null:(len=1/len,x*=len,y*=len,z*=len,s=Math.sin(rad),c=Math.cos(rad),t=1-c,out[0]=x*x*t+c,out[1]=y*x*t+z*s,out[2]=z*x*t-y*s,out[3]=0,out[4]=x*y*t-z*s,out[5]=y*y*t+c,out[6]=z*y*t+x*s,out[7]=0,out[8]=x*z*t+y*s,out[9]=y*z*t-x*s,out[10]=z*z*t+c,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out)},mat4.fromXRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=c,out[6]=s,out[7]=0,out[8]=0,out[9]=-s,out[10]=c,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},mat4.fromYRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);return out[0]=c,out[1]=0,out[2]=-s,out[3]=0,out[4]=0,out[5]=1,out[6]=0,out[7]=0,out[8]=s,out[9]=0,out[10]=c,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},mat4.fromZRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);return out[0]=c,out[1]=s,out[2]=0,out[3]=0,out[4]=-s,out[5]=c,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=1,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},mat4.fromRotationTranslation=function(out,q,v){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;return out[0]=1-(yy+zz),out[1]=xy+wz,out[2]=xz-wy,out[3]=0,out[4]=xy-wz,out[5]=1-(xx+zz),out[6]=yz+wx,out[7]=0,out[8]=xz+wy,out[9]=yz-wx,out[10]=1-(xx+yy),out[11]=0,out[12]=v[0],out[13]=v[1],out[14]=v[2],out[15]=1,out},mat4.getTranslation=function(out,mat){return out[0]=mat[12],out[1]=mat[13],out[2]=mat[14],out},mat4.getRotation=function(out,mat){var trace=mat[0]+mat[5]+mat[10],S=0;return trace>0?(S=2*Math.sqrt(trace+1),out[3]=.25*S,out[0]=(mat[6]-mat[9])/S,out[1]=(mat[8]-mat[2])/S,out[2]=(mat[1]-mat[4])/S):mat[0]>mat[5]&mat[0]>mat[10]?(S=2*Math.sqrt(1+mat[0]-mat[5]-mat[10]),out[3]=(mat[6]-mat[9])/S,out[0]=.25*S,out[1]=(mat[1]+mat[4])/S,out[2]=(mat[8]+mat[2])/S):mat[5]>mat[10]?(S=2*Math.sqrt(1+mat[5]-mat[0]-mat[10]),out[3]=(mat[8]-mat[2])/S,out[0]=(mat[1]+mat[4])/S,out[1]=.25*S,out[2]=(mat[6]+mat[9])/S):(S=2*Math.sqrt(1+mat[10]-mat[0]-mat[5]),out[3]=(mat[1]-mat[4])/S,out[0]=(mat[8]+mat[2])/S,out[1]=(mat[6]+mat[9])/S,out[2]=.25*S),out},mat4.fromRotationTranslationScale=function(out,q,v,s){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2,sx=s[0],sy=s[1],sz=s[2];return out[0]=(1-(yy+zz))*sx,out[1]=(xy+wz)*sx,out[2]=(xz-wy)*sx,out[3]=0,out[4]=(xy-wz)*sy,out[5]=(1-(xx+zz))*sy,out[6]=(yz+wx)*sy,out[7]=0,out[8]=(xz+wy)*sz,out[9]=(yz-wx)*sz,out[10]=(1-(xx+yy))*sz,out[11]=0,out[12]=v[0],out[13]=v[1],out[14]=v[2],out[15]=1,out},mat4.fromRotationTranslationScaleOrigin=function(out,q,v,s,o){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2,sx=s[0],sy=s[1],sz=s[2],ox=o[0],oy=o[1],oz=o[2];return out[0]=(1-(yy+zz))*sx,out[1]=(xy+wz)*sx,out[2]=(xz-wy)*sx,out[3]=0,out[4]=(xy-wz)*sy,out[5]=(1-(xx+zz))*sy,out[6]=(yz+wx)*sy,out[7]=0,out[8]=(xz+wy)*sz,out[9]=(yz-wx)*sz,out[10]=(1-(xx+yy))*sz,out[11]=0,out[12]=v[0]+ox-(out[0]*ox+out[4]*oy+out[8]*oz),out[13]=v[1]+oy-(out[1]*ox+out[5]*oy+out[9]*oz),out[14]=v[2]+oz-(out[2]*ox+out[6]*oy+out[10]*oz),out[15]=1,out},mat4.fromQuat=function(out,q){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,yx=y*x2,yy=y*y2,zx=z*x2,zy=z*y2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;return out[0]=1-yy-zz,out[1]=yx+wz,out[2]=zx-wy,out[3]=0,out[4]=yx-wz,out[5]=1-xx-zz,out[6]=zy+wx,out[7]=0,out[8]=zx+wy,out[9]=zy-wx,out[10]=1-xx-yy,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},mat4.frustum=function(out,left,right,bottom,top,near,far){var rl=1/(right-left),tb=1/(top-bottom),nf=1/(near-far);return out[0]=2*near*rl,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=2*near*tb,out[6]=0,out[7]=0,out[8]=(right+left)*rl,out[9]=(top+bottom)*tb,out[10]=(far+near)*nf,out[11]=-1,out[12]=0,out[13]=0,out[14]=far*near*2*nf,out[15]=0,out},mat4.perspective=function(out,fovy,aspect,near,far){var f=1/Math.tan(fovy/2),nf=1/(near-far);return out[0]=f/aspect,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=f,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=(far+near)*nf,out[11]=-1,out[12]=0,out[13]=0,out[14]=2*far*near*nf,out[15]=0,out},mat4.perspectiveFromFieldOfView=function(out,fov,near,far){var upTan=Math.tan(fov.upDegrees*Math.PI/180),downTan=Math.tan(fov.downDegrees*Math.PI/180),leftTan=Math.tan(fov.leftDegrees*Math.PI/180),rightTan=Math.tan(fov.rightDegrees*Math.PI/180),xScale=2/(leftTan+rightTan),yScale=2/(upTan+downTan);return out[0]=xScale,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=yScale,out[6]=0,out[7]=0,out[8]=-((leftTan-rightTan)*xScale*.5),out[9]=(upTan-downTan)*yScale*.5,out[10]=far/(near-far),out[11]=-1,out[12]=0,out[13]=0,out[14]=far*near/(near-far),out[15]=0,out},mat4.ortho=function(out,left,right,bottom,top,near,far){var lr=1/(left-right),bt=1/(bottom-top),nf=1/(near-far);return out[0]=-2*lr,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=-2*bt,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=2*nf,out[11]=0,out[12]=(left+right)*lr,out[13]=(top+bottom)*bt,out[14]=(far+near)*nf,out[15]=1,out},mat4.lookAt=function(out,eye,center,up){var x0,x1,x2,y0,y1,y2,z0,z1,z2,len,eyex=eye[0],eyey=eye[1],eyez=eye[2],upx=up[0],upy=up[1],upz=up[2],centerx=center[0],centery=center[1],centerz=center[2];return Math.abs(eyex-centerx)<glMatrix.EPSILON&&Math.abs(eyey-centery)<glMatrix.EPSILON&&Math.abs(eyez-centerz)<glMatrix.EPSILON?mat4.identity(out):(z0=eyex-centerx,z1=eyey-centery,z2=eyez-centerz,len=1/Math.sqrt(z0*z0+z1*z1+z2*z2),z0*=len,z1*=len,z2*=len,x0=upy*z2-upz*z1,x1=upz*z0-upx*z2,x2=upx*z1-upy*z0,len=Math.sqrt(x0*x0+x1*x1+x2*x2),len?(len=1/len,x0*=len,x1*=len,x2*=len):(x0=0,x1=0,x2=0),y0=z1*x2-z2*x1,y1=z2*x0-z0*x2,y2=z0*x1-z1*x0,len=Math.sqrt(y0*y0+y1*y1+y2*y2),len?(len=1/len,y0*=len,y1*=len,y2*=len):(y0=0,y1=0,y2=0),out[0]=x0,out[1]=y0,out[2]=z0,out[3]=0,out[4]=x1,out[5]=y1,out[6]=z1,out[7]=0,out[8]=x2,out[9]=y2,out[10]=z2,out[11]=0,out[12]=-(x0*eyex+x1*eyey+x2*eyez),out[13]=-(y0*eyex+y1*eyey+y2*eyez),out[14]=-(z0*eyex+z1*eyey+z2*eyez),out[15]=1,out)},mat4.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"},mat4.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))},mat4.add=function(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out[2]=a[2]+b[2],out[3]=a[3]+b[3],out[4]=a[4]+b[4],out[5]=a[5]+b[5],out[6]=a[6]+b[6],out[7]=a[7]+b[7],out[8]=a[8]+b[8],out[9]=a[9]+b[9],out[10]=a[10]+b[10],out[11]=a[11]+b[11],out[12]=a[12]+b[12],out[13]=a[13]+b[13],out[14]=a[14]+b[14],out[15]=a[15]+b[15],out},mat4.subtract=function(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out[3]=a[3]-b[3],out[4]=a[4]-b[4],out[5]=a[5]-b[5],out[6]=a[6]-b[6],out[7]=a[7]-b[7],out[8]=a[8]-b[8],out[9]=a[9]-b[9],out[10]=a[10]-b[10],out[11]=a[11]-b[11],out[12]=a[12]-b[12],out[13]=a[13]-b[13],out[14]=a[14]-b[14],out[15]=a[15]-b[15],out},mat4.sub=mat4.subtract,mat4.multiplyScalar=function(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out[3]=a[3]*b,out[4]=a[4]*b,out[5]=a[5]*b,out[6]=a[6]*b,out[7]=a[7]*b,out[8]=a[8]*b,out[9]=a[9]*b,out[10]=a[10]*b,out[11]=a[11]*b,out[12]=a[12]*b,out[13]=a[13]*b,out[14]=a[14]*b,out[15]=a[15]*b,out},mat4.multiplyScalarAndAdd=function(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out[2]=a[2]+b[2]*scale,out[3]=a[3]+b[3]*scale,out[4]=a[4]+b[4]*scale,out[5]=a[5]+b[5]*scale,out[6]=a[6]+b[6]*scale,out[7]=a[7]+b[7]*scale,out[8]=a[8]+b[8]*scale,out[9]=a[9]+b[9]*scale,out[10]=a[10]+b[10]*scale,out[11]=a[11]+b[11]*scale,out[12]=a[12]+b[12]*scale,out[13]=a[13]+b[13]*scale,out[14]=a[14]+b[14]*scale,out[15]=a[15]+b[15]*scale,out},mat4.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]},mat4.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],a6=a[6],a7=a[7],a8=a[8],a9=a[9],a10=a[10],a11=a[11],a12=a[12],a13=a[13],a14=a[14],a15=a[15],b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=glMatrix.EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=glMatrix.EPSILON*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=glMatrix.EPSILON*Math.max(1,Math.abs(a5),Math.abs(b5))&&Math.abs(a6-b6)<=glMatrix.EPSILON*Math.max(1,Math.abs(a6),Math.abs(b6))&&Math.abs(a7-b7)<=glMatrix.EPSILON*Math.max(1,Math.abs(a7),Math.abs(b7))&&Math.abs(a8-b8)<=glMatrix.EPSILON*Math.max(1,Math.abs(a8),Math.abs(b8))&&Math.abs(a9-b9)<=glMatrix.EPSILON*Math.max(1,Math.abs(a9),Math.abs(b9))&&Math.abs(a10-b10)<=glMatrix.EPSILON*Math.max(1,Math.abs(a10),Math.abs(b10))&&Math.abs(a11-b11)<=glMatrix.EPSILON*Math.max(1,Math.abs(a11),Math.abs(b11))&&Math.abs(a12-b12)<=glMatrix.EPSILON*Math.max(1,Math.abs(a12),Math.abs(b12))&&Math.abs(a13-b13)<=glMatrix.EPSILON*Math.max(1,Math.abs(a13),Math.abs(b13))&&Math.abs(a14-b14)<=glMatrix.EPSILON*Math.max(1,Math.abs(a14),Math.abs(b14))&&Math.abs(a15-b15)<=glMatrix.EPSILON*Math.max(1,Math.abs(a15),Math.abs(b15))},module.exports=mat4},function(module,exports,__webpack_require__){var glMatrix=__webpack_require__(26),mat3=__webpack_require__(29),vec3=__webpack_require__(32),vec4=__webpack_require__(33),quat={};quat.create=function(){var out=new glMatrix.ARRAY_TYPE(4);return out[0]=0,out[1]=0,out[2]=0,out[3]=1,out},quat.rotationTo=function(){var tmpvec3=vec3.create(),xUnitVec3=vec3.fromValues(1,0,0),yUnitVec3=vec3.fromValues(0,1,0);return function(out,a,b){var dot=vec3.dot(a,b);return dot<-.999999?(vec3.cross(tmpvec3,xUnitVec3,a),vec3.length(tmpvec3)<1e-6&&vec3.cross(tmpvec3,yUnitVec3,a),vec3.normalize(tmpvec3,tmpvec3),quat.setAxisAngle(out,tmpvec3,Math.PI),out):dot>.999999?(out[0]=0,out[1]=0,out[2]=0,out[3]=1,out):(vec3.cross(tmpvec3,a,b),out[0]=tmpvec3[0],out[1]=tmpvec3[1],out[2]=tmpvec3[2],out[3]=1+dot,quat.normalize(out,out))}}(),quat.setAxes=function(){var matr=mat3.create();return function(out,view,right,up){return matr[0]=right[0],matr[3]=right[1],matr[6]=right[2],matr[1]=up[0],matr[4]=up[1],matr[7]=up[2],matr[2]=-view[0],matr[5]=-view[1],matr[8]=-view[2],quat.normalize(out,quat.fromMat3(out,matr))}}(),quat.clone=vec4.clone,quat.fromValues=vec4.fromValues,quat.copy=vec4.copy,quat.set=vec4.set,quat.identity=function(out){return out[0]=0,out[1]=0,out[2]=0,out[3]=1,out},quat.setAxisAngle=function(out,axis,rad){rad=.5*rad;var s=Math.sin(rad);return out[0]=s*axis[0],out[1]=s*axis[1],out[2]=s*axis[2],out[3]=Math.cos(rad),out},quat.getAxisAngle=function(out_axis,q){var rad=2*Math.acos(q[3]),s=Math.sin(rad/2);return 0!=s?(out_axis[0]=q[0]/s,out_axis[1]=q[1]/s,out_axis[2]=q[2]/s):(out_axis[0]=1,out_axis[1]=0,out_axis[2]=0),rad},quat.add=vec4.add,quat.multiply=function(out,a,b){var ax=a[0],ay=a[1],az=a[2],aw=a[3],bx=b[0],by=b[1],bz=b[2],bw=b[3];return out[0]=ax*bw+aw*bx+ay*bz-az*by,out[1]=ay*bw+aw*by+az*bx-ax*bz,out[2]=az*bw+aw*bz+ax*by-ay*bx,out[3]=aw*bw-ax*bx-ay*by-az*bz,out},quat.mul=quat.multiply,quat.scale=vec4.scale,quat.rotateX=function(out,a,rad){rad*=.5;var ax=a[0],ay=a[1],az=a[2],aw=a[3],bx=Math.sin(rad),bw=Math.cos(rad);return out[0]=ax*bw+aw*bx,out[1]=ay*bw+az*bx,out[2]=az*bw-ay*bx,out[3]=aw*bw-ax*bx,out},quat.rotateY=function(out,a,rad){rad*=.5;var ax=a[0],ay=a[1],az=a[2],aw=a[3],by=Math.sin(rad),bw=Math.cos(rad);return out[0]=ax*bw-az*by,out[1]=ay*bw+aw*by,out[2]=az*bw+ax*by,out[3]=aw*bw-ay*by,out},quat.rotateZ=function(out,a,rad){rad*=.5;var ax=a[0],ay=a[1],az=a[2],aw=a[3],bz=Math.sin(rad),bw=Math.cos(rad);return out[0]=ax*bw+ay*bz,out[1]=ay*bw-ax*bz,out[2]=az*bw+aw*bz,out[3]=aw*bw-az*bz,out},quat.calculateW=function(out,a){var x=a[0],y=a[1],z=a[2];return out[0]=x,out[1]=y,out[2]=z,out[3]=Math.sqrt(Math.abs(1-x*x-y*y-z*z)),out},quat.dot=vec4.dot,quat.lerp=vec4.lerp,quat.slerp=function(out,a,b,t){var omega,cosom,sinom,scale0,scale1,ax=a[0],ay=a[1],az=a[2],aw=a[3],bx=b[0],by=b[1],bz=b[2],bw=b[3];return cosom=ax*bx+ay*by+az*bz+aw*bw,cosom<0&&(cosom=-cosom,bx=-bx,by=-by,bz=-bz,bw=-bw),1-cosom>1e-6?(omega=Math.acos(cosom),sinom=Math.sin(omega),scale0=Math.sin((1-t)*omega)/sinom,scale1=Math.sin(t*omega)/sinom):(scale0=1-t,scale1=t),out[0]=scale0*ax+scale1*bx,out[1]=scale0*ay+scale1*by,out[2]=scale0*az+scale1*bz,out[3]=scale0*aw+scale1*bw,out},quat.sqlerp=function(){var temp1=quat.create(),temp2=quat.create();return function(out,a,b,c,d,t){return quat.slerp(temp1,a,d,t),quat.slerp(temp2,b,c,t),quat.slerp(out,temp1,temp2,2*t*(1-t)),out}}(),quat.invert=function(out,a){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],dot=a0*a0+a1*a1+a2*a2+a3*a3,invDot=dot?1/dot:0;return out[0]=-a0*invDot,out[1]=-a1*invDot,out[2]=-a2*invDot,out[3]=a3*invDot,out},quat.conjugate=function(out,a){return out[0]=-a[0],out[1]=-a[1],out[2]=-a[2],out[3]=a[3],out},quat.length=vec4.length,quat.len=quat.length,quat.squaredLength=vec4.squaredLength,quat.sqrLen=quat.squaredLength,quat.normalize=vec4.normalize,quat.fromMat3=function(out,m){var fRoot,fTrace=m[0]+m[4]+m[8];if(fTrace>0)fRoot=Math.sqrt(fTrace+1),out[3]=.5*fRoot,fRoot=.5/fRoot,out[0]=(m[5]-m[7])*fRoot,out[1]=(m[6]-m[2])*fRoot,out[2]=(m[1]-m[3])*fRoot;else{var i=0;m[4]>m[0]&&(i=1),m[8]>m[3*i+i]&&(i=2);var j=(i+1)%3,k=(i+2)%3;fRoot=Math.sqrt(m[3*i+i]-m[3*j+j]-m[3*k+k]+1),out[i]=.5*fRoot,fRoot=.5/fRoot,out[3]=(m[3*j+k]-m[3*k+j])*fRoot,out[j]=(m[3*j+i]+m[3*i+j])*fRoot,out[k]=(m[3*k+i]+m[3*i+k])*fRoot}return out},quat.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},quat.exactEquals=vec4.exactEquals,quat.equals=vec4.equals,module.exports=quat},function(module,exports,__webpack_require__){var glMatrix=__webpack_require__(26),vec3={};vec3.create=function(){var out=new glMatrix.ARRAY_TYPE(3);return out[0]=0,out[1]=0,out[2]=0,out},vec3.clone=function(a){var out=new glMatrix.ARRAY_TYPE(3);return out[0]=a[0],out[1]=a[1],out[2]=a[2],out},vec3.fromValues=function(x,y,z){var out=new glMatrix.ARRAY_TYPE(3);return out[0]=x,out[1]=y,out[2]=z,out},vec3.copy=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out},vec3.set=function(out,x,y,z){return out[0]=x,out[1]=y,out[2]=z,out},vec3.add=function(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out[2]=a[2]+b[2],out},vec3.subtract=function(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out},vec3.sub=vec3.subtract,vec3.multiply=function(out,a,b){return out[0]=a[0]*b[0],out[1]=a[1]*b[1],out[2]=a[2]*b[2],out},vec3.mul=vec3.multiply,vec3.divide=function(out,a,b){return out[0]=a[0]/b[0],out[1]=a[1]/b[1],out[2]=a[2]/b[2],out},vec3.div=vec3.divide,vec3.ceil=function(out,a){return out[0]=Math.ceil(a[0]),out[1]=Math.ceil(a[1]),out[2]=Math.ceil(a[2]),out},vec3.floor=function(out,a){return out[0]=Math.floor(a[0]),out[1]=Math.floor(a[1]),out[2]=Math.floor(a[2]),out},vec3.min=function(out,a,b){return out[0]=Math.min(a[0],b[0]),out[1]=Math.min(a[1],b[1]),out[2]=Math.min(a[2],b[2]),out},vec3.max=function(out,a,b){return out[0]=Math.max(a[0],b[0]),out[1]=Math.max(a[1],b[1]),out[2]=Math.max(a[2],b[2]),out},vec3.round=function(out,a){return out[0]=Math.round(a[0]),out[1]=Math.round(a[1]),out[2]=Math.round(a[2]),out},vec3.scale=function(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out},vec3.scaleAndAdd=function(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out[2]=a[2]+b[2]*scale,out},vec3.distance=function(a,b){var x=b[0]-a[0],y=b[1]-a[1],z=b[2]-a[2];return Math.sqrt(x*x+y*y+z*z)},vec3.dist=vec3.distance,vec3.squaredDistance=function(a,b){var x=b[0]-a[0],y=b[1]-a[1],z=b[2]-a[2];return x*x+y*y+z*z},vec3.sqrDist=vec3.squaredDistance,vec3.length=function(a){var x=a[0],y=a[1],z=a[2];return Math.sqrt(x*x+y*y+z*z)},vec3.len=vec3.length,vec3.squaredLength=function(a){var x=a[0],y=a[1],z=a[2];return x*x+y*y+z*z},vec3.sqrLen=vec3.squaredLength,vec3.negate=function(out,a){return out[0]=-a[0],out[1]=-a[1],out[2]=-a[2],out},vec3.inverse=function(out,a){return out[0]=1/a[0],out[1]=1/a[1],out[2]=1/a[2],out},vec3.normalize=function(out,a){var x=a[0],y=a[1],z=a[2],len=x*x+y*y+z*z;return len>0&&(len=1/Math.sqrt(len),out[0]=a[0]*len,out[1]=a[1]*len,out[2]=a[2]*len),out},vec3.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},vec3.cross=function(out,a,b){var ax=a[0],ay=a[1],az=a[2],bx=b[0],by=b[1],bz=b[2];return out[0]=ay*bz-az*by,out[1]=az*bx-ax*bz,out[2]=ax*by-ay*bx,out},vec3.lerp=function(out,a,b,t){var ax=a[0],ay=a[1],az=a[2];return out[0]=ax+t*(b[0]-ax),out[1]=ay+t*(b[1]-ay),out[2]=az+t*(b[2]-az),out},vec3.hermite=function(out,a,b,c,d,t){var factorTimes2=t*t,factor1=factorTimes2*(2*t-3)+1,factor2=factorTimes2*(t-2)+t,factor3=factorTimes2*(t-1),factor4=factorTimes2*(3-2*t);return out[0]=a[0]*factor1+b[0]*factor2+c[0]*factor3+d[0]*factor4,out[1]=a[1]*factor1+b[1]*factor2+c[1]*factor3+d[1]*factor4,out[2]=a[2]*factor1+b[2]*factor2+c[2]*factor3+d[2]*factor4,out},vec3.bezier=function(out,a,b,c,d,t){var inverseFactor=1-t,inverseFactorTimesTwo=inverseFactor*inverseFactor,factorTimes2=t*t,factor1=inverseFactorTimesTwo*inverseFactor,factor2=3*t*inverseFactorTimesTwo,factor3=3*factorTimes2*inverseFactor,factor4=factorTimes2*t;return out[0]=a[0]*factor1+b[0]*factor2+c[0]*factor3+d[0]*factor4,out[1]=a[1]*factor1+b[1]*factor2+c[1]*factor3+d[1]*factor4,out[2]=a[2]*factor1+b[2]*factor2+c[2]*factor3+d[2]*factor4,out},vec3.random=function(out,scale){scale=scale||1;var r=2*glMatrix.RANDOM()*Math.PI,z=2*glMatrix.RANDOM()-1,zScale=Math.sqrt(1-z*z)*scale;return out[0]=Math.cos(r)*zScale,out[1]=Math.sin(r)*zScale,out[2]=z*scale,out},vec3.transformMat4=function(out,a,m){var x=a[0],y=a[1],z=a[2],w=m[3]*x+m[7]*y+m[11]*z+m[15];return w=w||1,out[0]=(m[0]*x+m[4]*y+m[8]*z+m[12])/w,out[1]=(m[1]*x+m[5]*y+m[9]*z+m[13])/w,out[2]=(m[2]*x+m[6]*y+m[10]*z+m[14])/w,out},vec3.transformMat3=function(out,a,m){var x=a[0],y=a[1],z=a[2];return out[0]=x*m[0]+y*m[3]+z*m[6],out[1]=x*m[1]+y*m[4]+z*m[7],out[2]=x*m[2]+y*m[5]+z*m[8],out},vec3.transformQuat=function(out,a,q){var x=a[0],y=a[1],z=a[2],qx=q[0],qy=q[1],qz=q[2],qw=q[3],ix=qw*x+qy*z-qz*y,iy=qw*y+qz*x-qx*z,iz=qw*z+qx*y-qy*x,iw=-qx*x-qy*y-qz*z;return out[0]=ix*qw+iw*-qx+iy*-qz-iz*-qy,out[1]=iy*qw+iw*-qy+iz*-qx-ix*-qz,out[2]=iz*qw+iw*-qz+ix*-qy-iy*-qx,out},vec3.rotateX=function(out,a,b,c){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[0],r[1]=p[1]*Math.cos(c)-p[2]*Math.sin(c),r[2]=p[1]*Math.sin(c)+p[2]*Math.cos(c),out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out},vec3.rotateY=function(out,a,b,c){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[2]*Math.sin(c)+p[0]*Math.cos(c),r[1]=p[1],r[2]=p[2]*Math.cos(c)-p[0]*Math.sin(c),out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out},vec3.rotateZ=function(out,a,b,c){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[0]*Math.cos(c)-p[1]*Math.sin(c),r[1]=p[0]*Math.sin(c)+p[1]*Math.cos(c),r[2]=p[2],out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out},vec3.forEach=function(){var vec=vec3.create();return function(a,stride,offset,count,fn,arg){var i,l;for(stride||(stride=3),offset||(offset=0),l=count?Math.min(count*stride+offset,a.length):a.length,i=offset;i<l;i+=stride)vec[0]=a[i],vec[1]=a[i+1],vec[2]=a[i+2],fn(vec,vec,arg),a[i]=vec[0],a[i+1]=vec[1],a[i+2]=vec[2];return a}}(),vec3.angle=function(a,b){var tempA=vec3.fromValues(a[0],a[1],a[2]),tempB=vec3.fromValues(b[0],b[1],b[2]);vec3.normalize(tempA,tempA),vec3.normalize(tempB,tempB);var cosine=vec3.dot(tempA,tempB);return cosine>1?0:Math.acos(cosine)},vec3.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"},vec3.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]},vec3.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],b0=b[0],b1=b[1],b2=b[2];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))},module.exports=vec3},function(module,exports,__webpack_require__){var glMatrix=__webpack_require__(26),vec4={};vec4.create=function(){var out=new glMatrix.ARRAY_TYPE(4);return out[0]=0,out[1]=0,out[2]=0,out[3]=0,out},vec4.clone=function(a){var out=new glMatrix.ARRAY_TYPE(4);return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out},vec4.fromValues=function(x,y,z,w){var out=new glMatrix.ARRAY_TYPE(4);return out[0]=x,out[1]=y,out[2]=z,out[3]=w,out},vec4.copy=function(out,a){return out[0]=a[0],out[1]=a[1],
out[2]=a[2],out[3]=a[3],out},vec4.set=function(out,x,y,z,w){return out[0]=x,out[1]=y,out[2]=z,out[3]=w,out},vec4.add=function(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out[2]=a[2]+b[2],out[3]=a[3]+b[3],out},vec4.subtract=function(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out[3]=a[3]-b[3],out},vec4.sub=vec4.subtract,vec4.multiply=function(out,a,b){return out[0]=a[0]*b[0],out[1]=a[1]*b[1],out[2]=a[2]*b[2],out[3]=a[3]*b[3],out},vec4.mul=vec4.multiply,vec4.divide=function(out,a,b){return out[0]=a[0]/b[0],out[1]=a[1]/b[1],out[2]=a[2]/b[2],out[3]=a[3]/b[3],out},vec4.div=vec4.divide,vec4.ceil=function(out,a){return out[0]=Math.ceil(a[0]),out[1]=Math.ceil(a[1]),out[2]=Math.ceil(a[2]),out[3]=Math.ceil(a[3]),out},vec4.floor=function(out,a){return out[0]=Math.floor(a[0]),out[1]=Math.floor(a[1]),out[2]=Math.floor(a[2]),out[3]=Math.floor(a[3]),out},vec4.min=function(out,a,b){return out[0]=Math.min(a[0],b[0]),out[1]=Math.min(a[1],b[1]),out[2]=Math.min(a[2],b[2]),out[3]=Math.min(a[3],b[3]),out},vec4.max=function(out,a,b){return out[0]=Math.max(a[0],b[0]),out[1]=Math.max(a[1],b[1]),out[2]=Math.max(a[2],b[2]),out[3]=Math.max(a[3],b[3]),out},vec4.round=function(out,a){return out[0]=Math.round(a[0]),out[1]=Math.round(a[1]),out[2]=Math.round(a[2]),out[3]=Math.round(a[3]),out},vec4.scale=function(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out[3]=a[3]*b,out},vec4.scaleAndAdd=function(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out[2]=a[2]+b[2]*scale,out[3]=a[3]+b[3]*scale,out},vec4.distance=function(a,b){var x=b[0]-a[0],y=b[1]-a[1],z=b[2]-a[2],w=b[3]-a[3];return Math.sqrt(x*x+y*y+z*z+w*w)},vec4.dist=vec4.distance,vec4.squaredDistance=function(a,b){var x=b[0]-a[0],y=b[1]-a[1],z=b[2]-a[2],w=b[3]-a[3];return x*x+y*y+z*z+w*w},vec4.sqrDist=vec4.squaredDistance,vec4.length=function(a){var x=a[0],y=a[1],z=a[2],w=a[3];return Math.sqrt(x*x+y*y+z*z+w*w)},vec4.len=vec4.length,vec4.squaredLength=function(a){var x=a[0],y=a[1],z=a[2],w=a[3];return x*x+y*y+z*z+w*w},vec4.sqrLen=vec4.squaredLength,vec4.negate=function(out,a){return out[0]=-a[0],out[1]=-a[1],out[2]=-a[2],out[3]=-a[3],out},vec4.inverse=function(out,a){return out[0]=1/a[0],out[1]=1/a[1],out[2]=1/a[2],out[3]=1/a[3],out},vec4.normalize=function(out,a){var x=a[0],y=a[1],z=a[2],w=a[3],len=x*x+y*y+z*z+w*w;return len>0&&(len=1/Math.sqrt(len),out[0]=x*len,out[1]=y*len,out[2]=z*len,out[3]=w*len),out},vec4.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},vec4.lerp=function(out,a,b,t){var ax=a[0],ay=a[1],az=a[2],aw=a[3];return out[0]=ax+t*(b[0]-ax),out[1]=ay+t*(b[1]-ay),out[2]=az+t*(b[2]-az),out[3]=aw+t*(b[3]-aw),out},vec4.random=function(out,scale){return scale=scale||1,out[0]=glMatrix.RANDOM(),out[1]=glMatrix.RANDOM(),out[2]=glMatrix.RANDOM(),out[3]=glMatrix.RANDOM(),vec4.normalize(out,out),vec4.scale(out,out,scale),out},vec4.transformMat4=function(out,a,m){var x=a[0],y=a[1],z=a[2],w=a[3];return out[0]=m[0]*x+m[4]*y+m[8]*z+m[12]*w,out[1]=m[1]*x+m[5]*y+m[9]*z+m[13]*w,out[2]=m[2]*x+m[6]*y+m[10]*z+m[14]*w,out[3]=m[3]*x+m[7]*y+m[11]*z+m[15]*w,out},vec4.transformQuat=function(out,a,q){var x=a[0],y=a[1],z=a[2],qx=q[0],qy=q[1],qz=q[2],qw=q[3],ix=qw*x+qy*z-qz*y,iy=qw*y+qz*x-qx*z,iz=qw*z+qx*y-qy*x,iw=-qx*x-qy*y-qz*z;return out[0]=ix*qw+iw*-qx+iy*-qz-iz*-qy,out[1]=iy*qw+iw*-qy+iz*-qx-ix*-qz,out[2]=iz*qw+iw*-qz+ix*-qy-iy*-qx,out[3]=a[3],out},vec4.forEach=function(){var vec=vec4.create();return function(a,stride,offset,count,fn,arg){var i,l;for(stride||(stride=4),offset||(offset=0),l=count?Math.min(count*stride+offset,a.length):a.length,i=offset;i<l;i+=stride)vec[0]=a[i],vec[1]=a[i+1],vec[2]=a[i+2],vec[3]=a[i+3],fn(vec,vec,arg),a[i]=vec[0],a[i+1]=vec[1],a[i+2]=vec[2],a[i+3]=vec[3];return a}}(),vec4.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},vec4.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]},vec4.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],b0=b[0],b1=b[1],b2=b[2],b3=b[3];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=glMatrix.EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))},module.exports=vec4},function(module,exports,__webpack_require__){var glMatrix=__webpack_require__(26),vec2={};vec2.create=function(){var out=new glMatrix.ARRAY_TYPE(2);return out[0]=0,out[1]=0,out},vec2.clone=function(a){var out=new glMatrix.ARRAY_TYPE(2);return out[0]=a[0],out[1]=a[1],out},vec2.fromValues=function(x,y){var out=new glMatrix.ARRAY_TYPE(2);return out[0]=x,out[1]=y,out},vec2.copy=function(out,a){return out[0]=a[0],out[1]=a[1],out},vec2.set=function(out,x,y){return out[0]=x,out[1]=y,out},vec2.add=function(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out},vec2.subtract=function(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out},vec2.sub=vec2.subtract,vec2.multiply=function(out,a,b){return out[0]=a[0]*b[0],out[1]=a[1]*b[1],out},vec2.mul=vec2.multiply,vec2.divide=function(out,a,b){return out[0]=a[0]/b[0],out[1]=a[1]/b[1],out},vec2.div=vec2.divide,vec2.ceil=function(out,a){return out[0]=Math.ceil(a[0]),out[1]=Math.ceil(a[1]),out},vec2.floor=function(out,a){return out[0]=Math.floor(a[0]),out[1]=Math.floor(a[1]),out},vec2.min=function(out,a,b){return out[0]=Math.min(a[0],b[0]),out[1]=Math.min(a[1],b[1]),out},vec2.max=function(out,a,b){return out[0]=Math.max(a[0],b[0]),out[1]=Math.max(a[1],b[1]),out},vec2.round=function(out,a){return out[0]=Math.round(a[0]),out[1]=Math.round(a[1]),out},vec2.scale=function(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out},vec2.scaleAndAdd=function(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out},vec2.distance=function(a,b){var x=b[0]-a[0],y=b[1]-a[1];return Math.sqrt(x*x+y*y)},vec2.dist=vec2.distance,vec2.squaredDistance=function(a,b){var x=b[0]-a[0],y=b[1]-a[1];return x*x+y*y},vec2.sqrDist=vec2.squaredDistance,vec2.length=function(a){var x=a[0],y=a[1];return Math.sqrt(x*x+y*y)},vec2.len=vec2.length,vec2.squaredLength=function(a){var x=a[0],y=a[1];return x*x+y*y},vec2.sqrLen=vec2.squaredLength,vec2.negate=function(out,a){return out[0]=-a[0],out[1]=-a[1],out},vec2.inverse=function(out,a){return out[0]=1/a[0],out[1]=1/a[1],out},vec2.normalize=function(out,a){var x=a[0],y=a[1],len=x*x+y*y;return len>0&&(len=1/Math.sqrt(len),out[0]=a[0]*len,out[1]=a[1]*len),out},vec2.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]},vec2.cross=function(out,a,b){var z=a[0]*b[1]-a[1]*b[0];return out[0]=out[1]=0,out[2]=z,out},vec2.lerp=function(out,a,b,t){var ax=a[0],ay=a[1];return out[0]=ax+t*(b[0]-ax),out[1]=ay+t*(b[1]-ay),out},vec2.random=function(out,scale){scale=scale||1;var r=2*glMatrix.RANDOM()*Math.PI;return out[0]=Math.cos(r)*scale,out[1]=Math.sin(r)*scale,out},vec2.transformMat2=function(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[2]*y,out[1]=m[1]*x+m[3]*y,out},vec2.transformMat2d=function(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[2]*y+m[4],out[1]=m[1]*x+m[3]*y+m[5],out},vec2.transformMat3=function(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[3]*y+m[6],out[1]=m[1]*x+m[4]*y+m[7],out},vec2.transformMat4=function(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[4]*y+m[12],out[1]=m[1]*x+m[5]*y+m[13],out},vec2.forEach=function(){var vec=vec2.create();return function(a,stride,offset,count,fn,arg){var i,l;for(stride||(stride=2),offset||(offset=0),l=count?Math.min(count*stride+offset,a.length):a.length,i=offset;i<l;i+=stride)vec[0]=a[i],vec[1]=a[i+1],fn(vec,vec,arg),a[i]=vec[0],a[i+1]=vec[1];return a}}(),vec2.str=function(a){return"vec2("+a[0]+", "+a[1]+")"},vec2.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]},vec2.equals=function(a,b){var a0=a[0],a1=a[1],b0=b[0],b1=b[1];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))},module.exports=vec2},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function isSame(array1,array2){if(array1.length!==array2.length)return!1;for(var i=0;i<array1.length;i++)if(array1[i]!==array2[i])return!1;return!0}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),_mcgl=__webpack_require__(36),gl=(_interopRequireDefault(_mcgl),void 0),uniformMapping={"float":"uniform1f",vec2:"uniform2fv",vec3:"uniform3fv",vec4:"uniform4fv","int":"uniform1i",mat3:"uniformMatrix3fv",mat4:"uniformMatrix4fv"},GLShader=function(){function GLShader(vertexShader,fragmentShader){(0,_classCallCheck3["default"])(this,GLShader),gl=_mcgl.GL.gl,this.parameters=[],this.uniformTextures=[];var vsShader=this._createShaderProgram(vertexShader,!0),fsShader=this._createShaderProgram(fragmentShader,!1);this._attachShaderProgram(vsShader,fsShader)}return(0,_createClass3["default"])(GLShader,[{key:"bind",value:function(){_mcgl.GL.shader!==this&&(gl.useProgram(this.shaderProgram),_mcgl.GL.useShader(this),this.uniformTextures=[])}},{key:"uniform",value:function(mName,mType,mValue){function cloneArray(mArray){return mArray.slice?mArray.slice(0):new Float32Array(mArray)}if(void 0!==mValue&&null!==mValue){for(var uniformType=uniformMapping[mType]||mType,isNumber="uniform1i"===uniformType||"uniform1f"===uniformType,hasUniform=!1,oUniform=void 0,parameterIndex=-1,i=0;i<this.parameters.length;i++)if(oUniform=this.parameters[i],oUniform.name===mName){hasUniform=!0,parameterIndex=i;break}if(hasUniform?this.shaderProgram[mName]=oUniform.uniformLoc:(this.shaderProgram[mName]=gl.getUniformLocation(this.shaderProgram,mName),isNumber?this.parameters.push({name:mName,type:uniformType,value:mValue,uniformLoc:this.shaderProgram[mName]}):this.parameters.push({name:mName,type:uniformType,value:cloneArray(mValue),uniformLoc:this.shaderProgram[mName]}),parameterIndex=this.parameters.length-1),this.parameters[parameterIndex].uniformLoc)if(uniformType.indexOf("Matrix")===-1)if(isNumber){var needUpdate=this.parameters[parameterIndex].value!==mValue||!hasUniform;needUpdate&&(gl[uniformType](this.shaderProgram[mName],mValue),this.parameters[parameterIndex].value=mValue)}else isSame(this.parameters[parameterIndex].value,mValue)&&hasUniform||(gl[uniformType](this.shaderProgram[mName],mValue),this.parameters[parameterIndex].value=cloneArray(mValue));else isSame(this.parameters[parameterIndex].value,mValue)&&hasUniform||(gl[uniformType](this.shaderProgram[mName],!1,mValue),this.parameters[parameterIndex].value=cloneArray(mValue))}}},{key:"createProgram",value:function(gl,shaders,opt_attribs,opt_locations,opt_errorCallback){var errFn=function(msg){},program=gl.createProgram();shaders.forEach(function(shader){gl.attachShader(program,shader)}),opt_attribs&&opt_attribs.forEach(function(attrib,ndx){gl.bindAttribLocation(program,opt_locations?opt_locations[ndx]:ndx,attrib)}),gl.linkProgram(program);var linked=gl.getProgramParameter(program,gl.LINK_STATUS);if(!linked){var lastError=gl.getProgramInfoLog(program);return errFn("Error in program linking:"+lastError),gl.deleteProgram(program),null}return program}},{key:"createProgramFromScripts",value:function(gl,shadersSources,opt_attribs,opt_locations,opt_errorCallback){var shaders=[this.vsShader,this.fsShader];this.shaderProgram=this.createProgram(gl,shaders,opt_attribs,opt_locations,opt_errorCallback)}},{key:"_createShaderProgram",value:function(mShaderStr,isVertexShader){var shaderType=isVertexShader?gl.VERTEX_SHADER:gl.FRAGMENT_SHADER,shader=gl.createShader(shaderType);return gl.shaderSource(shader,mShaderStr),gl.compileShader(shader),gl.getShaderParameter(shader,gl.COMPILE_STATUS)?shader:null}},{key:"_createShaderProgram",value:function(mShaderStr,isVertexShader){var shaderType=isVertexShader?_mcgl.GL.gl.VERTEX_SHADER:_mcgl.GL.gl.FRAGMENT_SHADER,shader=gl.createShader(shaderType);return gl.shaderSource(shader,mShaderStr),gl.compileShader(shader),gl.getShaderParameter(shader,gl.COMPILE_STATUS)?shader:null}},{key:"_attachShaderProgram",value:function(mVertexShader,mFragmentShader){this.shaderProgram=gl.createProgram(),this.shaderProgram.id=10*Math.random(),gl.attachShader(this.shaderProgram,mVertexShader),gl.attachShader(this.shaderProgram,mFragmentShader),gl.linkProgram(this.shaderProgram)}}]),GLShader}();exports["default"]=GLShader,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_GLTool=__webpack_require__(4),_GLTool2=_interopRequireDefault(_GLTool),_GLShader=__webpack_require__(35),_GLShader2=_interopRequireDefault(_GLShader),_Texture=__webpack_require__(37),_Texture2=_interopRequireDefault(_Texture),_indexCamera=__webpack_require__(38),_indexCamera2=_interopRequireDefault(_indexCamera),_OrbitalControl=__webpack_require__(107),_OrbitalControl2=_interopRequireDefault(_OrbitalControl),_CameraControl=__webpack_require__(108),_CameraControl2=_interopRequireDefault(_CameraControl),_indexGeom=__webpack_require__(109),_indexGeom2=_interopRequireDefault(_indexGeom),_Controller=__webpack_require__(120),_Controller2=_interopRequireDefault(_Controller),_Easings=__webpack_require__(123),_Easings2=_interopRequireDefault(_Easings),_FrameBuffer=__webpack_require__(124),_FrameBuffer2=_interopRequireDefault(_FrameBuffer),_Mesh=__webpack_require__(111),_Mesh2=_interopRequireDefault(_Mesh),_BatchCopy=__webpack_require__(125),_BatchCopy2=_interopRequireDefault(_BatchCopy),Mcgl=function Mcgl(){(0,_classCallCheck3["default"])(this,Mcgl),this.GL=_GLTool2["default"],this.GLTool=_GLTool2["default"],this.GLShader=_GLShader2["default"],this.camera=_indexCamera2["default"],this.orbitalControl=new _OrbitalControl2["default"],this.CameraControl=_CameraControl2["default"],this.geom=_indexGeom2["default"],this.Mesh=_Mesh2["default"],this.Texture=_Texture2["default"],this.Controller=_Controller2["default"],this.Easings=_Easings2["default"],this.FBO=_FrameBuffer2["default"],this.BatchCopy=_BatchCopy2["default"]};exports["default"]=new Mcgl,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),_mcgl=__webpack_require__(36),_mcgl2=_interopRequireDefault(_mcgl),gl=void 0,Texture=function(){function Texture(src,isTexture){var _this=this;(0,_classCallCheck3["default"])(this,Texture),gl=_mcgl2["default"].GL.gl,isTexture?this.texture=src:!function(){_this.texture=gl.createTexture(),gl.bindTexture(gl.TEXTURE_2D,_this.texture),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,1,1,0,gl.RGBA,gl.UNSIGNED_BYTE,new Uint8Array([0,0,255,255]));var image=new Image;image.src=src,image.addEventListener("load",function(){gl.bindTexture(gl.TEXTURE_2D,_this.texture),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,image),_this.isPowerOf2(image.width)&&_this.isPowerOf2(image.height)?gl.generateMipmap(gl.TEXTURE_2D):(gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST))})}()}return(0,_createClass3["default"])(Texture,[{key:"isPowerOf2",value:function(value){return 0==(value&value-1)}},{key:"bind",value:function(){var index=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;gl.activeTexture(gl.TEXTURE0+index),gl.bindTexture(gl.TEXTURE_2D,this.texture)}}]),Texture}();exports["default"]=Texture,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _Camera=__webpack_require__(39),_Camera2=_interopRequireDefault(_Camera),_CameraPOV=__webpack_require__(40),_CameraPOV2=_interopRequireDefault(_CameraPOV),shapes={Camera:_Camera2["default"],CameraPOV:_CameraPOV2["default"]};exports["default"]=shapes,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),_Matrices=__webpack_require__(24),_glMatrix=(_interopRequireDefault(_Matrices),__webpack_require__(25)),_glMatrix2=_interopRequireDefault(_glMatrix),Camera=function(){function Camera(){(0,_classCallCheck3["default"])(this,Camera),this.aspectRatio=_glMatrix2["default"].mat4.create(),this.matrix=_glMatrix2["default"].mat4.create(),this.inverseViewMatrix=_glMatrix2["default"].mat4.create(),this.projection=_glMatrix2["default"].mat4.create(),this.orientation=_glMatrix2["default"].mat4.create(),this.mRX=_glMatrix2["default"].mat4.create(),this.mRY=_glMatrix2["default"].mat4.create(),this.mRZ=_glMatrix2["default"].mat4.create(),this.mT=_glMatrix2["default"].mat4.create(),this.position=_glMatrix2["default"].vec3.create()}return(0,_createClass3["default"])(Camera,[{key:"lookAt",value:function(target){var up=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,1,0];_glMatrix2["default"].mat4.lookAt(this.matrix,this.position,target,up)}},{key:"rotateY",value:function(angle){_glMatrix2["default"].mat4.identity(this.mRY),_glMatrix2["default"].mat4.fromYRotation(this.mRY,angle)}},{key:"rotateX",value:function(angle){_glMatrix2["default"].mat4.identity(this.mRX),_glMatrix2["default"].mat4.fromXRotation(this.mRX,angle)}},{key:"rotateZ",value:function(angle){_glMatrix2["default"].mat4.identity(this.mRZ),_glMatrix2["default"].mat4.fromXRotation(this.mRZ,angle)}},{key:"setRotation",value:function(x,y,z){}},{key:"setPosition",value:function(x,y,z){this.position=[x,y,z],_glMatrix2["default"].mat4.identity(this.mT,this.mT),_glMatrix2["default"].mat4.translate(this.mT,this.mT,[x,y,z])}},{key:"setAspectRatio",value:function(aspectRatio){this.aspectRatio=aspectRatio,this.perspective(this.fov,aspectRatio,this.near,this.far)}},{key:"perspective",value:function(fov,aspect,near,far){_glMatrix2["default"].mat4.identity(this.matrix),_glMatrix2["default"].mat4.perspective(this.projection,fov,aspect,near,far),this.fov=fov,this.near=near,this.far=far,this.aspect=aspect}},{key:"orthographic",value:function(left,right,bottom,top,near,far,dst){return dst=dst||new Float32Array(16),dst[0]=2/(right-left),dst[1]=0,dst[2]=0,dst[3]=0,dst[4]=0,dst[5]=2/(top-bottom),dst[6]=0,dst[7]=0,dst[8]=0,dst[9]=0,dst[10]=2/(near-far),dst[11]=0,dst[12]=(left+right)/(left-right),dst[13]=(bottom+top)/(bottom-top),dst[14]=(near+far)/(near-far),dst[15]=1,dst}}]),Camera}();exports["default"]=Camera,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _getPrototypeOf=__webpack_require__(41),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(52),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(99),_inherits3=_interopRequireDefault(_inherits2),_Camera2=__webpack_require__(39),_Camera3=_interopRequireDefault(_Camera2),_glMatrix=__webpack_require__(25),_glMatrix2=_interopRequireDefault(_glMatrix),CameraPOV=function(_Camera){function CameraPOV(){return(0,_classCallCheck3["default"])(this,CameraPOV),(0,_possibleConstructorReturn3["default"])(this,(CameraPOV.__proto__||(0,_getPrototypeOf2["default"])(CameraPOV)).call(this))}return(0,_inherits3["default"])(CameraPOV,_Camera),(0,_createClass3["default"])(CameraPOV,[{key:"perspective",value:function(fov,aspect,near,far){_glMatrix2["default"].mat4.identity(this.matrix),_glMatrix2["default"].mat4.multiply(this.matrix,this.matrix,this.mRX),_glMatrix2["default"].mat4.multiply(this.matrix,this.matrix,this.mRY),_glMatrix2["default"].mat4.multiply(this.matrix,this.matrix,this.mRZ),_glMatrix2["default"].mat4.multiply(this.matrix,this.matrix,this.mT),_glMatrix2["default"].mat4.perspective(this.projection,fov,aspect,near,far),this.fov=fov,this.near=near,this.far=far,this.aspect=aspect}}]),CameraPOV}(_Camera3["default"]);exports["default"]=CameraPOV,module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(42),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(43),module.exports=__webpack_require__(11).Object.getPrototypeOf},function(module,exports,__webpack_require__){var toObject=__webpack_require__(44),$getPrototypeOf=__webpack_require__(46);__webpack_require__(51)("getPrototypeOf",function(){return function(it){return $getPrototypeOf(toObject(it))}})},function(module,exports,__webpack_require__){var defined=__webpack_require__(45);module.exports=function(it){return Object(defined(it))}},function(module,exports){module.exports=function(it){if(void 0==it)throw TypeError("Can't call method on  "+it);return it}},function(module,exports,__webpack_require__){var has=__webpack_require__(47),toObject=__webpack_require__(44),IE_PROTO=__webpack_require__(48)("IE_PROTO"),ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){return O=toObject(O),has(O,IE_PROTO)?O[IE_PROTO]:"function"==typeof O.constructor&&O instanceof O.constructor?O.constructor.prototype:O instanceof Object?ObjectProto:null}},function(module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},function(module,exports,__webpack_require__){var shared=__webpack_require__(49)("keys"),uid=__webpack_require__(50);module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},function(module,exports,__webpack_require__){var global=__webpack_require__(10),SHARED="__core-js_shared__",store=global[SHARED]||(global[SHARED]={});module.exports=function(key){return store[key]||(store[key]={})}},function(module,exports){var id=0,px=Math.random();module.exports=function(key){return"Symbol(".concat(void 0===key?"":key,")_",(++id+px).toString(36))}},function(module,exports,__webpack_require__){var $export=__webpack_require__(9),core=__webpack_require__(11),fails=__webpack_require__(20);module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn),$export($export.S+$export.F*fails(function(){fn(1)}),"Object",exp)}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0;var _typeof2=__webpack_require__(53),_typeof3=_interopRequireDefault(_typeof2);exports["default"]=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==("undefined"==typeof call?"undefined":(0,_typeof3["default"])(call))&&"function"!=typeof call?self:call}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0;var _iterator=__webpack_require__(54),_iterator2=_interopRequireDefault(_iterator),_symbol=__webpack_require__(83),_symbol2=_interopRequireDefault(_symbol),_typeof="function"==typeof _symbol2["default"]&&"symbol"==typeof _iterator2["default"]?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof _symbol2["default"]&&obj.constructor===_symbol2["default"]&&obj!==_symbol2["default"].prototype?"symbol":typeof obj};exports["default"]="function"==typeof _symbol2["default"]&&"symbol"===_typeof(_iterator2["default"])?function(obj){return"undefined"==typeof obj?"undefined":_typeof(obj)}:function(obj){return obj&&"function"==typeof _symbol2["default"]&&obj.constructor===_symbol2["default"]&&obj!==_symbol2["default"].prototype?"symbol":"undefined"==typeof obj?"undefined":_typeof(obj)}},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(55),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(56),__webpack_require__(78),module.exports=__webpack_require__(82).f("iterator")},function(module,exports,__webpack_require__){"use strict";var $at=__webpack_require__(57)(!0);__webpack_require__(59)(String,"String",function(iterated){this._t=String(iterated),this._i=0},function(){var point,O=this._t,index=this._i;return index>=O.length?{value:void 0,done:!0}:(point=$at(O,index),this._i+=point.length,{value:point,done:!1})})},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(58),defined=__webpack_require__(45);module.exports=function(TO_STRING){return function(that,pos){var a,b,s=String(defined(that)),i=toInteger(pos),l=s.length;return i<0||i>=l?TO_STRING?"":void 0:(a=s.charCodeAt(i),a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536)}}},function(module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},function(module,exports,__webpack_require__){"use strict";var LIBRARY=__webpack_require__(60),$export=__webpack_require__(9),redefine=__webpack_require__(61),hide=__webpack_require__(14),has=__webpack_require__(47),Iterators=__webpack_require__(62),$iterCreate=__webpack_require__(63),setToStringTag=__webpack_require__(76),getPrototypeOf=__webpack_require__(46),ITERATOR=__webpack_require__(77)("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values",returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var methods,key,IteratorPrototype,getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function(){return new Constructor(this,kind)};case VALUES:return function(){return new Constructor(this,kind)}}return function(){return new Constructor(this,kind)}},TAG=NAME+" Iterator",DEF_VALUES=DEFAULT==VALUES,VALUES_BUG=!1,proto=Base.prototype,$native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT],$default=$native||getMethod(DEFAULT),$entries=DEFAULT?DEF_VALUES?getMethod("entries"):$default:void 0,$anyNative="Array"==NAME?proto.entries||$native:$native;if($anyNative&&(IteratorPrototype=getPrototypeOf($anyNative.call(new Base)),IteratorPrototype!==Object.prototype&&(setToStringTag(IteratorPrototype,TAG,!0),LIBRARY||has(IteratorPrototype,ITERATOR)||hide(IteratorPrototype,ITERATOR,returnThis))),DEF_VALUES&&$native&&$native.name!==VALUES&&(VALUES_BUG=!0,$default=function(){return $native.call(this)}),LIBRARY&&!FORCED||!BUGGY&&!VALUES_BUG&&proto[ITERATOR]||hide(proto,ITERATOR,$default),Iterators[NAME]=$default,Iterators[TAG]=returnThis,DEFAULT)if(methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:$entries},FORCED)for(key in methods)key in proto||redefine(proto,key,methods[key]);else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods);return methods}},function(module,exports){module.exports=!0},function(module,exports,__webpack_require__){module.exports=__webpack_require__(14)},function(module,exports){module.exports={}},function(module,exports,__webpack_require__){"use strict";var create=__webpack_require__(64),descriptor=__webpack_require__(23),setToStringTag=__webpack_require__(76),IteratorPrototype={};__webpack_require__(14)(IteratorPrototype,__webpack_require__(77)("iterator"),function(){return this}),module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)}),setToStringTag(Constructor,NAME+" Iterator")}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(16),dPs=__webpack_require__(65),enumBugKeys=__webpack_require__(74),IE_PROTO=__webpack_require__(48)("IE_PROTO"),Empty=function(){},PROTOTYPE="prototype",createDict=function(){var iframeDocument,iframe=__webpack_require__(21)("iframe"),i=enumBugKeys.length,lt="<",gt=">";for(iframe.style.display="none",__webpack_require__(75).appendChild(iframe),iframe.src="javascript:",iframeDocument=iframe.contentWindow.document,iframeDocument.open(),iframeDocument.write(lt+"script"+gt+"document.F=Object"+lt+"/script"+gt),iframeDocument.close(),createDict=iframeDocument.F;i--;)delete createDict[PROTOTYPE][enumBugKeys[i]];return createDict()};module.exports=Object.create||function(O,Properties){var result;return null!==O?(Empty[PROTOTYPE]=anObject(O),result=new Empty,Empty[PROTOTYPE]=null,result[IE_PROTO]=O):result=createDict(),void 0===Properties?result:dPs(result,Properties)}},function(module,exports,__webpack_require__){var dP=__webpack_require__(15),anObject=__webpack_require__(16),getKeys=__webpack_require__(66);module.exports=__webpack_require__(19)?Object.defineProperties:function(O,Properties){anObject(O);for(var P,keys=getKeys(Properties),length=keys.length,i=0;length>i;)dP.f(O,P=keys[i++],Properties[P]);return O}},function(module,exports,__webpack_require__){var $keys=__webpack_require__(67),enumBugKeys=__webpack_require__(74);module.exports=Object.keys||function(O){return $keys(O,enumBugKeys)}},function(module,exports,__webpack_require__){var has=__webpack_require__(47),toIObject=__webpack_require__(68),arrayIndexOf=__webpack_require__(71)(!1),IE_PROTO=__webpack_require__(48)("IE_PROTO");module.exports=function(object,names){var key,O=toIObject(object),i=0,result=[];for(key in O)key!=IE_PROTO&&has(O,key)&&result.push(key);for(;names.length>i;)has(O,key=names[i++])&&(~arrayIndexOf(result,key)||result.push(key));return result}},function(module,exports,__webpack_require__){var IObject=__webpack_require__(69),defined=__webpack_require__(45);module.exports=function(it){return IObject(defined(it))}},function(module,exports,__webpack_require__){var cof=__webpack_require__(70);module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return"String"==cof(it)?it.split(""):Object(it)}},function(module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},function(module,exports,__webpack_require__){var toIObject=__webpack_require__(68),toLength=__webpack_require__(72),toIndex=__webpack_require__(73);module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var value,O=toIObject($this),length=toLength(O.length),index=toIndex(fromIndex,length);if(IS_INCLUDES&&el!=el){for(;length>index;)if(value=O[index++],value!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(58),min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(58),max=Math.max,min=Math.min;module.exports=function(index,length){
return index=toInteger(index),index<0?max(index+length,0):min(index,length)}},function(module,exports){module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(10).document&&document.documentElement},function(module,exports,__webpack_require__){var def=__webpack_require__(15).f,has=__webpack_require__(47),TAG=__webpack_require__(77)("toStringTag");module.exports=function(it,tag,stat){it&&!has(it=stat?it:it.prototype,TAG)&&def(it,TAG,{configurable:!0,value:tag})}},function(module,exports,__webpack_require__){var store=__webpack_require__(49)("wks"),uid=__webpack_require__(50),Symbol=__webpack_require__(10).Symbol,USE_SYMBOL="function"==typeof Symbol,$exports=module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:uid)("Symbol."+name))};$exports.store=store},function(module,exports,__webpack_require__){__webpack_require__(79);for(var global=__webpack_require__(10),hide=__webpack_require__(14),Iterators=__webpack_require__(62),TO_STRING_TAG=__webpack_require__(77)("toStringTag"),collections=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],i=0;i<5;i++){var NAME=collections[i],Collection=global[NAME],proto=Collection&&Collection.prototype;proto&&!proto[TO_STRING_TAG]&&hide(proto,TO_STRING_TAG,NAME),Iterators[NAME]=Iterators.Array}},function(module,exports,__webpack_require__){"use strict";var addToUnscopables=__webpack_require__(80),step=__webpack_require__(81),Iterators=__webpack_require__(62),toIObject=__webpack_require__(68);module.exports=__webpack_require__(59)(Array,"Array",function(iterated,kind){this._t=toIObject(iterated),this._i=0,this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;return!O||index>=O.length?(this._t=void 0,step(1)):"keys"==kind?step(0,index):"values"==kind?step(0,O[index]):step(0,[index,O[index]])},"values"),Iterators.Arguments=Iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries")},function(module,exports){module.exports=function(){}},function(module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},function(module,exports,__webpack_require__){exports.f=__webpack_require__(77)},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(84),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(85),__webpack_require__(96),__webpack_require__(97),__webpack_require__(98),module.exports=__webpack_require__(11).Symbol},function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(10),has=__webpack_require__(47),DESCRIPTORS=__webpack_require__(19),$export=__webpack_require__(9),redefine=__webpack_require__(61),META=__webpack_require__(86).KEY,$fails=__webpack_require__(20),shared=__webpack_require__(49),setToStringTag=__webpack_require__(76),uid=__webpack_require__(50),wks=__webpack_require__(77),wksExt=__webpack_require__(82),wksDefine=__webpack_require__(87),keyOf=__webpack_require__(88),enumKeys=__webpack_require__(89),isArray=__webpack_require__(92),anObject=__webpack_require__(16),toIObject=__webpack_require__(68),toPrimitive=__webpack_require__(22),createDesc=__webpack_require__(23),_create=__webpack_require__(64),gOPNExt=__webpack_require__(93),$GOPD=__webpack_require__(95),$DP=__webpack_require__(15),$keys=__webpack_require__(66),gOPD=$GOPD.f,dP=$DP.f,gOPN=gOPNExt.f,$Symbol=global.Symbol,$JSON=global.JSON,_stringify=$JSON&&$JSON.stringify,PROTOTYPE="prototype",HIDDEN=wks("_hidden"),TO_PRIMITIVE=wks("toPrimitive"),isEnum={}.propertyIsEnumerable,SymbolRegistry=shared("symbol-registry"),AllSymbols=shared("symbols"),OPSymbols=shared("op-symbols"),ObjectProto=Object[PROTOTYPE],USE_NATIVE="function"==typeof $Symbol,QObject=global.QObject,setter=!QObject||!QObject[PROTOTYPE]||!QObject[PROTOTYPE].findChild,setSymbolDesc=DESCRIPTORS&&$fails(function(){return 7!=_create(dP({},"a",{get:function(){return dP(this,"a",{value:7}).a}})).a})?function(it,key,D){var protoDesc=gOPD(ObjectProto,key);protoDesc&&delete ObjectProto[key],dP(it,key,D),protoDesc&&it!==ObjectProto&&dP(ObjectProto,key,protoDesc)}:dP,wrap=function(tag){var sym=AllSymbols[tag]=_create($Symbol[PROTOTYPE]);return sym._k=tag,sym},isSymbol=USE_NATIVE&&"symbol"==typeof $Symbol.iterator?function(it){return"symbol"==typeof it}:function(it){return it instanceof $Symbol},$defineProperty=function(it,key,D){return it===ObjectProto&&$defineProperty(OPSymbols,key,D),anObject(it),key=toPrimitive(key,!0),anObject(D),has(AllSymbols,key)?(D.enumerable?(has(it,HIDDEN)&&it[HIDDEN][key]&&(it[HIDDEN][key]=!1),D=_create(D,{enumerable:createDesc(0,!1)})):(has(it,HIDDEN)||dP(it,HIDDEN,createDesc(1,{})),it[HIDDEN][key]=!0),setSymbolDesc(it,key,D)):dP(it,key,D)},$defineProperties=function(it,P){anObject(it);for(var key,keys=enumKeys(P=toIObject(P)),i=0,l=keys.length;l>i;)$defineProperty(it,key=keys[i++],P[key]);return it},$create=function(it,P){return void 0===P?_create(it):$defineProperties(_create(it),P)},$propertyIsEnumerable=function(key){var E=isEnum.call(this,key=toPrimitive(key,!0));return!(this===ObjectProto&&has(AllSymbols,key)&&!has(OPSymbols,key))&&(!(E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key])||E)},$getOwnPropertyDescriptor=function(it,key){if(it=toIObject(it),key=toPrimitive(key,!0),it!==ObjectProto||!has(AllSymbols,key)||has(OPSymbols,key)){var D=gOPD(it,key);return!D||!has(AllSymbols,key)||has(it,HIDDEN)&&it[HIDDEN][key]||(D.enumerable=!0),D}},$getOwnPropertyNames=function(it){for(var key,names=gOPN(toIObject(it)),result=[],i=0;names.length>i;)has(AllSymbols,key=names[i++])||key==HIDDEN||key==META||result.push(key);return result},$getOwnPropertySymbols=function(it){for(var key,IS_OP=it===ObjectProto,names=gOPN(IS_OP?OPSymbols:toIObject(it)),result=[],i=0;names.length>i;)!has(AllSymbols,key=names[i++])||IS_OP&&!has(ObjectProto,key)||result.push(AllSymbols[key]);return result};USE_NATIVE||($Symbol=function(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var tag=uid(arguments.length>0?arguments[0]:void 0),$set=function(value){this===ObjectProto&&$set.call(OPSymbols,value),has(this,HIDDEN)&&has(this[HIDDEN],tag)&&(this[HIDDEN][tag]=!1),setSymbolDesc(this,tag,createDesc(1,value))};return DESCRIPTORS&&setter&&setSymbolDesc(ObjectProto,tag,{configurable:!0,set:$set}),wrap(tag)},redefine($Symbol[PROTOTYPE],"toString",function(){return this._k}),$GOPD.f=$getOwnPropertyDescriptor,$DP.f=$defineProperty,__webpack_require__(94).f=gOPNExt.f=$getOwnPropertyNames,__webpack_require__(91).f=$propertyIsEnumerable,__webpack_require__(90).f=$getOwnPropertySymbols,DESCRIPTORS&&!__webpack_require__(60)&&redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable,!0),wksExt.f=function(name){return wrap(wks(name))}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Symbol:$Symbol});for(var symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),i=0;symbols.length>i;)wks(symbols[i++]);for(var symbols=$keys(wks.store),i=0;symbols.length>i;)wksDefine(symbols[i++]);$export($export.S+$export.F*!USE_NATIVE,"Symbol",{"for":function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function(key){if(isSymbol(key))return keyOf(SymbolRegistry,key);throw TypeError(key+" is not a symbol!")},useSetter:function(){setter=!0},useSimple:function(){setter=!1}}),$export($export.S+$export.F*!USE_NATIVE,"Object",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols}),$JSON&&$export($export.S+$export.F*(!USE_NATIVE||$fails(function(){var S=$Symbol();return"[null]"!=_stringify([S])||"{}"!=_stringify({a:S})||"{}"!=_stringify(Object(S))})),"JSON",{stringify:function(it){if(void 0!==it&&!isSymbol(it)){for(var replacer,$replacer,args=[it],i=1;arguments.length>i;)args.push(arguments[i++]);return replacer=args[1],"function"==typeof replacer&&($replacer=replacer),!$replacer&&isArray(replacer)||(replacer=function(key,value){if($replacer&&(value=$replacer.call(this,key,value)),!isSymbol(value))return value}),args[1]=replacer,_stringify.apply($JSON,args)}}}),$Symbol[PROTOTYPE][TO_PRIMITIVE]||__webpack_require__(14)($Symbol[PROTOTYPE],TO_PRIMITIVE,$Symbol[PROTOTYPE].valueOf),setToStringTag($Symbol,"Symbol"),setToStringTag(Math,"Math",!0),setToStringTag(global.JSON,"JSON",!0)},function(module,exports,__webpack_require__){var META=__webpack_require__(50)("meta"),isObject=__webpack_require__(17),has=__webpack_require__(47),setDesc=__webpack_require__(15).f,id=0,isExtensible=Object.isExtensible||function(){return!0},FREEZE=!__webpack_require__(20)(function(){return isExtensible(Object.preventExtensions({}))}),setMeta=function(it){setDesc(it,META,{value:{i:"O"+ ++id,w:{}}})},fastKey=function(it,create){if(!isObject(it))return"symbol"==typeof it?it:("string"==typeof it?"S":"P")+it;if(!has(it,META)){if(!isExtensible(it))return"F";if(!create)return"E";setMeta(it)}return it[META].i},getWeak=function(it,create){if(!has(it,META)){if(!isExtensible(it))return!0;if(!create)return!1;setMeta(it)}return it[META].w},onFreeze=function(it){return FREEZE&&meta.NEED&&isExtensible(it)&&!has(it,META)&&setMeta(it),it},meta=module.exports={KEY:META,NEED:!1,fastKey:fastKey,getWeak:getWeak,onFreeze:onFreeze}},function(module,exports,__webpack_require__){var global=__webpack_require__(10),core=__webpack_require__(11),LIBRARY=__webpack_require__(60),wksExt=__webpack_require__(82),defineProperty=__webpack_require__(15).f;module.exports=function(name){var $Symbol=core.Symbol||(core.Symbol=LIBRARY?{}:global.Symbol||{});"_"==name.charAt(0)||name in $Symbol||defineProperty($Symbol,name,{value:wksExt.f(name)})}},function(module,exports,__webpack_require__){var getKeys=__webpack_require__(66),toIObject=__webpack_require__(68);module.exports=function(object,el){for(var key,O=toIObject(object),keys=getKeys(O),length=keys.length,index=0;length>index;)if(O[key=keys[index++]]===el)return key}},function(module,exports,__webpack_require__){var getKeys=__webpack_require__(66),gOPS=__webpack_require__(90),pIE=__webpack_require__(91);module.exports=function(it){var result=getKeys(it),getSymbols=gOPS.f;if(getSymbols)for(var key,symbols=getSymbols(it),isEnum=pIE.f,i=0;symbols.length>i;)isEnum.call(it,key=symbols[i++])&&result.push(key);return result}},function(module,exports){exports.f=Object.getOwnPropertySymbols},function(module,exports){exports.f={}.propertyIsEnumerable},function(module,exports,__webpack_require__){var cof=__webpack_require__(70);module.exports=Array.isArray||function(arg){return"Array"==cof(arg)}},function(module,exports,__webpack_require__){var toIObject=__webpack_require__(68),gOPN=__webpack_require__(94).f,toString={}.toString,windowNames="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(it){try{return gOPN(it)}catch(e){return windowNames.slice()}};module.exports.f=function(it){return windowNames&&"[object Window]"==toString.call(it)?getWindowNames(it):gOPN(toIObject(it))}},function(module,exports,__webpack_require__){var $keys=__webpack_require__(67),hiddenKeys=__webpack_require__(74).concat("length","prototype");exports.f=Object.getOwnPropertyNames||function(O){return $keys(O,hiddenKeys)}},function(module,exports,__webpack_require__){var pIE=__webpack_require__(91),createDesc=__webpack_require__(23),toIObject=__webpack_require__(68),toPrimitive=__webpack_require__(22),has=__webpack_require__(47),IE8_DOM_DEFINE=__webpack_require__(18),gOPD=Object.getOwnPropertyDescriptor;exports.f=__webpack_require__(19)?gOPD:function(O,P){if(O=toIObject(O),P=toPrimitive(P,!0),IE8_DOM_DEFINE)try{return gOPD(O,P)}catch(e){}if(has(O,P))return createDesc(!pIE.f.call(O,P),O[P])}},function(module,exports){},function(module,exports,__webpack_require__){__webpack_require__(87)("asyncIterator")},function(module,exports,__webpack_require__){__webpack_require__(87)("observable")},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0;var _setPrototypeOf=__webpack_require__(100),_setPrototypeOf2=_interopRequireDefault(_setPrototypeOf),_create=__webpack_require__(104),_create2=_interopRequireDefault(_create),_typeof2=__webpack_require__(53),_typeof3=_interopRequireDefault(_typeof2);exports["default"]=function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof superClass?"undefined":(0,_typeof3["default"])(superClass)));subClass.prototype=(0,_create2["default"])(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(_setPrototypeOf2["default"]?(0,_setPrototypeOf2["default"])(subClass,superClass):subClass.__proto__=superClass)}},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(101),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(102),module.exports=__webpack_require__(11).Object.setPrototypeOf},function(module,exports,__webpack_require__){var $export=__webpack_require__(9);$export($export.S,"Object",{setPrototypeOf:__webpack_require__(103).set})},function(module,exports,__webpack_require__){var isObject=__webpack_require__(17),anObject=__webpack_require__(16),check=function(O,proto){if(anObject(O),!isObject(proto)&&null!==proto)throw TypeError(proto+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(test,buggy,set){try{set=__webpack_require__(12)(Function.call,__webpack_require__(95).f(Object.prototype,"__proto__").set,2),set(test,[]),buggy=!(test instanceof Array)}catch(e){buggy=!0}return function(O,proto){return check(O,proto),buggy?O.__proto__=proto:set(O,proto),O}}({},!1):void 0),check:check}},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(105),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(106);var $Object=__webpack_require__(11).Object;module.exports=function(P,D){return $Object.create(P,D)}},function(module,exports,__webpack_require__){var $export=__webpack_require__(9);$export($export.S,"Object",{create:__webpack_require__(64)})},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),_glMatrix=__webpack_require__(25),_glMatrix2=_interopRequireDefault(_glMatrix),OrbitalControl=function(){function OrbitalControl(){(0,_classCallCheck3["default"])(this,OrbitalControl),this.position=[0,100,0],this._position=[0,0,0],this.target=[0,0,0],this.up=[0,1,0],this.radius=800,this.prevMouse=[null,null],this.prevRx=null,this.prevRy=null,this.rxT=0,this.ryT=0,this.ry=0,this.rx=0,this.tr=0,this.locked=!1,this.autoRotation=!1,this._auto=!0,this._addEvents(),this.bounds=[[-1e3,1e3],[-1e3,1e3],[0,1e4]],this.speed=[0,0],this._lastScroll=null,this.isDown=!1,this.currentPos=[],this.previousPos=[],this.previousTime=null}return(0,_createClass3["default"])(OrbitalControl,[{key:"getSpeed",value:function(){var x=this.currentPos[0],y=this.currentPos[1],new_x=void 0,new_y=void 0,new_t=void 0,x_dist=void 0,y_dist=void 0,interval=void 0,velocity=[],t=void 0;return this.previousTime?(t=this.previousTime,new_x=this.previousPos[0],new_y=this.previousPos[1],new_t=Date.now(),x_dist=new_x-x,y_dist=new_y-y,interval=new_t-t,velocity[0]=Math.round(x_dist/interval*10),velocity[1]=Math.round(y_dist/interval*10),isNaN(velocity[0])&&(velocity[0]=0),isNaN(velocity[1])&&(velocity[1]=0),velocity):[0,0]}},{key:"onDown",value:function(e){e.touches?this.prevMouse=[e.touches[0].pageX,e.touches[0].pageY]:this.prevMouse=[e.clientX,e.clientY],this.isDown=!0,this.prevRx=this.rxT=this.rx,this.prevRy=this.ryT=this.ry}},{key:"onMove",value:function(e){if(this.isDown){e.touches?this.currentPos=[e.touches[0].pageX,e.touches[0].pageY]:this.currentPos=[e.clientX,e.clientY];var diffX=-(this.currentPos[0]-this.prevMouse[0]);this.ryT=this.prevRy-.005*diffX;var diffY=-(this.currentPos[1]-this.prevMouse[1]);this.rxT=this.prevRx-.005*diffY}}},{key:"onUp",value:function(e){this.isDown=!1}},{key:"onScroll",value:function(e){if(!this._lastScroll)return void(this._lastScroll=e.deltaY);var add=.01*e.deltaY;this.radius+=add,this._lastScroll=add}},{key:"_addEvents",value:function(){window.addEventListener("mousewheel",this.onScroll.bind(this)),window.addEventListener("DOMMouseScroll",this.onScroll.bind(this)),window.addEventListener("mousedown",this.onDown.bind(this),!1),window.addEventListener("touchstart",this.onDown.bind(this),!1),window.addEventListener("mousemove",this.onMove.bind(this),!1),window.addEventListener("touchmove",this.onMove.bind(this),!1),window.addEventListener("mouseup",this.onUp.bind(this),!1),window.addEventListener("touchend",this.onUp.bind(this),!1)}},{key:"_removeEvents",value:function(){window.removeEventListener("mousewheel",this.onScroll.bind(this)),window.removeEventListener("DOMMouseScroll",this.onScroll.bind(this)),window.removeEventListener("mousedown",this.onDown.bind(this),!1),window.removeEventListener("mousemove",this.onMove.bind(this),!1),window.removeEventListener("mouseup",this.onUp.bind(this),!1),window.removeEventListener("touchstart",this.onDown.bind(this),!1),window.removeEventListener("touchmove",this.onMove.bind(this),!1),window.removeEventListener("touchend",this.onUp.bind(this),!1)}},{key:"setRy",value:function(value){this.prevRy=this.ryT=value}},{key:"update",value:function(){this.autoRotation&&(this.ry+=.004),this.ry+=(this.ryT-this.ry)*(this.isDown?.1:.03),this.rx+=(this.rxT-this.rx)*(this.isDown?.1:.03),this._position[1]=Math.sin(this.rx)*this.radius;var tr=Math.cos(this.rx)*this.radius;this._position[0]=Math.cos(this.ry+.5*Math.PI)*tr,this._position[2]=Math.sin(this.ry+.5*Math.PI)*tr,_glMatrix2["default"].vec3.add(this._position,this._position,this.position)}},{key:"auto",set:function(val){val?this._addEvents():this._removeEvents()}}]),OrbitalControl}();exports["default"]=OrbitalControl,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),CameraControl=function(){function CameraControl(){(0,_classCallCheck3["default"])(this,CameraControl),this.rxT=0,this.ryT=0,this.ry=0,this.rx=0,this.tr=0,this.prevMouse=[null,null],this.prevRx=null,this.prevRy=null,this._addEvents()}return(0,_createClass3["default"])(CameraControl,[{key:"setRy",value:function(value){this.prevRy=this.ryT=value}},{key:"onDown",value:function(e){e.touches?this.prevMouse=[e.touches[0].pageX,e.touches[0].pageY]:this.prevMouse=[e.clientX,e.clientY],this.isDown=!0,this.prevRx=this.rxT=this.rx,this.prevRy=this.ryT=this.ry}},{key:"onMove",value:function(e){if(this.isDown){e.touches?this.currentPos=[e.touches[0].pageX,e.touches[0].pageY]:this.currentPos=[e.clientX,e.clientY];var diffX=-(this.currentPos[0]-this.prevMouse[0]);this.ryT=this.prevRy-.005*diffX;var diffY=-(this.currentPos[1]-this.prevMouse[1]);this.rxT=this.prevRx-.005*diffY}}},{key:"onUp",value:function(e){this.isDown=!1}},{key:"update",value:function(){this.ry+=(this.ryT-this.ry)*(this.isDown?.1:.03),this.rx+=(this.rxT-this.rx)*(this.isDown?.1:.03)}},{key:"_addEvents",value:function(){window.addEventListener("mousedown",this.onDown.bind(this),!1),window.addEventListener("touchstart",this.onDown.bind(this),!1),window.addEventListener("mousemove",this.onMove.bind(this),!1),window.addEventListener("touchmove",this.onMove.bind(this),!1),window.addEventListener("mouseup",this.onUp.bind(this),!1),window.addEventListener("touchend",this.onUp.bind(this),!1)}},{key:"_removeEvents",value:function(){window.removeEventListener("mousedown",this.onDown.bind(this),!1),window.removeEventListener("mousemove",this.onMove.bind(this),!1),window.removeEventListener("mouseup",this.onUp.bind(this),!1),window.removeEventListener("touchstart",this.onDown.bind(this),!1),window.removeEventListener("touchmove",this.onMove.bind(this),!1),window.removeEventListener("touchend",this.onUp.bind(this),!1)}}]),CameraControl}();exports["default"]=CameraControl,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _Cube=__webpack_require__(110),_Cube2=_interopRequireDefault(_Cube),_Plane=__webpack_require__(114),_Plane2=_interopRequireDefault(_Plane),_PlaneSquare=__webpack_require__(115),_PlaneSquare2=_interopRequireDefault(_PlaneSquare),_Sphere=__webpack_require__(116),_Sphere2=_interopRequireDefault(_Sphere),_IcoSphere=__webpack_require__(117),_IcoSphere2=_interopRequireDefault(_IcoSphere),_Line=__webpack_require__(118),_Line2=_interopRequireDefault(_Line),_BigTriangle=__webpack_require__(119),_BigTriangle2=_interopRequireDefault(_BigTriangle),shapes={Cube:_Cube2["default"],Plane:_Plane2["default"],PlaneSquare:_PlaneSquare2["default"],Sphere:_Sphere2["default"],IcoSphere:_IcoSphere2["default"],Line:_Line2["default"],BigTriangle:_BigTriangle2["default"]};exports["default"]=shapes,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _getPrototypeOf=__webpack_require__(41),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(52),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(99),_inherits3=_interopRequireDefault(_inherits2),_mcgl=__webpack_require__(36),_mcgl2=_interopRequireDefault(_mcgl),_Mesh2=__webpack_require__(111),_Mesh3=_interopRequireDefault(_Mesh2),_FacesMultiplicator=__webpack_require__(112),_FacesMultiplicator2=_interopRequireDefault(_FacesMultiplicator),_FacesSeparator=__webpack_require__(113),gl=(_interopRequireDefault(_FacesSeparator),void 0),Cube=function(_Mesh){function Cube(program){var w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,multiFace=arguments.length>4&&void 0!==arguments[4]&&arguments[4],subdivision=arguments[5],drawMode=arguments.length>6&&void 0!==arguments[6]?arguments[6]:_mcgl2["default"].GL.gl.TRIANGLES;(0,_classCallCheck3["default"])(this,Cube);var _this=(0,_possibleConstructorReturn3["default"])(this,(Cube.__proto__||(0,_getPrototypeOf2["default"])(Cube)).call(this,program,drawMode));return subdivision=subdivision||0,gl=_mcgl2["default"].GL.gl,_this.multiFace=multiFace,_this.subdivision=subdivision,_this.width=w,_this.height=h,_this.depth=d,_this.cube(),_this}return(0,_inherits3["default"])(Cube,_Mesh),(0,_createClass3["default"])(Cube,[{key:"cube",value:function(){var x=this.width/2,y=this.height/2,z=this.depth/2,positions=[],coords=[],indices=[],normals=[],count=0;positions.push([-x+this.position[0],y+this.position[1],-z+this.position[2]]),positions.push([x+this.position[0],y+this.position[1],-z+this.position[2]]),positions.push([x+this.position[0],-y+this.position[1],-z+this.position[2]]),positions.push([-x+this.position[0],-y+this.position[1],-z+this.position[2]]),normals.push([0,0,-1]),normals.push([0,0,-1]),normals.push([0,0,-1]),normals.push([0,0,-1]),this.multiFace?(coords.push([0,0]),coords.push([.25,0]),coords.push([.25,.5]),coords.push([0,.5])):(coords.push([0,0]),coords.push([1,0]),coords.push([1,1]),coords.push([0,1])),indices.push(4*count+0),indices.push(4*count+1),indices.push(4*count+2),indices.push(4*count+0),indices.push(4*count+2),indices.push(4*count+3),count++,positions.push([x+this.position[0],y+this.position[1],-z+this.position[2]]),positions.push([x+this.position[0],y+this.position[1],z+this.position[2]]),positions.push([x+this.position[0],-y+this.position[1],z+this.position[2]]),positions.push([x+this.position[0],-y+this.position[1],-z+this.position[2]]),normals.push([1,0,0]),normals.push([1,0,0]),normals.push([1,0,0]),normals.push([1,0,0]),this.multiFace?(coords.push([.25,0]),coords.push([.5,0]),coords.push([.5,.5]),coords.push([.25,.5])):(coords.push([0,0]),coords.push([1,0]),coords.push([1,1]),coords.push([0,1])),indices.push(4*count+0),indices.push(4*count+1),indices.push(4*count+2),indices.push(4*count+0),indices.push(4*count+2),indices.push(4*count+3),count++,positions.push([x+this.position[0],y+this.position[1],z+this.position[2]]),positions.push([-x+this.position[0],y+this.position[1],z+this.position[2]]),positions.push([-x+this.position[0],-y+this.position[1],z+this.position[2]]),positions.push([x+this.position[0],-y+this.position[1],z+this.position[2]]),normals.push([0,0,1]),normals.push([0,0,1]),normals.push([0,0,1]),normals.push([0,0,1]),this.multiFace?(coords.push([.5,0]),coords.push([.75,0]),coords.push([.75,.5]),coords.push([.5,.5])):(coords.push([0,0]),coords.push([1,0]),coords.push([1,1]),coords.push([0,1])),indices.push(4*count+0),indices.push(4*count+1),indices.push(4*count+2),indices.push(4*count+0),indices.push(4*count+2),indices.push(4*count+3),count++,positions.push([-x+this.position[0],y+this.position[1],z+this.position[2]]),positions.push([-x+this.position[0],y+this.position[1],-z+this.position[2]]),positions.push([-x+this.position[0],-y+this.position[1],-z+this.position[2]]),positions.push([-x+this.position[0],-y+this.position[1],z+this.position[2]]),normals.push([-1,0,0]),normals.push([-1,0,0]),normals.push([-1,0,0]),normals.push([-1,0,0]),this.multiFace?(coords.push([0,.5]),coords.push([.25,.5]),coords.push([.25,1]),coords.push([0,1])):(coords.push([0,0]),coords.push([1,0]),coords.push([1,1]),coords.push([0,1])),indices.push(4*count+0),indices.push(4*count+1),indices.push(4*count+2),indices.push(4*count+0),indices.push(4*count+2),indices.push(4*count+3),count++,positions.push([-x+this.position[0],y+this.position[1],z+this.position[2]]),positions.push([x+this.position[0],y+this.position[1],z+this.position[2]]),positions.push([x+this.position[0],y+this.position[1],-z+this.position[2]]),positions.push([-x+this.position[0],y+this.position[1],-z+this.position[2]]),normals.push([0,1,0]),normals.push([0,1,0]),normals.push([0,1,0]),normals.push([0,1,0]),this.multiFace?(coords.push([.25,.5]),coords.push([.5,.5]),coords.push([.5,1]),coords.push([.25,1])):(coords.push([0,0]),coords.push([1,0]),coords.push([1,1]),coords.push([0,1])),indices.push(4*count+0),indices.push(4*count+1),indices.push(4*count+2),indices.push(4*count+0),indices.push(4*count+2),indices.push(4*count+3),count++,positions.push([-x+this.position[0],-y+this.position[1],-z+this.position[2]]),positions.push([x+this.position[0],-y+this.position[1],-z+this.position[2]]),positions.push([x+this.position[0],-y+this.position[1],z+this.position[2]]),positions.push([-x+this.position[0],-y+this.position[1],z+this.position[2]]),normals.push([0,-1,0]),normals.push([0,-1,0]),normals.push([0,-1,0]),normals.push([0,-1,0]),this.multiFace?(coords.push([.5,.5]),coords.push([.75,.5]),coords.push([.75,1]),coords.push([.5,1])):(coords.push([0,0]),coords.push([1,0]),coords.push([1,1]),coords.push([0,1])),indices.push(4*count+0),indices.push(4*count+1),indices.push(4*count+2),indices.push(4*count+0),indices.push(4*count+2),indices.push(4*count+3);for(var ind=[],i=0;i<indices.length;i+=3)ind.push([indices[i],indices[i+1],indices[i+2]]);for(var faces=_FacesMultiplicator2["default"].multiplyTriangles(this.subdivision,ind,positions),l=positions.length-coords.length,i=0;i<l;i++)coords.push([0,0]),normals.push([0,-1,0]);this.bufferNormal(normals),this.bufferVertex(positions),this.bufferIndex(faces),this.bufferTexCoord(coords)}},{key:"render",value:function(sub,drawMode){this.subdivision=sub,this.drawType=drawMode,this.cube()}}]),Cube}(_Mesh3["default"]);exports["default"]=Cube,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),_mcgl=__webpack_require__(36),_mcgl2=_interopRequireDefault(_mcgl),gl=void 0,Mesh=function(){function Mesh(program){var drawingType=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;(0,_classCallCheck3["default"])(this,Mesh),this.program=program,gl=_mcgl2["default"].GL.gl,this.position=[0,0,0],this.rotation=[0,0,0],this.drawType=drawingType,this._attributes=[],this._instancedAttributes=[],this._vertexSize=0,this._vertices=[],this._texCoords=[],this._normals=[],this._faceNormals=[],this._tangents=[],this._indices=[],this._faces=[]}return(0,_createClass3["default"])(Mesh,[{key:"bufferVertex",value:function(mArrayVertices){var isDynamic=arguments.length>1&&void 0!==arguments[1]&&arguments[1],posAttribName=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"a_position",mIsFlatten=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._vertexSize=mArrayVertices.length,this.bufferData(mArrayVertices,posAttribName,3,isDynamic,mIsFlatten),this._vertices=mArrayVertices}},{key:"bufferTexCoord",value:function(mArrayTexCoords){var isDynamic=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.bufferData(mArrayTexCoords,"a_textureCoord",2,isDynamic),this._texCoords=mArrayTexCoords}},{key:"bufferNormal",value:function(mNormals){var isDynamic=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.bufferData(mNormals,"a_normal",3,isDynamic),this._normals=mNormals}},{key:"bufferIndex",value:function(mArrayIndices){var isDynamic=arguments.length>1&&void 0!==arguments[1]&&arguments[1],drawType=isDynamic?gl.DYNAMIC_DRAW:gl.STATIC_DRAW;if(this.iBuffer||(this.iBuffer=gl.createBuffer()),Array.isArray(mArrayIndices[0])){for(var ind=[],index=0,i=0;i<mArrayIndices.length;i++)for(var k=0;k<mArrayIndices[i].length;k++)ind[index++]=mArrayIndices[i][k];mArrayIndices=ind}this._indices=mArrayIndices,gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.iBuffer),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(mArrayIndices),drawType),this.iBuffer.itemSize=1,this.iBuffer.numItems=mArrayIndices.length}},{key:"bufferData",value:function bufferData(mData,mName,mItemSize){var isDynamic=arguments.length>3&&void 0!==arguments[3]&&arguments[3],mIsFlatten=arguments.length>4&&void 0!==arguments[4]&&arguments[4],index=-1,i=0,drawType=isDynamic?gl.DYNAMIC_DRAW:gl.STATIC_DRAW,bufferData=[],buffer=void 0,dataArray=void 0;for(mItemSize||(mItemSize=mData[0].length),i=0;i<this._attributes.length;i++)if(this._attributes[i].name===mName){this._attributes[i].data=mData,index=i;break}if(mIsFlatten)bufferData=mData;else for(i=0;i<mData.length;i++)for(var j=0;j<mData[i].length;j++)bufferData.push(mData[i][j]);
if(index===-1)buffer=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,buffer),dataArray=new Float32Array(bufferData),gl.bufferData(gl.ARRAY_BUFFER,dataArray,drawType),this._attributes.push({name:mName,data:mData,itemSize:mItemSize,buffer:buffer,dataArray:dataArray});else{buffer=this._attributes[index].buffer,gl.bindBuffer(gl.ARRAY_BUFFER,buffer),dataArray=new Float32Array(bufferData),gl.bufferData(gl.ARRAY_BUFFER,dataArray,drawType);var attribute=this._attributes.find(function(a){return a.name===mName});attribute.data=mData,attribute.itemSize=mItemSize,attribute.dataArray=dataArray}}}]),Mesh}();exports["default"]=Mesh,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),FacesMultiplicator=function(){function FacesMultiplicator(){(0,_classCallCheck3["default"])(this,FacesMultiplicator),this.indexUniq=0,this.middlePointIndexCache={},this.vertices=[],this.isNormalised=!0}return(0,_createClass3["default"])(FacesMultiplicator,[{key:"multiplyTriangles",value:function(n,indices,vertices){this.indexUniq=vertices.length,this.vertices=vertices;var faces=indices.slice();this.isNormalised=!0;for(var i=0;i<this.vertices.length&&this.isNormalised;i++)for(var k=0;k<this.vertices[i].length;k++)Math.abs(this.vertices[i][k])>1&&(this.isNormalised=!1);for(var i=0;i<n;i++){for(var faces2=[],k=0;k<faces.length;k++){var tri=faces[k],a=this.getMiddlePoint(tri[0],tri[1]),b=this.getMiddlePoint(tri[1],tri[2]),c=this.getMiddlePoint(tri[2],tri[0]);faces2.push([tri[0],a,c]),faces2.push([tri[1],b,a]),faces2.push([tri[2],b,c]),faces2.push([a,b,c])}faces=faces2.slice()}return faces}},{key:"addVertex",value:function(position){var length=this.isNormalised?Math.sqrt(position[0]*position[0]+position[1]*position[1]+position[2]*position[2]):1;return this.vertices.push([position[0]/length,position[1]/length,position[2]/length]),this.indexUniq++}},{key:"getMiddlePoint",value:function(p1,p2){var firstPointIsSmaller=p1<p2,smallerIndex=firstPointIsSmaller?p1:p2,greaterIndex=firstPointIsSmaller?p2:p1,key=(smallerIndex<<32)+greaterIndex,point1=this.vertices[p1],point2=this.vertices[p2],middle=[(point1[0]+point2[0])/2,(point1[1]+point2[1])/2,(point1[2]+point2[2])/2],i=this.addVertex(middle);return this.middlePointIndexCache[key]=i,i}}]),FacesMultiplicator}();exports["default"]=new FacesMultiplicator,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),FacesSeparator=function(){function FacesSeparator(){(0,_classCallCheck3["default"])(this,FacesSeparator)}return(0,_createClass3["default"])(FacesSeparator,[{key:"separate",value:function(faces,vertices){for(var triangles=[],ind=[],i=0;i<faces.length;i++)triangles.push(faces[i][0],faces[i][1],faces[i][2]),ind.push(faces[i][0],faces[i][1],faces[i][2]);for(var oldVerts=vertices.slice(),newVertices=[],_i=0;_i<triangles.length;_i++)newVertices[_i]=oldVerts[triangles[_i]].slice(),triangles[_i]=_i;return{faces:triangles,vertices:newVertices}}}]),FacesSeparator}();exports["default"]=new FacesSeparator,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _getPrototypeOf=__webpack_require__(41),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(52),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(99),_inherits3=_interopRequireDefault(_inherits2),_mcgl=__webpack_require__(36),_Mesh2=(_interopRequireDefault(_mcgl),__webpack_require__(111)),_Mesh3=_interopRequireDefault(_Mesh2),gl=void 0,pivotX=void 0,pivotY=void 0,Plane=function(_Mesh){function Plane(program,w,h,subdivision,axis){var attribPositionName=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"a_position",drawMode=arguments.length>6&&void 0!==arguments[6]?arguments[6]:_mcgl.GL.gl.TRIANGLES;(0,_classCallCheck3["default"])(this,Plane);var _this=(0,_possibleConstructorReturn3["default"])(this,(Plane.__proto__||(0,_getPrototypeOf2["default"])(Plane)).call(this,program,drawMode));return gl=_mcgl.GL.gl,_this.attribPositionName=attribPositionName,_this.subdivision=subdivision,_this.axis=axis||"xy",_this.w=w,_this.h=h,_this.plane(_this.w,_this.h,_this.subdivision,_this.axis),_this}return(0,_inherits3["default"])(Plane,_Mesh),(0,_createClass3["default"])(Plane,[{key:"plane",value:function(w,h,subdivision,axis){pivotX=-this.w/2,pivotY=-this.h/2;for(var positions=[],indices=[],index=0,i=0;i<subdivision;i++)for(var j=0;j<subdivision;j++)"xy"===this.axis?(positions.push(this.getPos(i,j)),positions.push(this.getPos(i+1,j)),positions.push(this.getPos(i+1,j+1)),positions.push(this.getPos(i,j+1))):(positions.push(this.getPos(i,j)),positions.push(this.getPos(i+1,j)),positions.push(this.getPos(i+1,j+1)),positions.push(this.getPos(i,j+1))),indices.push(4*index+0),indices.push(4*index+1),indices.push(4*index+2),indices.push(4*index+0),indices.push(4*index+2),indices.push(4*index+3),index++;this.bufferIndex(indices),this.bufferVertex(positions,!1,this.attribPositionName)}},{key:"getPos",value:function(i,j){var x=this.w/this.subdivision*i+pivotX,y=this.h/this.subdivision*j+pivotY,z=0;return"xy"===this.axis?[x,y,z]:[x,0,y]}},{key:"render",value:function(){}}]),Plane}(_Mesh3["default"]);exports["default"]=Plane,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _getPrototypeOf=__webpack_require__(41),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(52),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(99),_inherits3=_interopRequireDefault(_inherits2),_mcgl=__webpack_require__(36),_mcgl2=_interopRequireDefault(_mcgl),_Mesh2=__webpack_require__(111),_Mesh3=_interopRequireDefault(_Mesh2),gl=void 0,pivotX=void 0,pivotY=void 0,PlaneSquare=function(_Mesh){function PlaneSquare(program,w,h,subdivision,axis){var attribPositionName=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"a_position",drawMode=arguments[6];(0,_classCallCheck3["default"])(this,PlaneSquare),drawMode=drawMode||_mcgl2["default"].GL.gl.POINTS;var _this=(0,_possibleConstructorReturn3["default"])(this,(PlaneSquare.__proto__||(0,_getPrototypeOf2["default"])(PlaneSquare)).call(this,program,drawMode));return gl=_mcgl2["default"].GL.gl,_this.attribPositionName=attribPositionName,_this.subdivision=subdivision,_this.axis=axis||"xy",_this.w=w,_this.h=h,_this.plane(_this.w,_this.h,_this.subdivision,_this.axis),_this}return(0,_inherits3["default"])(PlaneSquare,_Mesh),(0,_createClass3["default"])(PlaneSquare,[{key:"plane",value:function(w,h,subdivision,axis){pivotX=-this.w/2,pivotY=-this.h/2;for(var positions=[],indices=[],index=0,i=0;i<subdivision;i++)for(var j=0;j<subdivision;j++)"xy"===this.axis?(positions.push(this.getPos(i,j)),positions.push(this.getPos(i+1,j)),positions.push(this.getPos(i+1,j+1)),positions.push(this.getPos(i,j+1))):(positions.push(this.getPos(i,j+1)),positions.push(this.getPos(i+1,j+1)),positions.push(this.getPos(i+1,j)),positions.push(this.getPos(i,j))),indices.push(4*index+0),indices.push(4*index+1),indices.push(4*index+2),indices.push(4*index+3),indices.push(4*index+2),indices.push(4*index+1),index++;this.bufferIndex(indices),this.bufferVertex(positions,!1,this.attribPositionName)}},{key:"getPos",value:function(i,j){var x=this.w/this.subdivision*i+pivotX,y=this.h/this.subdivision*j+pivotY,z=0;return"xy"===this.axis?[x+this.position[0],y+this.position[1],z+this.position[2]]:[x+this.position[2],z+this.position[1],y+this.position[0]]}}]),PlaneSquare}(_Mesh3["default"]);exports["default"]=PlaneSquare,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _getPrototypeOf=__webpack_require__(41),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(52),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(99),_inherits3=_interopRequireDefault(_inherits2),_glMatrix=__webpack_require__(25),_glMatrix2=_interopRequireDefault(_glMatrix),_mcgl=__webpack_require__(36),_mcgl2=_interopRequireDefault(_mcgl),_Mesh2=__webpack_require__(111),_Mesh3=_interopRequireDefault(_Mesh2),Sphere=function(_Mesh){function Sphere(program,nbVert,radius){var attribPositionName=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"a_position",drawMode=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_mcgl2["default"].GL.gl.TRIANGLES;(0,_classCallCheck3["default"])(this,Sphere);var _this=(0,_possibleConstructorReturn3["default"])(this,(Sphere.__proto__||(0,_getPrototypeOf2["default"])(Sphere)).call(this,program,drawMode));return _this.attribPositionName=attribPositionName,_this.nbVert=nbVert,_this.radius=radius,_this.sphere(),_this}return(0,_inherits3["default"])(Sphere,_Mesh),(0,_createClass3["default"])(Sphere,[{key:"sphere",value:function(){for(var positions=[],indices=[],index=0,uv=[],dTex=1/this.nbVert,i=0;i<this.nbVert;i++)for(var j=0;j<this.nbVert;j++){positions.push(this.getAngle(i,j)),positions.push(this.getAngle(i+1,j)),positions.push(this.getAngle(i+1,j+1)),positions.push(this.getAngle(i,j+1));var u=j/this.nbVert,v=i/this.nbVert;uv.push([1-u,v]),uv.push([1-u,v+dTex]),uv.push([1-u-dTex,v+dTex]),uv.push([1-u-dTex,v]),indices.push(4*index+0),indices.push(4*index+1),indices.push(4*index+2),indices.push(4*index+0),indices.push(4*index+2),indices.push(4*index+3),index++}this.bufferIndex(indices),this.bufferTexCoord(uv,!1),this.bufferVertex(positions,!1,this.attribPositionName)}},{key:"getUV",value:function(i,j){var ry=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],j/this.nbVert*Math.PI*2-Math.PI),rx=i/this.nbVert*Math.PI-.5*Math.PI,r=this.radius,pos=[];pos[1]=Math.sin(rx)*r;var t=Math.cos(rx)*r;pos[0]=Math.cos(ry)*t,pos[2]=Math.sin(ry)*t;var d=[];_glMatrix2["default"].vec3.sub(d,[0,0,0],pos);var mag=Math.sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=mag,d[1]/=mag,d[2]/=mag;var u=.5+Math.atan2(d[2],d[0])/2*Math.PI,v=.5-Math.asin(d[1])/Math.PI;return[u,v]}},{key:"getAngle",value:function(i,j){var ry=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],j/this.nbVert*Math.PI*2-Math.PI),rx=i/this.nbVert*Math.PI-.5*Math.PI,r=this.radius,pos=[];pos[1]=Math.sin(rx)*r;var t=Math.cos(rx)*r;return pos[0]=Math.cos(ry)*t,pos[2]=Math.sin(ry)*t,[pos[0],pos[1],pos[2]]}},{key:"render",value:function(){}}]),Sphere}(_Mesh3["default"]);exports["default"]=Sphere,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _getPrototypeOf=__webpack_require__(41),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(52),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(99),_inherits3=_interopRequireDefault(_inherits2),_glMatrix=__webpack_require__(25),_mcgl=(_interopRequireDefault(_glMatrix),__webpack_require__(36)),_mcgl2=_interopRequireDefault(_mcgl),_Mesh2=__webpack_require__(111),_Mesh3=_interopRequireDefault(_Mesh2),_FacesMultiplicator=__webpack_require__(112),_FacesMultiplicator2=_interopRequireDefault(_FacesMultiplicator),_FacesSeparator=__webpack_require__(113),_FacesSeparator2=_interopRequireDefault(_FacesSeparator),vertices=[],IcoSphere=function(_Mesh){function IcoSphere(program){var subdivision=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,scale=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,attribPositionName=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"a_position",drawMode=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_mcgl2["default"].GL.gl.TRIANGLES;(0,_classCallCheck3["default"])(this,IcoSphere);var _this=(0,_possibleConstructorReturn3["default"])(this,(IcoSphere.__proto__||(0,_getPrototypeOf2["default"])(IcoSphere)).call(this,program,drawMode));return _this.attribPositionName=attribPositionName,_this.scale=scale,_this.subdivision=subdivision,_this.middlePointIndexCache=[],_this.sphere(),_this}return(0,_inherits3["default"])(IcoSphere,_Mesh),(0,_createClass3["default"])(IcoSphere,[{key:"sphere",value:function(){var faces=[],radius=1,t=(1+Math.sqrt(5))/2*radius;this.positions=[],this.addVertex([-1*radius,t,0]),this.addVertex([1*radius,t,0]),this.addVertex([-1*radius,-t,0]),this.addVertex([1*radius,-t,0]),this.addVertex([0,-1*radius,t]),this.addVertex([0,1*radius,t]),this.addVertex([0,-1*radius,-t]),this.addVertex([0,1*radius,-t]),this.addVertex([t,0,-1*radius]),this.addVertex([t,0,1*radius]),this.addVertex([-t,0,-1*radius]),this.addVertex([-t,0,1*radius]),faces.push([0,11,5]),faces.push([0,5,1]),faces.push([0,1,7]),faces.push([0,7,10]),faces.push([0,10,11]),faces.push([1,5,9]),faces.push([5,11,4]),faces.push([11,10,2]),faces.push([10,7,6]),faces.push([7,1,8]),faces.push([3,9,4]),faces.push([3,4,2]),faces.push([3,2,6]),faces.push([3,6,8]),faces.push([3,8,9]),faces.push([4,9,5]),faces.push([2,4,11]),faces.push([6,2,10]),faces.push([8,6,7]),faces.push([9,8,1]),faces=_FacesMultiplicator2["default"].multiplyTriangles(this.subdivision,faces,vertices);for(var data=_FacesSeparator2["default"].separate(faces,vertices),newVertices=data.vertices,triangles=data.faces,i=0;i<newVertices.length;i++){var v=newVertices[i];v[0]*=this.scale,v[1]*=this.scale,v[2]*=this.scale}this.bufferIndex(triangles),this.bufferVertex(newVertices,!1,this.attribPositionName)}},{key:"addVertex",value:function(position){var length=Math.sqrt(position[0]*position[0]+position[1]*position[1]+position[2]*position[2]);vertices.push([position[0]/length,position[1]/length,position[2]/length])}},{key:"render",value:function(){}}]),IcoSphere}(_Mesh3["default"]);exports["default"]=IcoSphere,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _getPrototypeOf=__webpack_require__(41),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(52),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(99),_inherits3=_interopRequireDefault(_inherits2),_mcgl=__webpack_require__(36),_mcgl2=_interopRequireDefault(_mcgl),_Mesh2=__webpack_require__(111),_Mesh3=_interopRequireDefault(_Mesh2),gl=void 0,tempArray1=[],tempArray2=[],Line=function(_Mesh){function Line(program,vertices,c){var drawMode=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_mcgl2["default"].GL.gl.TRIANGLES;(0,_classCallCheck3["default"])(this,Line);_mcgl2["default"].gl;gl=_mcgl2["default"].GL;var _this=(0,_possibleConstructorReturn3["default"])(this,(Line.__proto__||(0,_getPrototypeOf2["default"])(Line)).call(this,program,drawMode));_this.compareV3=function(a,b){var aa=6*a,ab=6*b;return this.positions[aa]===this.positions[ab]&&this.positions[aa+1]===this.positions[ab+1]&&this.positions[aa+2]===this.positions[ab+2]},_this.copyV3=function(a,out){out||(out=tempArray1);var aa=6*a;out[0]=this.positions[aa],out[1]=this.positions[aa+1],out[2]=this.positions[aa+2]},_this.widthCallback=c;var vert=[[0,0,0],[.125,.3125,0],[.0625,.25,0],[0,.25,0],[-.125,.275,0],[-.0875,.375,0]];return _this.positions=[],_this.directions=[],_this.indicesArray=[],_this.counters=[],_this.width=[],_this.uvs=[],_this.previous=[],_this.next=[],_this.vert=vertices||vert,_this.line(!0),_this}return(0,_inherits3["default"])(Line,_Mesh),(0,_createClass3["default"])(Line,[{key:"line",value:function(){var needsUpdate=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],v=this.vert;this.positions.length=2*v.length,this.counters.length=2*v.length;var index=0,indexC=0;this.previous.length=this.positions.length,this.next.length=this.positions.length;for(var i=0;i<v.length;i++){if(needsUpdate){var c=i/v.length;this.counters[indexC++]=[c],this.counters[indexC++]=[c]}this.positions[index++]=v[i][0],this.positions[index++]=v[i][1],this.positions[index++]=v[i][2],this.positions[index++]=v[i][0],this.positions[index++]=v[i][1],this.positions[index++]=v[i][2]}this.process(needsUpdate)}},{key:"process",value:function(needsUpdate){var l=this.positions.length/6,index=0,indexN=0;this.compareV3(0,l-1)?this.copyV3(l-2):this.copyV3(0),this.previous[index++]=tempArray1[0],this.previous[index++]=tempArray1[1],this.previous[index++]=tempArray1[2],this.previous[index++]=tempArray1[0],this.previous[index++]=tempArray1[1],this.previous[index++]=tempArray1[2];for(var i=0;i<l;i++)this.copyV3(i,tempArray1),i>0&&(this.next[indexN++]=tempArray1[0],this.next[indexN++]=tempArray1[1],this.next[indexN++]=tempArray1[2],this.next[indexN++]=tempArray1[0],this.next[indexN++]=tempArray1[1],this.next[indexN++]=tempArray1[2],this.previous[index++]=tempArray2[0],this.previous[index++]=tempArray2[1],this.previous[index++]=tempArray2[2],this.previous[index++]=tempArray2[0],this.previous[index++]=tempArray2[1],this.previous[index++]=tempArray2[2]),tempArray2[0]=tempArray1[0],tempArray2[1]=tempArray1[1],tempArray2[2]=tempArray1[2];if(this.compareV3(l-1,0)?this.copyV3(1,tempArray1):this.copyV3(l-1,tempArray1),this.next[indexN++]=tempArray1[0],this.next[indexN++]=tempArray1[1],this.next[indexN++]=tempArray1[2],this.next[indexN++]=tempArray1[0],this.next[indexN++]=tempArray1[1],this.next[indexN++]=tempArray1[2],index=0,this.bufferVertex(this.positions,!1,void 0,!0),this.bufferData(this.next,"aNext",3,!1,!0),this.bufferData(this.previous,"aPrevious",3,!1,!0),needsUpdate){index=0,this.uvs=[];for(var w=void 0,j=0;j<l;j++)w=this.widthCallback?this.widthCallback(j/(l-1)):.1,this.width[index++]=w,this.width[index++]=w,this.uvs.push([j/(l-1),0]),this.uvs.push([j/(l-1),1]);index=0,this.indicesArray=[];for(var j=0;j<l-1;j++){var n=2*j;this.indicesArray[index++]=n,this.indicesArray[index++]=n+1,this.indicesArray[index++]=n+2,this.indicesArray[index++]=n+2,this.indicesArray[index++]=n+1,this.indicesArray[index++]=n+3}index=0,this.directions=[];for(var i=0;i<this.positions.length;i++)i%2===0?this.directions[index++]=[1]:this.directions[index++]=[-1];this.bufferIndex(this.indicesArray,!1),this.bufferData(this.width,"width",1,!1,!0),this.bufferData(this.directions,"direction",1,!1),this.bufferTexCoord(this.uvs,!1),this.bufferData(this.counters,"aCounters",1,!1)}}},{key:"render",value:function(points){var needsUpdate=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.vert=points||this.vert,this.line(needsUpdate)}}]),Line}(_Mesh3["default"]);exports["default"]=Line,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _getPrototypeOf=__webpack_require__(41),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(52),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(99),_inherits3=_interopRequireDefault(_inherits2),_glMatrix=__webpack_require__(25),_mcgl=(_interopRequireDefault(_glMatrix),__webpack_require__(36)),_mcgl2=_interopRequireDefault(_mcgl),_Mesh2=__webpack_require__(111),_Mesh3=_interopRequireDefault(_Mesh2),BigTriangle=function(_Mesh){function BigTriangle(program){var attribPositionName=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"a_position",drawMode=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_mcgl2["default"].GL.gl.TRIANGLES;(0,_classCallCheck3["default"])(this,BigTriangle);var _this=(0,_possibleConstructorReturn3["default"])(this,(BigTriangle.__proto__||(0,_getPrototypeOf2["default"])(BigTriangle)).call(this,program,drawMode));return _this.attribPositionName=attribPositionName,_this.bigTriangle(),_this}return(0,_inherits3["default"])(BigTriangle,_Mesh),(0,_createClass3["default"])(BigTriangle,[{key:"bigTriangle",value:function(){var indices=[2,1,0],positions=[[-1e3,-1e3],[-1e3,4e3],[4e3,-1e3]];this.bufferData(positions,"a_position",2),this.bufferIndex(indices)}},{key:"render",value:function(){}}]),BigTriangle}(_Mesh3["default"]);exports["default"]=BigTriangle,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),_Keyboard=__webpack_require__(121),_Keyboard2=_interopRequireDefault(_Keyboard),_signals=__webpack_require__(122),_signals2=_interopRequireDefault(_signals),Controller=function(){function Controller(){var _this=this;(0,_classCallCheck3["default"])(this,Controller),this.onKeyPressed=new _signals2["default"],this.onTouchStart=new _signals2["default"],this.onTouchEnd=new _signals2["default"],this.keyboard=new _Keyboard2["default"],this.keyboard.onKeyPress("space",function(){_this.onKeyPressed.dispatch("space")}),this.keyboard.onKeyPress("p",function(){_this.onKeyPressed.dispatch("p")}),window.addEventListener("touchstart",function(){_this.onTouchStart.dispatch()},!1),window.addEventListener("touchend",function(){_this.onTouchEnd.dispatch()},!1)}return(0,_createClass3["default"])(Controller,[{key:"update",value:function(){}}]),Controller}();exports["default"]=Controller,module.exports=exports["default"]},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){Keyboard=function(){this._states={up:0,down:1},this._keyCodes={37:{label:"left",state:0,preventBubble:!0},38:{label:"up",state:0,preventBubble:!0},39:{label:"right",state:0,preventBubble:!0},40:{label:"down",state:0,preventBubble:!0},49:{label:"1",state:0,preventBubble:!0},50:{label:"2",state:0,preventBubble:!0},51:{label:"3",state:0,preventBubble:!0},52:{label:"4",state:0,preventBubble:!0},53:{label:"5",state:0,preventBubble:!0},54:{label:"6",state:0,preventBubble:!0},55:{label:"7",state:0,preventBubble:!0},56:{label:"8",state:0,preventBubble:!0},57:{label:"9",state:0,preventBubble:!0},97:{label:"numpad1",state:0,preventBubble:!0},98:{label:"numpad2",state:0,preventBubble:!0},99:{label:"numpad3",state:0,preventBubble:!0},100:{label:"numpad4",state:0,preventBubble:!0},101:{label:"numpad5",state:0,preventBubble:!0},102:{label:"numpad6",state:0,preventBubble:!0},103:{label:"numpad7",state:0,preventBubble:!0},104:{label:"numpad8",state:0,preventBubble:!0},105:{label:"numpad9",state:0,preventBubble:!0},13:{label:"enter",state:0,preventBubble:!1},32:{label:"space",state:0,preventBubble:!0},65:{label:"a",state:0,preventBubble:!0},68:{label:"d",state:0,preventBubble:!0},83:{label:"s",state:0,preventBubble:!0},87:{label:"w",state:0,preventBubble:!0},89:{label:"y",state:0,preventBubble:!0},90:{label:"z",state:0,preventBubble:!0},88:{label:"x",state:0,preventBubble:!0}},this.hash={},this.hashUp={},this.started=!1,this.disabled=!1,this.start(),this.dirty=!1},Keyboard.prototype.start=function(){if(!this.started){this.started=!0;var _this=this;this._onKeyDown=function(event){return _this.processKeyDown(event)},this._onKeyUp=function(event){return _this.processKeyUp(event)},window.addEventListener("keydown",this._onKeyDown,!1),window.addEventListener("keyup",this._onKeyUp,!1)}},Keyboard.prototype.stop=function(){if(this.started){this.started=!1;for(var i in this._keyCodes)this._keyCodes[i].state=this._states.up;this.dirty=!0,window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp)}},Keyboard.prototype.processKeyDown=function(event){if(this.disabled!==!0){var keyCode=event.keyCode;if(this.keyCode=keyCode,this._keyCodes.hasOwnProperty(keyCode)){var Key=this._keyCodes[keyCode];Key.preventBubble&&event.preventDefault(),Key.state!=this._states.down&&(Key.state=this._states.down,this.dirty=!0,this.hash[Key.label]&&this.hash[Key.label](Key))}}},Keyboard.prototype.processKeyUp=function(event){if(this.disabled!==!0){var keyCode=event.keyCode;if(this.keyCode=null,this._keyCodes.hasOwnProperty(keyCode)){var Key=this._keyCodes[keyCode];Key.preventBubble&&event.preventDefault(),Key.state!=this._states.up&&(Key.state=this._states.up,this.dirty=!0,this.hashUp[Key.label]&&this.hashUp[Key.label](Key))}}},Keyboard.prototype.isPressed=function(id){var keyCode=this.getCodeFromLabel(id);return!!keyCode&&this._keyCodes[keyCode].state===this._states.down},Keyboard.prototype.getCodeFromLabel=function(label){for(var t in this._keyCodes)if(this._keyCodes[t].label===label)return t;return!1},Keyboard.prototype.onKeyPress=function(id,onKeyDown){this.hash[id]=onKeyDown},Keyboard.prototype.onKeyRelease=function(id,onKeyUp){this.hashUp[id]=onKeyUp},module.exports=Keyboard}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(global){function SignalBinding(signal,listener,isOnce,listenerContext,priority){this._listener=listener,this._isOnce=isOnce,this.context=listenerContext,this._signal=signal,this._priority=priority||0}function validateListener(listener,fnName){if("function"!=typeof listener)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",fnName))}function Signal(){this._bindings=[],this._prevParams=null;var self=this;this.dispatch=function(){Signal.prototype.dispatch.apply(self,arguments)}}SignalBinding.prototype={active:!0,params:null,execute:function(paramsArr){var handlerReturn,params;return this.active&&this._listener&&(params=this.params?this.params.concat(paramsArr):paramsArr,handlerReturn=this._listener.apply(this.context,params),this._isOnce&&this.detach()),handlerReturn},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},Signal.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(listener,isOnce,listenerContext,priority){var binding,prevIndex=this._indexOfListener(listener,listenerContext);if(prevIndex!==-1){if(binding=this._bindings[prevIndex],binding.isOnce()!==isOnce)throw new Error("You cannot add"+(isOnce?"":"Once")+"() then add"+(isOnce?"Once":"")+"() the same listener without removing the relationship first.")}else binding=new SignalBinding(this,listener,isOnce,listenerContext,priority),this._addBinding(binding);return this.memorize&&this._prevParams&&binding.execute(this._prevParams),binding},_addBinding:function(binding){var n=this._bindings.length;do--n;while(this._bindings[n]&&binding._priority<=this._bindings[n]._priority);this._bindings.splice(n+1,0,binding)},_indexOfListener:function(listener,context){for(var cur,n=this._bindings.length;n--;)if(cur=this._bindings[n],cur._listener===listener&&cur.context===context)return n;return-1},has:function(listener,context){return this._indexOfListener(listener,context)!==-1},add:function(listener,listenerContext,priority){return validateListener(listener,"add"),this._registerListener(listener,!1,listenerContext,priority)},addOnce:function(listener,listenerContext,priority){return validateListener(listener,"addOnce"),this._registerListener(listener,!0,listenerContext,priority)},remove:function(listener,context){validateListener(listener,"remove");var i=this._indexOfListener(listener,context);return i!==-1&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),listener},removeAll:function(){for(var n=this._bindings.length;n--;)this._bindings[n]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(params){if(this.active){var bindings,paramsArr=Array.prototype.slice.call(arguments),n=this._bindings.length;if(this.memorize&&(this._prevParams=paramsArr),n){bindings=this._bindings.slice(),this._shouldPropagate=!0;do n--;while(bindings[n]&&this._shouldPropagate&&bindings[n].execute(paramsArr)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var signals=Signal;signals.Signal=Signal,__WEBPACK_AMD_DEFINE_RESULT__=function(){return signals}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(this)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,module){var Easings=function(){this.updating=!1,this.iterationCount=0,this.tweens=[]};Easings.prototype.killTweensOf=function(obj){for(var i=0;i<this.tweens.length;i++){var t=this.tweens[i];t.obj===obj&&t.obj.id===obj.id&&(t=null,this.tweens.splice(i,1),i--)}},Easings.prototype.to=function(obj,duration,vars,test){var tween={"delete":!1,currentIteration:0,isArray:!1,obj:obj,vars:vars,delay:60*vars.delay||0,isDelayed:!!(vars.delay&&vars.delay>0),duration:60*duration,ease:vars.ease||this.easeLinear
};if(obj instanceof Array){tween.isArray=!0;var varToTween=[];for(var v in vars)if("delay"!==v&&"duration"!==v&&!this.isFunction(vars[v])){for(var object={"var":v,toValue:vars[v]},values=[],i=0;i<obj.length;i++)values.push(obj[i]);object.value=values,varToTween.push(object)}}else{var varToTween=[];for(var v in vars)if("delay"!==v&&"duration"!==v&&!this.isFunction(vars[v])&&"forceTween"!==v){for(var i=0;i<this.tweens.length;i++){var t=this.tweens[i];if(t.obj===obj)for(var k=0;k<t.props.length;k++){var variableToTween=t.props[k];variableToTween["var"]!==v||0!==tween.delay&&!tween.vars.forceTween||(t["delete"]=!0,this.tweens.splice(i,1),i--)}}varToTween.push({"var":v,value:obj[v],toValue:vars[v]})}}tween.props=varToTween,this.tweens.push(tween),this.updating||(this.updating=!0)},Easings.prototype.isFunction=function(obj){return!!(obj&&obj.constructor&&obj.call&&obj.apply)},Easings.prototype.updateArray=function(tween){var o=tween;if(o.delay>0)o.delay--;else{for(var i=0;i<o.obj.length;i++){o.obj[i];o.obj[i]=o.ease(o.currentIteration,o.props[0].value[i],o.props[0].toValue[i]-o.props[0].value[i],o.duration)}o.currentIteration++,o.currentIteration>o.duration&&(o.vars.onComplete&&o.vars.onComplete(),o["delete"]=!0)}},Easings.prototype.update=function(){if(this.updating){for(var i=0;i<this.tweens.length;i++){var o=this.tweens[i];if(o.isArray)this.updateArray(o);else if(o.isDelayed){if(o.delay>0)o.delay-=1;else if(o.delay<=0){o.isDelayed=!1;for(var k=0;k<o.props.length;k++){var e=o.props[k];e.value=o.obj[e["var"]]}}}else{for(var k=0;k<o.props.length;k++){var e=o.props[k];o.obj[e["var"]]=o.ease(o.currentIteration,e.value,e.toValue-e.value,o.duration)}o.vars.onUpdate&&o.vars.onUpdate.apply(this,o.vars.onUpdateParams),o.currentIteration+=1,o.currentIteration>o.duration&&(o.vars.onComplete&&o.vars.onComplete.apply(this,o.vars.onCompleteParams),o["delete"]=!0)}}for(var i=0;i<this.tweens.length;i++){var o=this.tweens[i];o["delete"]&&(o=null,this.tweens.splice(i,1),i--)}0===this.tweens.length&&(this.updating=!1)}},Easings.prototype.easeLinear=function(t,b,c,d){return t/=d,c*t+b},Easings.prototype.easeInSine=function(t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b},Easings.prototype.easeOutSine=function(t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b},Easings.prototype.easeInExpo=function(t,b,c,d){return c*Math.pow(2,10*(t/d-1))+b},Easings.prototype.elasticOutSoft=function(t,b,c,d){var s=1.0158,p=0,a=c;if(0==t)return b;if(1==(t/=d))return b+c;if(p||(p=.3*d),a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b},Easings.prototype.easeOutBack=function(t,b,c,d){var s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},Easings.prototype.easeOutBackSoft=function(t,b,c,d){var s=1.30158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},Easings.prototype.elasticOut=function(t,b,c,d){var s=1.70158,p=0,a=c;if(0==t)return b;if(1==(t/=d))return b+c;if(p||(p=.3*d),a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b},Easings.prototype.easeInCubic=function(t,b,c,d){return t/=d,c*t*t*t+b},Easings.prototype.easeOutCubic=function(t,b,c,d){return t/=d,t--,c*(t*t*t+1)+b},Easings.prototype.easeInOutSine=function(t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b},Easings.prototype.easeInBack=function(x,t,b,c,d,s){return void 0==s&&(s=1.70158),c*(t/=d)*t*((s+1)*t-s)+b},Easings.prototype.easeInOutExpo=function(t,b,c,d){return t/=d/2,t<1?c/2*Math.pow(2,10*(t-1))+b:(t--,c/2*(-Math.pow(2,-10*t)+2)+b)},Easings.prototype.easeInOutQuint=function(t,b,c,d){return t/=d/2,t<1?c/2*t*t*t*t*t+b:(t-=2,c/2*(t*t*t*t*t+2)+b)},Easings.prototype.easeInOutCirc=function(t,b,c,d){return t/=d/2,t<1?-c/2*(Math.sqrt(1-t*t)-1)+b:(t-=2,c/2*(Math.sqrt(1-t*t)+1)+b)},Easings.prototype.easeOutCirc=function(t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},Easings.instance=new Easings,module.exports=Easings}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),_mcgl=__webpack_require__(36),_mcgl2=_interopRequireDefault(_mcgl),gl=void 0,GL=void 0,FrameBuffer=function(){function FrameBuffer(w,h){(0,_classCallCheck3["default"])(this,FrameBuffer),gl=_mcgl2["default"].GL.gl,GL=_mcgl2["default"].GL,this.textures=[],this.texture=gl.createTexture(),this.gltexture=new _mcgl2["default"].Texture(this.texture,(!0)),this.textures.push(this.gltexture),this.isPowerOf2(w)&&this.isPowerOf2(h),this.frameBuffer=gl.createFramebuffer(),gl.bindFramebuffer(gl.FRAMEBUFFER,this.frameBuffer);GL.getExtension("OES_texture_float");if(!GL.getExtension("OES_texture_float"))throw new Error("float textures not supported");var type=gl.UNSIGNED_BYTE,extHalfFloat=GL.getExtension("OES_texture_half_float");GL.getExtension("OES_texture_float_linear"),_mcgl2["default"].GL.checkExtension("OES_texture_float")?type=gl.FLOAT:extHalfFloat&&(type=extHalfFloat.HALF_FLOAT_OES),_mcgl2["default"].GL.isMobile&&type===gl.FLOAT&&extHalfFloat&&(type=extHalfFloat.HALF_FLOAT_OES),gl.bindTexture(gl.TEXTURE_2D,this.texture),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,w,h,0,gl.RGBA,type,null),this.renderbuffer=gl.createRenderbuffer(),gl.bindRenderbuffer(gl.RENDERBUFFER,this.renderbuffer),gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_COMPONENT16,w,h),gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,this.texture,0),gl.bindTexture(gl.TEXTURE_2D,null),gl.bindRenderbuffer(gl.RENDERBUFFER,null),gl.bindFramebuffer(gl.FRAMEBUFFER,null)}return(0,_createClass3["default"])(FrameBuffer,[{key:"isPowerOf2",value:function(value){return 0==(value&value-1)}},{key:"bind",value:function(w,h){this.w=w||this.w,this.h=h||this.h,gl.bindFramebuffer(gl.FRAMEBUFFER,this.frameBuffer),gl.viewport(0,0,this.w,this.h)}},{key:"unbind",value:function(){gl.bindFramebuffer(gl.FRAMEBUFFER,null),gl.viewport(0,0,gl.canvas.width,gl.canvas.height)}},{key:"clear",value:function(){this.bind(),gl.clear(0,0,0,0)}}]),FrameBuffer}();exports["default"]=FrameBuffer,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _getPrototypeOf=__webpack_require__(41),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(52),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_get2=__webpack_require__(126),_get3=_interopRequireDefault(_get2),_inherits2=__webpack_require__(99),_inherits3=_interopRequireDefault(_inherits2),_Mcgl=__webpack_require__(36),_Mcgl2=_interopRequireDefault(_Mcgl),_GLShader=__webpack_require__(35),_GLShader2=_interopRequireDefault(_GLShader),_Batch2=__webpack_require__(130),_Batch3=_interopRequireDefault(_Batch2),_bigTriangle=__webpack_require__(131),_bigTriangle2=_interopRequireDefault(_bigTriangle),_copy=__webpack_require__(132),_copy2=_interopRequireDefault(_copy),BatchCopy=function(_Batch){function BatchCopy(){(0,_classCallCheck3["default"])(this,BatchCopy);var shader=new _GLShader2["default"](_bigTriangle2["default"],_copy2["default"]),mesh=new _Mcgl2["default"].geom.BigTriangle(shader.shaderProgram),_this=(0,_possibleConstructorReturn3["default"])(this,(BatchCopy.__proto__||(0,_getPrototypeOf2["default"])(BatchCopy)).call(this,mesh,shader));return shader.bind(),shader.uniform("texture","uniform1i",0),_this}return(0,_inherits3["default"])(BatchCopy,_Batch),(0,_createClass3["default"])(BatchCopy,[{key:"draw",value:function(texture){this.shader.bind(),texture.bind(),(0,_get3["default"])(BatchCopy.prototype.__proto__||(0,_getPrototypeOf2["default"])(BatchCopy.prototype),"draw",this).call(this)}}]),BatchCopy}(_Batch3["default"]);exports["default"]=BatchCopy,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0;var _getPrototypeOf=__webpack_require__(41),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_getOwnPropertyDescriptor=__webpack_require__(127),_getOwnPropertyDescriptor2=_interopRequireDefault(_getOwnPropertyDescriptor);exports["default"]=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=(0,_getOwnPropertyDescriptor2["default"])(object,property);if(void 0===desc){var parent=(0,_getPrototypeOf2["default"])(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)}},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(128),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(129);var $Object=__webpack_require__(11).Object;module.exports=function(it,key){return $Object.getOwnPropertyDescriptor(it,key)}},function(module,exports,__webpack_require__){var toIObject=__webpack_require__(68),$getOwnPropertyDescriptor=__webpack_require__(95).f;__webpack_require__(51)("getOwnPropertyDescriptor",function(){return function(it,key){return $getOwnPropertyDescriptor(toIObject(it),key)}})},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(3),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(5),_createClass3=_interopRequireDefault(_createClass2),_GLTool=__webpack_require__(4),_GLTool2=_interopRequireDefault(_GLTool),Batch=function(){function Batch(mMesh,mShader){(0,_classCallCheck3["default"])(this,Batch),this._mesh=mMesh,this._shader=mShader}return(0,_createClass3["default"])(Batch,[{key:"draw",value:function(){this._shader.bind(),_GLTool2["default"].draw(this.mesh)}},{key:"mesh",get:function(){return this._mesh}},{key:"shader",get:function(){return this._shader}}]),Batch}();exports["default"]=Batch,module.exports=exports["default"]},function(module,exports){module.exports="// bigTriangle.vert\n\n#define SHADER_NAME BIG_TRIANGLE_VERTEX\n\nprecision mediump float;\n#define GLSLIFY 1\nattribute vec2 a_position;\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n    gl_Position = vec4(a_position, 0.0, 1.0);\n    vTextureCoord = a_position * .5 + .5;\n}\n"},function(module,exports){module.exports="// copy.frag\n\n#define SHADER_NAME COPY_FRAGMENT\n\nprecision mediump float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = texture2D(texture, vTextureCoord);\n    // gl_FragColor = vec4(vTextureCoord, 0.0, 1.0);\n}\n"},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _promise=__webpack_require__(134),_promise2=_interopRequireDefault(_promise),_classCallCheck2=__webpack_require__(199),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(200),_createClass3=_interopRequireDefault(_createClass2),_mcgl=__webpack_require__(2),_mcgl2=_interopRequireDefault(_mcgl),_signals=__webpack_require__(204),_signals2=_interopRequireDefault(_signals),_path=__webpack_require__(205),_path2=_interopRequireDefault(_path),_Cache=__webpack_require__(210),_Cache2=_interopRequireDefault(_Cache),_resourceLoader=__webpack_require__(211),_resourceLoader2=_interopRequireDefault(_resourceLoader),_fontfaceobserver=__webpack_require__(220),_fontfaceobserver2=_interopRequireDefault(_fontfaceobserver),Loader=function(){function Loader(){(0,_classCallCheck3["default"])(this,Loader),this.addAssets=function(assets){return this.assetsToLoad=this.assetsToLoad.concat(assets),this},this._loadAssets=function(){return 0===this.assetsToLoad.length?void this._onComplete():(this.assetLoader=new _resourceLoader2["default"],this.assetLoader.add(this.assetsToLoad),this.assetLoader.on("progress",this._onProgress,this),void this.assetLoader.load(this._onComplete.bind(this)))},this.crossdomain=!1,this.assetsToLoad=[],window.XDomainRequest&&this.crossdomain?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=function(){},this.ajaxRequest.ontimeout=function(){},this.ajaxRequest.onprogress=function(){}):window.XMLHttpRequest&&(this.ajaxRequest=new window.XMLHttpRequest),this.ajaxRequest.onload=this._onFileLoaded.bind(this),this.ajaxRequest.onreadystatechange=function(e){},this.fileCount=0,this.filesToLoad=[],this.fontsToLoad=[],this.soundsToLoad=[],this.customToLoad=[],this.onComplete=new _signals2["default"],this.onProgress=new _signals2["default"]}return(0,_createClass3["default"])(Loader,[{key:"addFonts",value:function(fonts){return this.fontsToLoad=this.fontsToLoad.concat(fonts),this}},{key:"addJson",value:function(url,id){var id=id||_path2["default"].basename(url,_path2["default"].extname(url)),fileData={url:url,id:id,type:Loader.JSON};return this.filesToLoad.push(fileData),this}},{key:"addCSS",value:function(url){var link=document.createElement("link");return link.type="text/css",link.rel="stylesheet",link.href=url,document.getElementsByTagName("head")[0].appendChild(link),this}},{key:"load",value:function(){this._loadFonts()}},{key:"_loadFiles",value:function(){this.fileCount=0,this.filesToLoad.length?this._loadNextFile():this._loadAssets()}},{key:"_loadNextFile",value:function(){var fileData=this.filesToLoad[this.fileCount];fileData.type===Loader.CUSTOM?(fileData.object.onLoaded.addOnce(this._onFileLoaded,this),fileData.object.load()):(this.ajaxRequest.open("GET",fileData.url,!0),this.ajaxRequest.send())}},{key:"_onFileLoaded",value:function(){var fileData=this.filesToLoad[this.fileCount];if(fileData.type===Loader.CUSTOM);else if(0===this.ajaxRequest.status||200===this.ajaxRequest.status)switch(fileData.type){case Loader.TEXT:var text=this.ajaxRequest.responseText;_Cache2["default"].addText(text,fileData.id);break;case Loader.JSON:var jsonObject=JSON.parse(this.ajaxRequest.responseText);_Cache2["default"].addJson(jsonObject,fileData.id)}this.fileCount++,this._onProgress(),this.fileCount===this.filesToLoad.length?this._loadAssets():this._loadNextFile()}},{key:"_getFonts",value:function(fonts){for(var a=[],i=0;i<fonts.length;i++)a.push(fonts[i].load());return a}},{key:"_loadFonts",value:function(){var _this=this;if(0===this.fontsToLoad.length)return void this._loadFiles();for(var fonts=[],i=0;i<this.fontsToLoad.length;i++){var f=new _fontfaceobserver2["default"](this.fontsToLoad[i]);fonts.push(f)}_promise2["default"].all(this._getFonts(fonts)).then(function(fonts){_this._loadFiles()},function(){_this._loadFiles()})}},{key:"_onComplete",value:function(l,r){_mcgl2["default"].loadedResources=r,this.onProgress.dispatch(1),this.onComplete.dispatch()}},{key:"_onProgress",value:function(){var loaded=(this.filesToLoad.length+this.assetsToLoad.length,this.fileCount);this.assetLoader&&(loaded=this.assetLoader.progress),this.onProgress.dispatch(.01*loaded)}}]),Loader}();Loader.TEXT=0,Loader.JSON=1,Loader.CUSTOM=2,exports["default"]=Loader,module.exports=exports["default"]},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(135),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(136),__webpack_require__(137),__webpack_require__(181),__webpack_require__(185),module.exports=__webpack_require__(145).Promise},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var $at=__webpack_require__(138)(!0);__webpack_require__(141)(String,"String",function(iterated){this._t=String(iterated),this._i=0},function(){var point,O=this._t,index=this._i;return index>=O.length?{value:void 0,done:!0}:(point=$at(O,index),this._i+=point.length,{value:point,done:!1})})},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(139),defined=__webpack_require__(140);module.exports=function(TO_STRING){return function(that,pos){var a,b,s=String(defined(that)),i=toInteger(pos),l=s.length;return i<0||i>=l?TO_STRING?"":void 0:(a=s.charCodeAt(i),a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536)}}},function(module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},function(module,exports){module.exports=function(it){if(void 0==it)throw TypeError("Can't call method on  "+it);return it}},function(module,exports,__webpack_require__){"use strict";var LIBRARY=__webpack_require__(142),$export=__webpack_require__(143),redefine=__webpack_require__(158),hide=__webpack_require__(148),has=__webpack_require__(159),Iterators=__webpack_require__(160),$iterCreate=__webpack_require__(161),setToStringTag=__webpack_require__(177),getPrototypeOf=__webpack_require__(179),ITERATOR=__webpack_require__(178)("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values",returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var methods,key,IteratorPrototype,getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function(){return new Constructor(this,kind)};case VALUES:return function(){return new Constructor(this,kind)}}return function(){return new Constructor(this,kind)}},TAG=NAME+" Iterator",DEF_VALUES=DEFAULT==VALUES,VALUES_BUG=!1,proto=Base.prototype,$native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT],$default=$native||getMethod(DEFAULT),$entries=DEFAULT?DEF_VALUES?getMethod("entries"):$default:void 0,$anyNative="Array"==NAME?proto.entries||$native:$native;if($anyNative&&(IteratorPrototype=getPrototypeOf($anyNative.call(new Base)),IteratorPrototype!==Object.prototype&&(setToStringTag(IteratorPrototype,TAG,!0),LIBRARY||has(IteratorPrototype,ITERATOR)||hide(IteratorPrototype,ITERATOR,returnThis))),DEF_VALUES&&$native&&$native.name!==VALUES&&(VALUES_BUG=!0,$default=function(){return $native.call(this)}),LIBRARY&&!FORCED||!BUGGY&&!VALUES_BUG&&proto[ITERATOR]||hide(proto,ITERATOR,$default),Iterators[NAME]=$default,Iterators[TAG]=returnThis,DEFAULT)if(methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:$entries},FORCED)for(key in methods)key in proto||redefine(proto,key,methods[key]);else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods);return methods}},function(module,exports){module.exports=!0},function(module,exports,__webpack_require__){var global=__webpack_require__(144),core=__webpack_require__(145),ctx=__webpack_require__(146),hide=__webpack_require__(148),PROTOTYPE="prototype",$export=function(type,name,source){var key,own,out,IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,IS_WRAP=type&$export.W,exports=IS_GLOBAL?core:core[name]||(core[name]={}),expProto=exports[PROTOTYPE],target=IS_GLOBAL?global:IS_STATIC?global[name]:(global[name]||{})[PROTOTYPE];IS_GLOBAL&&(source=name);for(key in source)own=!IS_FORCED&&target&&void 0!==target[key],own&&key in exports||(out=own?target[key]:source[key],exports[key]=IS_GLOBAL&&"function"!=typeof target[key]?source[key]:IS_BIND&&own?ctx(out,global):IS_WRAP&&target[key]==out?function(C){var F=function(a,b,c){if(this instanceof C){switch(arguments.length){case 0:return new C;case 1:return new C(a);case 2:return new C(a,b)}return new C(a,b,c)}return C.apply(this,arguments)};return F[PROTOTYPE]=C[PROTOTYPE],F}(out):IS_PROTO&&"function"==typeof out?ctx(Function.call,out):out,IS_PROTO&&((exports.virtual||(exports.virtual={}))[key]=out,type&$export.R&&expProto&&!expProto[key]&&hide(expProto,key,out)))};$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128,module.exports=$export},function(module,exports){var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global)},function(module,exports){var core=module.exports={version:"2.4.0"};"number"==typeof __e&&(__e=core)},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(147);module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},function(module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(it+" is not a function!");return it}},function(module,exports,__webpack_require__){var dP=__webpack_require__(149),createDesc=__webpack_require__(157);module.exports=__webpack_require__(153)?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){return object[key]=value,object}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(150),IE8_DOM_DEFINE=__webpack_require__(152),toPrimitive=__webpack_require__(156),dP=Object.defineProperty;exports.f=__webpack_require__(153)?Object.defineProperty:function(O,P,Attributes){if(anObject(O),P=toPrimitive(P,!0),anObject(Attributes),IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");return"value"in Attributes&&(O[P]=Attributes.value),O}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(151);module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},function(module,exports){module.exports=function(it){return"object"==typeof it?null!==it:"function"==typeof it}},function(module,exports,__webpack_require__){module.exports=!__webpack_require__(153)&&!__webpack_require__(154)(function(){return 7!=Object.defineProperty(__webpack_require__(155)("div"),"a",{get:function(){return 7}}).a})},function(module,exports,__webpack_require__){module.exports=!__webpack_require__(154)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return!0}}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(151),document=__webpack_require__(144).document,is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(151);module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;if("function"==typeof(fn=it.valueOf)&&!isObject(val=fn.call(it)))return val;if(!S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},function(module,exports){module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value:value}}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(148)},function(module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},function(module,exports){module.exports={}},function(module,exports,__webpack_require__){"use strict";var create=__webpack_require__(162),descriptor=__webpack_require__(157),setToStringTag=__webpack_require__(177),IteratorPrototype={};__webpack_require__(148)(IteratorPrototype,__webpack_require__(178)("iterator"),function(){return this}),module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)}),setToStringTag(Constructor,NAME+" Iterator")}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(150),dPs=__webpack_require__(163),enumBugKeys=__webpack_require__(175),IE_PROTO=__webpack_require__(172)("IE_PROTO"),Empty=function(){},PROTOTYPE="prototype",createDict=function(){var iframeDocument,iframe=__webpack_require__(155)("iframe"),i=enumBugKeys.length,lt="<",gt=">";for(iframe.style.display="none",__webpack_require__(176).appendChild(iframe),iframe.src="javascript:",iframeDocument=iframe.contentWindow.document,iframeDocument.open(),iframeDocument.write(lt+"script"+gt+"document.F=Object"+lt+"/script"+gt),iframeDocument.close(),createDict=iframeDocument.F;i--;)delete createDict[PROTOTYPE][enumBugKeys[i]];return createDict()};module.exports=Object.create||function(O,Properties){var result;return null!==O?(Empty[PROTOTYPE]=anObject(O),result=new Empty,Empty[PROTOTYPE]=null,result[IE_PROTO]=O):result=createDict(),void 0===Properties?result:dPs(result,Properties)}},function(module,exports,__webpack_require__){var dP=__webpack_require__(149),anObject=__webpack_require__(150),getKeys=__webpack_require__(164);module.exports=__webpack_require__(153)?Object.defineProperties:function(O,Properties){anObject(O);for(var P,keys=getKeys(Properties),length=keys.length,i=0;length>i;)dP.f(O,P=keys[i++],Properties[P]);return O}},function(module,exports,__webpack_require__){var $keys=__webpack_require__(165),enumBugKeys=__webpack_require__(175);module.exports=Object.keys||function(O){return $keys(O,enumBugKeys)}},function(module,exports,__webpack_require__){var has=__webpack_require__(159),toIObject=__webpack_require__(166),arrayIndexOf=__webpack_require__(169)(!1),IE_PROTO=__webpack_require__(172)("IE_PROTO");module.exports=function(object,names){var key,O=toIObject(object),i=0,result=[];for(key in O)key!=IE_PROTO&&has(O,key)&&result.push(key);for(;names.length>i;)has(O,key=names[i++])&&(~arrayIndexOf(result,key)||result.push(key));return result}},function(module,exports,__webpack_require__){var IObject=__webpack_require__(167),defined=__webpack_require__(140);module.exports=function(it){return IObject(defined(it))}},function(module,exports,__webpack_require__){var cof=__webpack_require__(168);module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return"String"==cof(it)?it.split(""):Object(it)}},function(module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},function(module,exports,__webpack_require__){var toIObject=__webpack_require__(166),toLength=__webpack_require__(170),toIndex=__webpack_require__(171);module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var value,O=toIObject($this),length=toLength(O.length),index=toIndex(fromIndex,length);if(IS_INCLUDES&&el!=el){for(;length>index;)if(value=O[index++],value!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(139),min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(139),max=Math.max,min=Math.min;module.exports=function(index,length){return index=toInteger(index),index<0?max(index+length,0):min(index,length)}},function(module,exports,__webpack_require__){var shared=__webpack_require__(173)("keys"),uid=__webpack_require__(174);module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},function(module,exports,__webpack_require__){var global=__webpack_require__(144),SHARED="__core-js_shared__",store=global[SHARED]||(global[SHARED]={});module.exports=function(key){return store[key]||(store[key]={})}},function(module,exports){var id=0,px=Math.random();module.exports=function(key){return"Symbol(".concat(void 0===key?"":key,")_",(++id+px).toString(36))}},function(module,exports){module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(144).document&&document.documentElement},function(module,exports,__webpack_require__){var def=__webpack_require__(149).f,has=__webpack_require__(159),TAG=__webpack_require__(178)("toStringTag");module.exports=function(it,tag,stat){it&&!has(it=stat?it:it.prototype,TAG)&&def(it,TAG,{configurable:!0,value:tag})}},function(module,exports,__webpack_require__){var store=__webpack_require__(173)("wks"),uid=__webpack_require__(174),Symbol=__webpack_require__(144).Symbol,USE_SYMBOL="function"==typeof Symbol,$exports=module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:uid)("Symbol."+name))};$exports.store=store},function(module,exports,__webpack_require__){var has=__webpack_require__(159),toObject=__webpack_require__(180),IE_PROTO=__webpack_require__(172)("IE_PROTO"),ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){return O=toObject(O),has(O,IE_PROTO)?O[IE_PROTO]:"function"==typeof O.constructor&&O instanceof O.constructor?O.constructor.prototype:O instanceof Object?ObjectProto:null}},function(module,exports,__webpack_require__){var defined=__webpack_require__(140);module.exports=function(it){return Object(defined(it))}},function(module,exports,__webpack_require__){__webpack_require__(182);for(var global=__webpack_require__(144),hide=__webpack_require__(148),Iterators=__webpack_require__(160),TO_STRING_TAG=__webpack_require__(178)("toStringTag"),collections=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],i=0;i<5;i++){var NAME=collections[i],Collection=global[NAME],proto=Collection&&Collection.prototype;proto&&!proto[TO_STRING_TAG]&&hide(proto,TO_STRING_TAG,NAME),Iterators[NAME]=Iterators.Array}},function(module,exports,__webpack_require__){"use strict";var addToUnscopables=__webpack_require__(183),step=__webpack_require__(184),Iterators=__webpack_require__(160),toIObject=__webpack_require__(166);module.exports=__webpack_require__(141)(Array,"Array",function(iterated,kind){this._t=toIObject(iterated),this._i=0,this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;return!O||index>=O.length?(this._t=void 0,step(1)):"keys"==kind?step(0,index):"values"==kind?step(0,O[index]):step(0,[index,O[index]])},"values"),Iterators.Arguments=Iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries")},function(module,exports){module.exports=function(){}},function(module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},function(module,exports,__webpack_require__){"use strict";var Internal,GenericPromiseCapability,Wrapper,LIBRARY=__webpack_require__(142),global=__webpack_require__(144),ctx=__webpack_require__(146),classof=__webpack_require__(186),$export=__webpack_require__(143),isObject=__webpack_require__(151),aFunction=__webpack_require__(147),anInstance=__webpack_require__(187),forOf=__webpack_require__(188),speciesConstructor=__webpack_require__(192),task=__webpack_require__(193).set,microtask=__webpack_require__(195)(),PROMISE="Promise",TypeError=global.TypeError,process=global.process,$Promise=global[PROMISE],process=global.process,isNode="process"==classof(process),empty=function(){},USE_NATIVE=!!function(){
try{var promise=$Promise.resolve(1),FakePromise=(promise.constructor={})[__webpack_require__(178)("species")]=function(exec){exec(empty,empty)};return(isNode||"function"==typeof PromiseRejectionEvent)&&promise.then(empty)instanceof FakePromise}catch(e){}}(),sameConstructor=function(a,b){return a===b||a===$Promise&&b===Wrapper},isThenable=function(it){var then;return!(!isObject(it)||"function"!=typeof(then=it.then))&&then},newPromiseCapability=function(C){return sameConstructor($Promise,C)?new PromiseCapability(C):new GenericPromiseCapability(C)},PromiseCapability=GenericPromiseCapability=function(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(void 0!==resolve||void 0!==reject)throw TypeError("Bad Promise constructor");resolve=$$resolve,reject=$$reject}),this.resolve=aFunction(resolve),this.reject=aFunction(reject)},perform=function(exec){try{exec()}catch(e){return{error:e}}},notify=function(promise,isReject){if(!promise._n){promise._n=!0;var chain=promise._c;microtask(function(){for(var value=promise._v,ok=1==promise._s,i=0,run=function(reaction){var result,then,handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,domain=reaction.domain;try{handler?(ok||(2==promise._h&&onHandleUnhandled(promise),promise._h=1),handler===!0?result=value:(domain&&domain.enter(),result=handler(value),domain&&domain.exit()),result===reaction.promise?reject(TypeError("Promise-chain cycle")):(then=isThenable(result))?then.call(result,resolve,reject):resolve(result)):reject(value)}catch(e){reject(e)}};chain.length>i;)run(chain[i++]);promise._c=[],promise._n=!1,isReject&&!promise._h&&onUnhandled(promise)})}},onUnhandled=function(promise){task.call(global,function(){var abrupt,handler,console,value=promise._v;if(isUnhandled(promise)&&(abrupt=perform(function(){isNode?process.emit("unhandledRejection",value,promise):(handler=global.onunhandledrejection)?handler({promise:promise,reason:value}):(console=global.console)&&console.error&&console.error("Unhandled promise rejection",value)}),promise._h=isNode||isUnhandled(promise)?2:1),promise._a=void 0,abrupt)throw abrupt.error})},isUnhandled=function(promise){if(1==promise._h)return!1;for(var reaction,chain=promise._a||promise._c,i=0;chain.length>i;)if(reaction=chain[i++],reaction.fail||!isUnhandled(reaction.promise))return!1;return!0},onHandleUnhandled=function(promise){task.call(global,function(){var handler;isNode?process.emit("rejectionHandled",promise):(handler=global.onrejectionhandled)&&handler({promise:promise,reason:promise._v})})},$reject=function(value){var promise=this;promise._d||(promise._d=!0,promise=promise._w||promise,promise._v=value,promise._s=2,promise._a||(promise._a=promise._c.slice()),notify(promise,!0))},$resolve=function(value){var then,promise=this;if(!promise._d){promise._d=!0,promise=promise._w||promise;try{if(promise===value)throw TypeError("Promise can't be resolved itself");(then=isThenable(value))?microtask(function(){var wrapper={_w:promise,_d:!1};try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1))}catch(e){$reject.call(wrapper,e)}}):(promise._v=value,promise._s=1,notify(promise,!1))}catch(e){$reject.call({_w:promise,_d:!1},e)}}};USE_NATIVE||($Promise=function(executor){anInstance(this,$Promise,PROMISE,"_h"),aFunction(executor),Internal.call(this);try{executor(ctx($resolve,this,1),ctx($reject,this,1))}catch(err){$reject.call(this,err)}},Internal=function(executor){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},Internal.prototype=__webpack_require__(196)($Promise.prototype,{then:function(onFulfilled,onRejected){var reaction=newPromiseCapability(speciesConstructor(this,$Promise));return reaction.ok="function"!=typeof onFulfilled||onFulfilled,reaction.fail="function"==typeof onRejected&&onRejected,reaction.domain=isNode?process.domain:void 0,this._c.push(reaction),this._a&&this._a.push(reaction),this._s&&notify(this,!1),reaction.promise},"catch":function(onRejected){return this.then(void 0,onRejected)}}),PromiseCapability=function(){var promise=new Internal;this.promise=promise,this.resolve=ctx($resolve,promise,1),this.reject=ctx($reject,promise,1)}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:$Promise}),__webpack_require__(177)($Promise,PROMISE),__webpack_require__(197)(PROMISE),Wrapper=__webpack_require__(145)[PROMISE],$export($export.S+$export.F*!USE_NATIVE,PROMISE,{reject:function(r){var capability=newPromiseCapability(this),$$reject=capability.reject;return $$reject(r),capability.promise}}),$export($export.S+$export.F*(LIBRARY||!USE_NATIVE),PROMISE,{resolve:function(x){if(x instanceof $Promise&&sameConstructor(x.constructor,this))return x;var capability=newPromiseCapability(this),$$resolve=capability.resolve;return $$resolve(x),capability.promise}}),$export($export.S+$export.F*!(USE_NATIVE&&__webpack_require__(198)(function(iter){$Promise.all(iter)["catch"](empty)})),PROMISE,{all:function(iterable){var C=this,capability=newPromiseCapability(C),resolve=capability.resolve,reject=capability.reject,abrupt=perform(function(){var values=[],index=0,remaining=1;forOf(iterable,!1,function(promise){var $index=index++,alreadyCalled=!1;values.push(void 0),remaining++,C.resolve(promise).then(function(value){alreadyCalled||(alreadyCalled=!0,values[$index]=value,--remaining||resolve(values))},reject)}),--remaining||resolve(values)});return abrupt&&reject(abrupt.error),capability.promise},race:function(iterable){var C=this,capability=newPromiseCapability(C),reject=capability.reject,abrupt=perform(function(){forOf(iterable,!1,function(promise){C.resolve(promise).then(capability.resolve,reject)})});return abrupt&&reject(abrupt.error),capability.promise}})},function(module,exports,__webpack_require__){var cof=__webpack_require__(168),TAG=__webpack_require__(178)("toStringTag"),ARG="Arguments"==cof(function(){return arguments}()),tryGet=function(it,key){try{return it[key]}catch(e){}};module.exports=function(it){var O,T,B;return void 0===it?"Undefined":null===it?"Null":"string"==typeof(T=tryGet(O=Object(it),TAG))?T:ARG?cof(O):"Object"==(B=cof(O))&&"function"==typeof O.callee?"Arguments":B}},function(module,exports){module.exports=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||void 0!==forbiddenField&&forbiddenField in it)throw TypeError(name+": incorrect invocation!");return it}},function(module,exports,__webpack_require__){var ctx=__webpack_require__(146),call=__webpack_require__(189),isArrayIter=__webpack_require__(190),anObject=__webpack_require__(150),toLength=__webpack_require__(170),getIterFn=__webpack_require__(191),BREAK={},RETURN={},exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var length,step,iterator,result,iterFn=ITERATOR?function(){return iterable}:getIterFn(iterable),f=ctx(fn,that,entries?2:1),index=0;if("function"!=typeof iterFn)throw TypeError(iterable+" is not iterable!");if(isArrayIter(iterFn)){for(length=toLength(iterable.length);length>index;index++)if(result=entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index]),result===BREAK||result===RETURN)return result}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;)if(result=call(iterator,f,step.value,entries),result===BREAK||result===RETURN)return result};exports.BREAK=BREAK,exports.RETURN=RETURN},function(module,exports,__webpack_require__){var anObject=__webpack_require__(150);module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator["return"];throw void 0!==ret&&anObject(ret.call(iterator)),e}}},function(module,exports,__webpack_require__){var Iterators=__webpack_require__(160),ITERATOR=__webpack_require__(178)("iterator"),ArrayProto=Array.prototype;module.exports=function(it){return void 0!==it&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},function(module,exports,__webpack_require__){var classof=__webpack_require__(186),ITERATOR=__webpack_require__(178)("iterator"),Iterators=__webpack_require__(160);module.exports=__webpack_require__(145).getIteratorMethod=function(it){if(void 0!=it)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(150),aFunction=__webpack_require__(147),SPECIES=__webpack_require__(178)("species");module.exports=function(O,D){var S,C=anObject(O).constructor;return void 0===C||void 0==(S=anObject(C)[SPECIES])?D:aFunction(S)}},function(module,exports,__webpack_require__){var defer,channel,port,ctx=__webpack_require__(146),invoke=__webpack_require__(194),html=__webpack_require__(176),cel=__webpack_require__(155),global=__webpack_require__(144),process=global.process,setTask=global.setImmediate,clearTask=global.clearImmediate,MessageChannel=global.MessageChannel,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id],fn()}},listener=function(event){run.call(event.data)};setTask&&clearTask||(setTask=function(fn){for(var args=[],i=1;arguments.length>i;)args.push(arguments[i++]);return queue[++counter]=function(){invoke("function"==typeof fn?fn:Function(fn),args)},defer(counter),counter},clearTask=function(id){delete queue[id]},"process"==__webpack_require__(168)(process)?defer=function(id){process.nextTick(ctx(run,id,1))}:MessageChannel?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener,defer=ctx(port.postMessage,port,1)):global.addEventListener&&"function"==typeof postMessage&&!global.importScripts?(defer=function(id){global.postMessage(id+"","*")},global.addEventListener("message",listener,!1)):defer=ONREADYSTATECHANGE in cel("script")?function(id){html.appendChild(cel("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run.call(id)}}:function(id){setTimeout(ctx(run,id,1),0)}),module.exports={set:setTask,clear:clearTask}},function(module,exports){module.exports=function(fn,args,that){var un=void 0===that;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},function(module,exports,__webpack_require__){var global=__webpack_require__(144),macrotask=__webpack_require__(193).set,Observer=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,isNode="process"==__webpack_require__(168)(process);module.exports=function(){var head,last,notify,flush=function(){var parent,fn;for(isNode&&(parent=process.domain)&&parent.exit();head;){fn=head.fn,head=head.next;try{fn()}catch(e){throw head?notify():last=void 0,e}}last=void 0,parent&&parent.enter()};if(isNode)notify=function(){process.nextTick(flush)};else if(Observer){var toggle=!0,node=document.createTextNode("");new Observer(flush).observe(node,{characterData:!0}),notify=function(){node.data=toggle=!toggle}}else if(Promise&&Promise.resolve){var promise=Promise.resolve();notify=function(){promise.then(flush)}}else notify=function(){macrotask.call(global,flush)};return function(fn){var task={fn:fn,next:void 0};last&&(last.next=task),head||(head=task,notify()),last=task}}},function(module,exports,__webpack_require__){var hide=__webpack_require__(148);module.exports=function(target,src,safe){for(var key in src)safe&&target[key]?target[key]=src[key]:hide(target,key,src[key]);return target}},function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(144),core=__webpack_require__(145),dP=__webpack_require__(149),DESCRIPTORS=__webpack_require__(153),SPECIES=__webpack_require__(178)("species");module.exports=function(KEY){var C="function"==typeof core[KEY]?core[KEY]:global[KEY];DESCRIPTORS&&C&&!C[SPECIES]&&dP.f(C,SPECIES,{configurable:!0,get:function(){return this}})}},function(module,exports,__webpack_require__){var ITERATOR=__webpack_require__(178)("iterator"),SAFE_CLOSING=!1;try{var riter=[7][ITERATOR]();riter["return"]=function(){SAFE_CLOSING=!0},Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return!1;var safe=!1;try{var arr=[7],iter=arr[ITERATOR]();iter.next=function(){return{done:safe=!0}},arr[ITERATOR]=function(){return iter},exec(arr)}catch(e){}return safe}},function(module,exports){"use strict";exports.__esModule=!0,exports["default"]=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0;var _defineProperty=__webpack_require__(201),_defineProperty2=_interopRequireDefault(_defineProperty);exports["default"]=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),(0,_defineProperty2["default"])(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}()},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(202),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(203);var $Object=__webpack_require__(145).Object;module.exports=function(it,key,desc){return $Object.defineProperty(it,key,desc)}},function(module,exports,__webpack_require__){var $export=__webpack_require__(143);$export($export.S+$export.F*!__webpack_require__(153),"Object",{defineProperty:__webpack_require__(149).f})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(global){function SignalBinding(signal,listener,isOnce,listenerContext,priority){this._listener=listener,this._isOnce=isOnce,this.context=listenerContext,this._signal=signal,this._priority=priority||0}function validateListener(listener,fnName){if("function"!=typeof listener)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",fnName))}function Signal(){this._bindings=[],this._prevParams=null;var self=this;this.dispatch=function(){Signal.prototype.dispatch.apply(self,arguments)}}SignalBinding.prototype={active:!0,params:null,execute:function(paramsArr){var handlerReturn,params;return this.active&&this._listener&&(params=this.params?this.params.concat(paramsArr):paramsArr,handlerReturn=this._listener.apply(this.context,params),this._isOnce&&this.detach()),handlerReturn},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},Signal.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(listener,isOnce,listenerContext,priority){var binding,prevIndex=this._indexOfListener(listener,listenerContext);if(prevIndex!==-1){if(binding=this._bindings[prevIndex],binding.isOnce()!==isOnce)throw new Error("You cannot add"+(isOnce?"":"Once")+"() then add"+(isOnce?"Once":"")+"() the same listener without removing the relationship first.")}else binding=new SignalBinding(this,listener,isOnce,listenerContext,priority),this._addBinding(binding);return this.memorize&&this._prevParams&&binding.execute(this._prevParams),binding},_addBinding:function(binding){var n=this._bindings.length;do--n;while(this._bindings[n]&&binding._priority<=this._bindings[n]._priority);this._bindings.splice(n+1,0,binding)},_indexOfListener:function(listener,context){for(var cur,n=this._bindings.length;n--;)if(cur=this._bindings[n],cur._listener===listener&&cur.context===context)return n;return-1},has:function(listener,context){return this._indexOfListener(listener,context)!==-1},add:function(listener,listenerContext,priority){return validateListener(listener,"add"),this._registerListener(listener,!1,listenerContext,priority)},addOnce:function(listener,listenerContext,priority){return validateListener(listener,"addOnce"),this._registerListener(listener,!0,listenerContext,priority)},remove:function(listener,context){validateListener(listener,"remove");var i=this._indexOfListener(listener,context);return i!==-1&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),listener},removeAll:function(){for(var n=this._bindings.length;n--;)this._bindings[n]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(params){if(this.active){var bindings,paramsArr=Array.prototype.slice.call(arguments),n=this._bindings.length;if(this.memorize&&(this._prevParams=paramsArr),n){bindings=this._bindings.slice(),this._shouldPropagate=!0;do n--;while(bindings[n]&&this._shouldPropagate&&bindings[n].execute(paramsArr)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var signals=Signal;signals.Signal=Signal,__WEBPACK_AMD_DEFINE_RESULT__=function(){return signals}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(this)},function(module,exports,__webpack_require__){(function(process){"use strict";function normalizeArray(parts,allowAboveRoot){for(var res=[],i=0;i<parts.length;i++){var p=parts[i];p&&"."!==p&&(".."===p?res.length&&".."!==res[res.length-1]?res.pop():allowAboveRoot&&res.push(".."):res.push(p))}return res}function trimArray(arr){for(var lastIndex=arr.length-1,start=0;start<=lastIndex&&!arr[start];start++);for(var end=lastIndex;end>=0&&!arr[end];end--);return 0===start&&end===lastIndex?arr:start>end?[]:arr.slice(start,end+1)}function win32SplitPath(filename){var result=splitDeviceRe.exec(filename),device=(result[1]||"")+(result[2]||""),tail=result[3]||"",result2=splitTailRe.exec(tail),dir=result2[1],basename=result2[2],ext=result2[3];return[device,dir,basename,ext]}function win32StatPath(path){var result=splitDeviceRe.exec(path),device=result[1]||"",isUnc=!!device&&":"!==device[1];return{device:device,isUnc:isUnc,isAbsolute:isUnc||!!result[2],tail:result[3]}}function normalizeUNCRoot(device){return"\\\\"+device.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}function posixSplitPath(filename){return splitPathRe.exec(filename).slice(1)}var isWindows="win32"===process.platform,util=__webpack_require__(207),splitDeviceRe=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,splitTailRe=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,win32={};win32.resolve=function(){for(var resolvedDevice="",resolvedTail="",resolvedAbsolute=!1,i=arguments.length-1;i>=-1;i--){var path;if(i>=0?path=arguments[i]:resolvedDevice?(path=process.env["="+resolvedDevice],path&&path.substr(0,3).toLowerCase()===resolvedDevice.toLowerCase()+"\\"||(path=resolvedDevice+"\\")):path=process.cwd(),!util.isString(path))throw new TypeError("Arguments to path.resolve must be strings");if(path){var result=win32StatPath(path),device=result.device,isUnc=result.isUnc,isAbsolute=result.isAbsolute,tail=result.tail;if((!device||!resolvedDevice||device.toLowerCase()===resolvedDevice.toLowerCase())&&(resolvedDevice||(resolvedDevice=device),resolvedAbsolute||(resolvedTail=tail+"\\"+resolvedTail,resolvedAbsolute=isAbsolute),resolvedDevice&&resolvedAbsolute))break}}return isUnc&&(resolvedDevice=normalizeUNCRoot(resolvedDevice)),resolvedTail=normalizeArray(resolvedTail.split(/[\\\/]+/),!resolvedAbsolute).join("\\"),resolvedDevice+(resolvedAbsolute?"\\":"")+resolvedTail||"."},win32.normalize=function(path){var result=win32StatPath(path),device=result.device,isUnc=result.isUnc,isAbsolute=result.isAbsolute,tail=result.tail,trailingSlash=/[\\\/]$/.test(tail);return tail=normalizeArray(tail.split(/[\\\/]+/),!isAbsolute).join("\\"),tail||isAbsolute||(tail="."),tail&&trailingSlash&&(tail+="\\"),isUnc&&(device=normalizeUNCRoot(device)),device+(isAbsolute?"\\":"")+tail},win32.isAbsolute=function(path){return win32StatPath(path).isAbsolute},win32.join=function(){for(var paths=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(!util.isString(arg))throw new TypeError("Arguments to path.join must be strings");arg&&paths.push(arg)}var joined=paths.join("\\");return/^[\\\/]{2}[^\\\/]/.test(paths[0])||(joined=joined.replace(/^[\\\/]{2,}/,"\\")),win32.normalize(joined)},win32.relative=function(from,to){from=win32.resolve(from),to=win32.resolve(to);for(var lowerFrom=from.toLowerCase(),lowerTo=to.toLowerCase(),toParts=trimArray(to.split("\\")),lowerFromParts=trimArray(lowerFrom.split("\\")),lowerToParts=trimArray(lowerTo.split("\\")),length=Math.min(lowerFromParts.length,lowerToParts.length),samePartsLength=length,i=0;i<length;i++)if(lowerFromParts[i]!==lowerToParts[i]){samePartsLength=i;break}if(0==samePartsLength)return to;for(var outputParts=[],i=samePartsLength;i<lowerFromParts.length;i++)outputParts.push("..");return outputParts=outputParts.concat(toParts.slice(samePartsLength)),outputParts.join("\\")},win32._makeLong=function(path){if(!util.isString(path))return path;if(!path)return"";var resolvedPath=win32.resolve(path);return/^[a-zA-Z]\:\\/.test(resolvedPath)?"\\\\?\\"+resolvedPath:/^\\\\[^?.]/.test(resolvedPath)?"\\\\?\\UNC\\"+resolvedPath.substring(2):path},win32.dirname=function(path){var result=win32SplitPath(path),root=result[0],dir=result[1];return root||dir?(dir&&(dir=dir.substr(0,dir.length-1)),root+dir):"."},win32.basename=function(path,ext){var f=win32SplitPath(path)[2];return ext&&f.substr(-1*ext.length)===ext&&(f=f.substr(0,f.length-ext.length)),f},win32.extname=function(path){return win32SplitPath(path)[3]},win32.format=function(pathObject){if(!util.isObject(pathObject))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof pathObject);var root=pathObject.root||"";if(!util.isString(root))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof pathObject.root);var dir=pathObject.dir,base=pathObject.base||"";return dir?dir[dir.length-1]===win32.sep?dir+base:dir+win32.sep+base:base},win32.parse=function(pathString){if(!util.isString(pathString))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof pathString);var allParts=win32SplitPath(pathString);if(!allParts||4!==allParts.length)throw new TypeError("Invalid path '"+pathString+"'");return{root:allParts[0],dir:allParts[0]+allParts[1].slice(0,-1),base:allParts[2],ext:allParts[3],name:allParts[2].slice(0,allParts[2].length-allParts[3].length)}},win32.sep="\\",win32.delimiter=";";var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,posix={};posix.resolve=function(){for(var resolvedPath="",resolvedAbsolute=!1,i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if(!util.isString(path))throw new TypeError("Arguments to path.resolve must be strings");path&&(resolvedPath=path+"/"+resolvedPath,resolvedAbsolute="/"===path[0])}return resolvedPath=normalizeArray(resolvedPath.split("/"),!resolvedAbsolute).join("/"),(resolvedAbsolute?"/":"")+resolvedPath||"."},posix.normalize=function(path){var isAbsolute=posix.isAbsolute(path),trailingSlash=path&&"/"===path[path.length-1];return path=normalizeArray(path.split("/"),!isAbsolute).join("/"),path||isAbsolute||(path="."),path&&trailingSlash&&(path+="/"),(isAbsolute?"/":"")+path},posix.isAbsolute=function(path){return"/"===path.charAt(0)},posix.join=function(){for(var path="",i=0;i<arguments.length;i++){var segment=arguments[i];if(!util.isString(segment))throw new TypeError("Arguments to path.join must be strings");segment&&(path+=path?"/"+segment:segment)}return posix.normalize(path)},posix.relative=function(from,to){from=posix.resolve(from).substr(1),to=posix.resolve(to).substr(1);for(var fromParts=trimArray(from.split("/")),toParts=trimArray(to.split("/")),length=Math.min(fromParts.length,toParts.length),samePartsLength=length,i=0;i<length;i++)if(fromParts[i]!==toParts[i]){samePartsLength=i;break}for(var outputParts=[],i=samePartsLength;i<fromParts.length;i++)outputParts.push("..");return outputParts=outputParts.concat(toParts.slice(samePartsLength)),outputParts.join("/")},posix._makeLong=function(path){return path},posix.dirname=function(path){var result=posixSplitPath(path),root=result[0],dir=result[1];return root||dir?(dir&&(dir=dir.substr(0,dir.length-1)),root+dir):"."},posix.basename=function(path,ext){var f=posixSplitPath(path)[2];return ext&&f.substr(-1*ext.length)===ext&&(f=f.substr(0,f.length-ext.length)),f},posix.extname=function(path){return posixSplitPath(path)[3]},posix.format=function(pathObject){if(!util.isObject(pathObject))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof pathObject);var root=pathObject.root||"";if(!util.isString(root))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof pathObject.root);var dir=pathObject.dir?pathObject.dir+posix.sep:"",base=pathObject.base||"";return dir+base},posix.parse=function(pathString){if(!util.isString(pathString))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof pathString);var allParts=posixSplitPath(pathString);if(!allParts||4!==allParts.length)throw new TypeError("Invalid path '"+pathString+"'");return allParts[1]=allParts[1]||"",allParts[2]=allParts[2]||"",allParts[3]=allParts[3]||"",{root:allParts[0],dir:allParts[0]+allParts[1].slice(0,-1),base:allParts[2],ext:allParts[3],name:allParts[2].slice(0,allParts[2].length-allParts[3].length)}},posix.sep="/",posix.delimiter=":",isWindows?module.exports=win32:module.exports=posix,module.exports.posix=posix,module.exports.win32=win32}).call(exports,__webpack_require__(206))},function(module,exports){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){(function(global,process){function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(ctx.depth=arguments[2]),arguments.length>=4&&(ctx.colors=arguments[3]),isBoolean(opts)?ctx.showHidden=opts:opts&&exports._extend(ctx,opts),isUndefined(ctx.showHidden)&&(ctx.showHidden=!1),isUndefined(ctx.depth)&&(ctx.depth=2),isUndefined(ctx.colors)&&(ctx.colors=!1),isUndefined(ctx.customInspect)&&(ctx.customInspect=!0),ctx.colors&&(ctx.stylize=stylizeWithColor),formatValue(ctx,obj,ctx.depth)}function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];return style?"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m":str}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};return array.forEach(function(val,idx){hash[val]=!0}),hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&(!value.constructor||value.constructor.prototype!==value)){var ret=value.inspect(recurseTimes,ctx);return isString(ret)||(ret=formatValue(ctx,ret,recurseTimes)),ret}var primitive=formatPrimitive(ctx,value);if(primitive)return primitive;var keys=Object.keys(value),visibleKeys=arrayToHash(keys);if(ctx.showHidden&&(keys=Object.getOwnPropertyNames(value)),isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0))return formatError(value);if(0===keys.length){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value))return ctx.stylize(RegExp.prototype.toString.call(value),"regexp");if(isDate(value))return ctx.stylize(Date.prototype.toString.call(value),"date");if(isError(value))return formatError(value)}var base="",array=!1,braces=["{","}"];if(isArray(value)&&(array=!0,braces=["[","]"]),isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)&&(base=" "+RegExp.prototype.toString.call(value)),isDate(value)&&(base=" "+Date.prototype.toUTCString.call(value)),isError(value)&&(base=" "+formatError(value)),0===keys.length&&(!array||0==value.length))return braces[0]+base+braces[1];if(recurseTimes<0)return isRegExp(value)?ctx.stylize(RegExp.prototype.toString.call(value),"regexp"):ctx.stylize("[Object]","special");ctx.seen.push(value);var output;return output=array?formatArray(ctx,value,recurseTimes,visibleKeys,keys):keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)}),ctx.seen.pop(),reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";
return ctx.stylize(simple,"string")}return isNumber(value)?ctx.stylize(""+value,"number"):isBoolean(value)?ctx.stylize(""+value,"boolean"):isNull(value)?ctx.stylize("null","null"):void 0}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){for(var output=[],i=0,l=value.length;i<l;++i)hasOwnProperty(value,String(i))?output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),!0)):output.push("");return keys.forEach(function(key){key.match(/^\d+$/)||output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,!0))}),output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;if(desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]},desc.get?str=desc.set?ctx.stylize("[Getter/Setter]","special"):ctx.stylize("[Getter]","special"):desc.set&&(str=ctx.stylize("[Setter]","special")),hasOwnProperty(visibleKeys,key)||(name="["+key+"]"),str||(ctx.seen.indexOf(desc.value)<0?(str=isNull(recurseTimes)?formatValue(ctx,desc.value,null):formatValue(ctx,desc.value,recurseTimes-1),str.indexOf("\n")>-1&&(str=array?str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2):"\n"+str.split("\n").map(function(line){return"   "+line}).join("\n"))):str=ctx.stylize("[Circular]","special")),isUndefined(name)){if(array&&key.match(/^\d+$/))return str;name=JSON.stringify(""+key),name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(name=name.substr(1,name.length-2),name=ctx.stylize(name,"name")):(name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),name=ctx.stylize(name,"string"))}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0,length=output.reduce(function(prev,cur){return numLinesEst++,cur.indexOf("\n")>=0&&numLinesEst++,prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);return length>60?braces[0]+(""===base?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]:braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}function isBoolean(arg){return"boolean"==typeof arg}function isNull(arg){return null===arg}function isNullOrUndefined(arg){return null==arg}function isNumber(arg){return"number"==typeof arg}function isString(arg){return"string"==typeof arg}function isSymbol(arg){return"symbol"==typeof arg}function isUndefined(arg){return void 0===arg}function isRegExp(re){return isObject(re)&&"[object RegExp]"===objectToString(re)}function isObject(arg){return"object"==typeof arg&&null!==arg}function isDate(d){return isObject(d)&&"[object Date]"===objectToString(d)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(arg){return"function"==typeof arg}function isPrimitive(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||"undefined"==typeof arg}function objectToString(o){return Object.prototype.toString.call(o)}function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){for(var objects=[],i=0;i<arguments.length;i++)objects.push(inspect(arguments[i]));return objects.join(" ")}for(var i=1,args=arguments,len=args.length,str=String(f).replace(formatRegExp,function(x){if("%%"===x)return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}}),x=args[i];i<len;x=args[++i])str+=isNull(x)||!isObject(x)?" "+x:" "+inspect(x);return str},exports.deprecate=function(fn,msg){function deprecated(){if(!warned){if(process.throwDeprecation)throw new Error(msg);process.traceDeprecation,warned=!0}return fn.apply(this,arguments)}if(isUndefined(global.process))return function(){return exports.deprecate(fn,msg).apply(this,arguments)};if(process.noDeprecation===!0)return fn;var warned=!1;return deprecated};var debugEnviron,debugs={};exports.debuglog=function(set){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),set=set.toUpperCase(),!debugs[set])if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){process.pid;debugs[set]=function(){exports.format.apply(exports,arguments)}}else debugs[set]=function(){};return debugs[set]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=__webpack_require__(208);exports.log=function(){},exports.inherits=__webpack_require__(209),exports._extend=function(origin,add){if(!add||!isObject(add))return origin;for(var keys=Object.keys(add),i=keys.length;i--;)origin[keys[i]]=add[keys[i]];return origin}}).call(exports,function(){return this}(),__webpack_require__(206))},function(module,exports){module.exports=function(arg){return arg&&"object"==typeof arg&&"function"==typeof arg.copy&&"function"==typeof arg.fill&&"function"==typeof arg.readUInt8}},function(module,exports){"function"==typeof Object.create?module.exports=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(199),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(200),_createClass3=_interopRequireDefault(_createClass2),Cache=function(){function Cache(){(0,_classCallCheck3["default"])(this,Cache),this._json={},this._text={}}return(0,_createClass3["default"])(Cache,[{key:"addJson",value:function(json,id){this._json[id]=json}},{key:"addText",value:function(text,id){this._text[id]=text}},{key:"get",value:function(id){return this.getJson(id)||this.getText(id)}},{key:"getJson",value:function(id){return this._json[id]?this._json[id]:null}},{key:"getText",value:function(id){if(this._text[id])return this._text[id]}}]),Cache}();exports["default"]=Cache,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(212),module.exports.Resource=__webpack_require__(215),module.exports.middleware={caching:{memory:__webpack_require__(217)},parsing:{blob:__webpack_require__(218)}},module.exports.async=__webpack_require__(214)},function(module,exports,__webpack_require__){"use strict";function Loader(baseUrl,concurrency){EventEmitter.call(this),concurrency=concurrency||DEFAULT_CONCURRENCY,this.baseUrl=baseUrl||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._buffer=[],this._numToLoad=0,this._queue=async.queue(this._boundLoadResource,concurrency),this.resources={}}var parseUri=__webpack_require__(213),async=__webpack_require__(214),Resource=__webpack_require__(215),EventEmitter=__webpack_require__(216),DEFAULT_CONCURRENCY=10,MAX_PROGRESS=100;Loader.prototype=Object.create(EventEmitter.prototype),Loader.prototype.constructor=Loader,module.exports=Loader,Loader.prototype.add=Loader.prototype.enqueue=function(name,url,options,cb){if(Array.isArray(name)){for(var i=0;i<name.length;++i)this.add(name[i]);return this}if("object"==typeof name&&(cb=url||name.callback||name.onComplete,options=name,url=name.url,name=name.name||name.key||name.url),"string"!=typeof url&&(cb=options,options=url,url=name),"string"!=typeof url)throw new Error("No url passed to add resource to loader.");if("function"==typeof options&&(cb=options,options=null),this.resources[name])throw new Error('Resource with name "'+name+'" already exists.');return url=this._prepareUrl(url),this.resources[name]=new Resource(name,url,options),"function"==typeof cb&&this.resources[name].once("afterMiddleware",cb),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[name]),this._progressChunk=(MAX_PROGRESS-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[name]),this._progressChunk=MAX_PROGRESS/this._buffer.length),this},Loader.prototype.before=Loader.prototype.pre=function(fn){return this._beforeMiddleware.push(fn),this},Loader.prototype.after=Loader.prototype.use=function(fn){return this._afterMiddleware.push(fn),this},Loader.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1;for(var k in this.resources){var res=this.resources[k];res.off("complete",this._onLoad,this),res.isLoading&&res.abort()}return this.resources={},this},Loader.prototype.load=function(cb){if("function"==typeof cb&&this.once("complete",cb),this._queue.started)return this;this.emit("start",this),this.loading=!0;for(var i=0;i<this._buffer.length;++i)this._queue.push(this._buffer[i]);return this._buffer.length=0,this},Loader.prototype._prepareUrl=function(url){var parsedUrl=parseUri(url,{strictMode:!0});return parsedUrl.protocol||!parsedUrl.path||0===parsedUrl.path.indexOf("//")?url:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==url.charAt(0)?this.baseUrl+"/"+url:this.baseUrl+url},Loader.prototype._loadResource=function(resource,dequeue){var self=this;resource._dequeue=dequeue,async.eachSeries(this._beforeMiddleware,function(fn,next){fn.call(self,resource,function(){next(resource.isComplete?{}:null)})},function(){resource.isComplete?self._onLoad(resource):(resource.once("complete",self._onLoad,self),resource.load())})},Loader.prototype._onComplete=function(){this.loading=!1,this.emit("complete",this,this.resources)},Loader.prototype._onLoad=function(resource){var self=this;async.eachSeries(this._afterMiddleware,function(fn,next){fn.call(self,resource,next)},function(){resource.emit("afterMiddleware",resource),self._numToLoad--,self.progress+=self._progressChunk,self.emit("progress",self,resource),resource.error?self.emit("error",resource.error,self,resource):self.emit("load",self,resource),0===self._numToLoad&&(self.progress=100,self._onComplete())}),resource._dequeue()},Loader.LOAD_TYPE=Resource.LOAD_TYPE,Loader.XHR_RESPONSE_TYPE=Resource.XHR_RESPONSE_TYPE},function(module,exports){"use strict";module.exports=function(str,opts){opts=opts||{};for(var o={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},m=o.parser[opts.strictMode?"strict":"loose"].exec(str),uri={},i=14;i--;)uri[o.key[i]]=m[i]||"";return uri[o.q.name]={},uri[o.key[12]].replace(o.q.parser,function($0,$1,$2){$1&&(uri[o.q.name][$1]=$2)}),uri}},function(module,exports){"use strict";function _noop(){}function asyncEachSeries(array,iterator,callback){var i=0,len=array.length;!function next(err){return err||i===len?void(callback&&callback(err)):void iterator(array[i++],next)}()}function onlyOnce(fn){return function(){if(null===fn)throw new Error("Callback was already called.");var callFn=fn;fn=null,callFn.apply(this,arguments)}}function asyncQueue(worker,concurrency){function _insert(data,insertAtFront,callback){if(null!=callback&&"function"!=typeof callback)throw new Error("task callback must be a function");if(q.started=!0,null==data&&q.idle())return void setTimeout(function(){q.drain()},1);var item={data:data,callback:"function"==typeof callback?callback:_noop};insertAtFront?q._tasks.unshift(item):q._tasks.push(item),setTimeout(function(){q.process()},1)}function _next(task){return function(){workers-=1,task.callback.apply(task,arguments),null!=arguments[0]&&q.error(arguments[0],task.data),workers<=q.concurrency-q.buffer&&q.unsaturated(),q.idle()&&q.drain(),q.process()}}if(null==concurrency)concurrency=1;else if(0===concurrency)throw new Error("Concurrency must not be zero");var workers=0,q={_tasks:[],concurrency:concurrency,saturated:_noop,unsaturated:_noop,buffer:concurrency/4,empty:_noop,drain:_noop,error:_noop,started:!1,paused:!1,push:function(data,callback){_insert(data,!1,callback)},kill:function(){q.drain=_noop,q._tasks=[]},unshift:function(data,callback){_insert(data,!0,callback)},process:function(){for(;!q.paused&&workers<q.concurrency&&q._tasks.length;){var task=q._tasks.shift();0===q._tasks.length&&q.empty(),workers+=1,workers===q.concurrency&&q.saturated(),worker(task.data,onlyOnce(_next(task)))}},length:function(){return q._tasks.length},running:function(){return workers},idle:function(){return q._tasks.length+workers===0},pause:function(){q.paused!==!0&&(q.paused=!0)},resume:function(){if(q.paused!==!1){q.paused=!1;for(var w=1;w<=q.concurrency;w++)q.process()}}};return q}module.exports={eachSeries:asyncEachSeries,queue:asyncQueue}},function(module,exports,__webpack_require__){"use strict";function Resource(name,url,options){if(EventEmitter.call(this),options=options||{},"string"!=typeof name||"string"!=typeof url)throw new Error("Both name and url are required for constructing a resource.");this.name=name,this.url=url,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=options.crossOrigin===!0?"anonymous":options.crossOrigin,this.loadType=options.loadType||this._determineLoadType(),this.xhrType=options.xhrType,this.metadata=options.metadata||{},this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this.isComplete=!1,this.isLoading=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function reqType(xhr){return xhr.toString().replace("object ","")}function setExtMap(map,extname,val){extname&&0===extname.indexOf(".")&&(extname=extname.substring(1)),extname&&(map[extname]=val)}var EventEmitter=__webpack_require__(216),parseUri=__webpack_require__(213),useXdr=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),tempAnchor=null,STATUS_NONE=0,STATUS_OK=200,STATUS_EMPTY=204;Resource.prototype=Object.create(EventEmitter.prototype),Resource.prototype.constructor=Resource,module.exports=Resource,Resource.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this.isComplete=!0,this.isLoading=!1,this.emit("complete",this)},Resource.prototype.abort=function(message){if(!this.error){if(this.error=new Error(message),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if("undefined"!=typeof this.data.src)this.data.src="";else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},Resource.prototype.load=function(cb){if(!this.isLoading)if(this.isComplete){if(cb){var self=this;setTimeout(function(){cb(self)},1)}}else switch(cb&&this.once("complete",cb),this.isLoading=!0,this.emit("start",this),this.crossOrigin!==!1&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case Resource.LOAD_TYPE.IMAGE:this._loadElement("image");break;case Resource.LOAD_TYPE.AUDIO:this._loadSourceElement("audio");break;case Resource.LOAD_TYPE.VIDEO:this._loadSourceElement("video");break;case Resource.LOAD_TYPE.XHR:default:useXdr&&this.crossOrigin?this._loadXdr():this._loadXhr()}},Resource.prototype._loadElement=function(type){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===type&&"undefined"!=typeof window.Image?this.data=new Image:this.data=document.createElement(type),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url);var typeName="is"+type[0].toUpperCase()+type.substring(1);this[typeName]===!1&&(this[typeName]=!0),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},Resource.prototype._loadSourceElement=function(type){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===type&&"undefined"!=typeof window.Audio?this.data=new Audio:this.data=document.createElement(type),null===this.data)return void this.abort("Unsupported element "+type);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(type,this.url[i]));else this.data.appendChild(this._createSource(type,this.url));this["is"+type[0].toUpperCase()+type.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},Resource.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var xhr=this.xhr=new XMLHttpRequest;xhr.open("GET",this.url,!0),this.xhrType===Resource.XHR_RESPONSE_TYPE.JSON||this.xhrType===Resource.XHR_RESPONSE_TYPE.DOCUMENT?xhr.responseType=Resource.XHR_RESPONSE_TYPE.TEXT:xhr.responseType=this.xhrType,xhr.addEventListener("error",this._boundXhrOnError,!1),xhr.addEventListener("abort",this._boundXhrOnAbort,!1),xhr.addEventListener("progress",this._boundOnProgress,!1),xhr.addEventListener("load",this._boundXhrOnLoad,!1),xhr.send()},Resource.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var xdr=this.xhr=new XDomainRequest;xdr.timeout=5e3,xdr.onerror=this._boundXhrOnError,xdr.ontimeout=this._boundXdrOnTimeout,xdr.onprogress=this._boundOnProgress,xdr.onload=this._boundXhrOnLoad,xdr.open("GET",this.url,!0),setTimeout(function(){xdr.send()},0)},Resource.prototype._createSource=function(type,url,mime){mime||(mime=type+"/"+url.substr(url.lastIndexOf(".")+1));var source=document.createElement("source");return source.src=url,source.type=mime,source},Resource.prototype._onError=function(event){this.abort("Failed to load element using "+event.target.nodeName)},Resource.prototype._onProgress=function(event){event&&event.lengthComputable&&this.emit("progress",this,event.loaded/event.total)},Resource.prototype._xhrOnError=function(){var xhr=this.xhr;this.abort(reqType(xhr)+" Request failed. Status: "+xhr.status+', text: "'+xhr.statusText+'"')},Resource.prototype._xhrOnAbort=function(){this.abort(reqType(this.xhr)+" Request was aborted by the user.")},Resource.prototype._xdrOnTimeout=function(){this.abort(reqType(this.xhr)+" Request timed out.")},Resource.prototype._xhrOnLoad=function(){var xhr=this.xhr,status="undefined"==typeof xhr.status?xhr.status:STATUS_OK;if(!(status===STATUS_OK||status===STATUS_EMPTY||status===STATUS_NONE&&xhr.responseText.length>0))return void this.abort("["+xhr.status+"]"+xhr.statusText+":"+xhr.responseURL);if(this.xhrType===Resource.XHR_RESPONSE_TYPE.TEXT)this.data=xhr.responseText;else if(this.xhrType===Resource.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(xhr.responseText),this.isJson=!0}catch(e){return void this.abort("Error trying to parse loaded json:",e)}else if(this.xhrType===Resource.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var domparser=new DOMParser;this.data=domparser.parseFromString(xhr.responseText,"text/xml")}else{var div=document.createElement("div");div.innerHTML=xhr.responseText,this.data=div}this.isXml=!0}catch(e){return void this.abort("Error trying to parse loaded xml:",e)}else this.data=xhr.response||xhr.responseText;this.complete()},Resource.prototype._determineCrossOrigin=function(url,loc){if(0===url.indexOf("data:"))return"";loc=loc||window.location,tempAnchor||(tempAnchor=document.createElement("a")),tempAnchor.href=url,url=parseUri(tempAnchor.href,{strictMode:!0});var samePort=!url.port&&""===loc.port||url.port===loc.port,protocol=url.protocol?url.protocol+":":"";return url.host===loc.hostname&&samePort&&protocol===loc.protocol?"":"anonymous"},Resource.prototype._determineXhrType=function(){return Resource._xhrTypeMap[this._getExtension()]||Resource.XHR_RESPONSE_TYPE.TEXT},Resource.prototype._determineLoadType=function(){return Resource._loadTypeMap[this._getExtension()]||Resource.LOAD_TYPE.XHR},Resource.prototype._getExtension=function(){var url=this.url,ext="";if(this.isDataUrl){var slashIndex=url.indexOf("/");ext=url.substring(slashIndex+1,url.indexOf(";",slashIndex))}else{var queryStart=url.indexOf("?");queryStart!==-1&&(url=url.substring(0,queryStart)),ext=url.substring(url.lastIndexOf(".")+1)}return ext.toLowerCase()},Resource.prototype._getMimeFromXhrType=function(type){switch(type){case Resource.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case Resource.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case Resource.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case Resource.XHR_RESPONSE_TYPE.JSON:return"application/json";case Resource.XHR_RESPONSE_TYPE.DEFAULT:case Resource.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},Resource.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},Resource.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},Resource._loadTypeMap={gif:Resource.LOAD_TYPE.IMAGE,png:Resource.LOAD_TYPE.IMAGE,bmp:Resource.LOAD_TYPE.IMAGE,jpg:Resource.LOAD_TYPE.IMAGE,jpeg:Resource.LOAD_TYPE.IMAGE,tif:Resource.LOAD_TYPE.IMAGE,tiff:Resource.LOAD_TYPE.IMAGE,webp:Resource.LOAD_TYPE.IMAGE,tga:Resource.LOAD_TYPE.IMAGE,"svg+xml":Resource.LOAD_TYPE.IMAGE},Resource._xhrTypeMap={xhtml:Resource.XHR_RESPONSE_TYPE.DOCUMENT,html:Resource.XHR_RESPONSE_TYPE.DOCUMENT,htm:Resource.XHR_RESPONSE_TYPE.DOCUMENT,xml:Resource.XHR_RESPONSE_TYPE.DOCUMENT,tmx:Resource.XHR_RESPONSE_TYPE.DOCUMENT,tsx:Resource.XHR_RESPONSE_TYPE.DOCUMENT,svg:Resource.XHR_RESPONSE_TYPE.DOCUMENT,gif:Resource.XHR_RESPONSE_TYPE.BLOB,png:Resource.XHR_RESPONSE_TYPE.BLOB,bmp:Resource.XHR_RESPONSE_TYPE.BLOB,jpg:Resource.XHR_RESPONSE_TYPE.BLOB,jpeg:Resource.XHR_RESPONSE_TYPE.BLOB,tif:Resource.XHR_RESPONSE_TYPE.BLOB,tiff:Resource.XHR_RESPONSE_TYPE.BLOB,webp:Resource.XHR_RESPONSE_TYPE.BLOB,tga:Resource.XHR_RESPONSE_TYPE.BLOB,json:Resource.XHR_RESPONSE_TYPE.JSON,text:Resource.XHR_RESPONSE_TYPE.TEXT,txt:Resource.XHR_RESPONSE_TYPE.TEXT},Resource.setExtensionLoadType=function(extname,loadType){setExtMap(Resource._loadTypeMap,extname,loadType)},Resource.setExtensionXhrType=function(extname,xhrType){setExtMap(Resource._xhrTypeMap,extname,xhrType)}},function(module,exports,__webpack_require__){"use strict";function Events(){}function EE(fn,context,once){this.fn=fn,this.context=context,this.once=once||!1}function EventEmitter(){this._events=new Events,this._eventsCount=0}var has=Object.prototype.hasOwnProperty,prefix="~";Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function(){var events,name,names=[];if(0===this._eventsCount)return names;for(name in events=this._events)has.call(events,name)&&names.push(prefix?name.slice(1):name);return Object.getOwnPropertySymbols?names.concat(Object.getOwnPropertySymbols(events)):names},EventEmitter.prototype.listeners=function(event,exists){var evt=prefix?prefix+event:event,available=this._events[evt];if(exists)return!!available;if(!available)return[];if(available.fn)return[available.fn];for(var i=0,l=available.length,ee=new Array(l);i<l;i++)ee[i]=available[i].fn;return ee},EventEmitter.prototype.emit=function(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events[evt])return!1;var args,i,listeners=this._events[evt],len=arguments.length;if(listeners.fn){switch(listeners.once&&this.removeListener(event,listeners.fn,void 0,!0),len){case 1:return listeners.fn.call(listeners.context),!0;case 2:return listeners.fn.call(listeners.context,a1),!0;case 3:return listeners.fn.call(listeners.context,a1,a2),!0;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),!0;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),!0;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),!0}for(i=1,args=new Array(len-1);i<len;i++)args[i-1]=arguments[i];listeners.fn.apply(listeners.context,args)}else{var j,length=listeners.length;for(i=0;i<length;i++)switch(listeners[i].once&&this.removeListener(event,listeners[i].fn,void 0,!0),len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;case 4:listeners[i].fn.call(listeners[i].context,a1,a2,a3);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++)args[j-1]=arguments[j];listeners[i].fn.apply(listeners[i].context,args)}}return!0},EventEmitter.prototype.on=function(event,fn,context){var listener=new EE(fn,context||this),evt=prefix?prefix+event:event;return this._events[evt]?this._events[evt].fn?this._events[evt]=[this._events[evt],listener]:this._events[evt].push(listener):(this._events[evt]=listener,this._eventsCount++),this},EventEmitter.prototype.once=function(event,fn,context){var listener=new EE(fn,context||this,(!0)),evt=prefix?prefix+event:event;return this._events[evt]?this._events[evt].fn?this._events[evt]=[this._events[evt],listener]:this._events[evt].push(listener):(this._events[evt]=listener,this._eventsCount++),this},EventEmitter.prototype.removeListener=function(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events[evt])return this;if(!fn)return 0===--this._eventsCount?this._events=new Events:delete this._events[evt],this;var listeners=this._events[evt];if(listeners.fn)listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context||(0===--this._eventsCount?this._events=new Events:delete this._events[evt]);else{for(var i=0,events=[],length=listeners.length;i<length;i++)(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context)&&events.push(listeners[i]);events.length?this._events[evt]=1===events.length?events[0]:events:0===--this._eventsCount?this._events=new Events:delete this._events[evt]}return this},EventEmitter.prototype.removeAllListeners=function(event){var evt;return event?(evt=prefix?prefix+event:event,this._events[evt]&&(0===--this._eventsCount?this._events=new Events:delete this._events[evt])):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.setMaxListeners=function(){return this},EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,module.exports=EventEmitter},function(module,exports){"use strict";var cache={};module.exports=function(){return function(resource,next){cache[resource.url]?(resource.data=cache[resource.url],resource.complete()):resource.once("complete",function(){cache[this.url]=this.data}),next()}}},function(module,exports,__webpack_require__){"use strict";var Resource=__webpack_require__(215),b64=__webpack_require__(219),Url=window.URL||window.webkitURL;module.exports=function(){return function(resource,next){if(!resource.data)return void next();if(resource.xhr&&resource.xhrType===Resource.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof resource.data){if(0===resource.data.type.indexOf("image")){var src=Url.createObjectURL(resource.data);return resource.blob=resource.data,resource.data=new Image,resource.data.src=src,resource.isImage=!0,void(resource.data.onload=function(){Url.revokeObjectURL(src),resource.data.onload=null,next()})}}else{var type=resource.xhr.getResponseHeader("content-type");if(type&&0===type.indexOf("image"))return resource.data=new Image,resource.data.src="data:"+type+";base64,"+b64.encodeBinary(resource.xhr.responseText),resource.isImage=!0,void(resource.data.onload=function(){resource.data.onload=null,next()})}next()}}},function(module,exports){"use strict";module.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(input){for(var bytebuffer,output="",encodedCharIndexes=new Array(4),inx=0,jnx=0,paddingBytes=0;inx<input.length;){for(bytebuffer=new Array(3),jnx=0;jnx<bytebuffer.length;jnx++)inx<input.length?bytebuffer[jnx]=255&input.charCodeAt(inx++):bytebuffer[jnx]=0;switch(encodedCharIndexes[0]=bytebuffer[0]>>2,encodedCharIndexes[1]=(3&bytebuffer[0])<<4|bytebuffer[1]>>4,encodedCharIndexes[2]=(15&bytebuffer[1])<<2|bytebuffer[2]>>6,encodedCharIndexes[3]=63&bytebuffer[2],paddingBytes=inx-(input.length-1)){case 2:encodedCharIndexes[3]=64,encodedCharIndexes[2]=64;break;case 1:encodedCharIndexes[3]=64}for(jnx=0;jnx<encodedCharIndexes.length;jnx++)output+=this._keyStr.charAt(encodedCharIndexes[jnx])}return output}}},function(module,exports,__webpack_require__){!function(){function m(a,b){document.addEventListener?a.addEventListener("scroll",b,!1):a.attachEvent("scroll",b)}function n(a){document.body?a():document.addEventListener?document.addEventListener("DOMContentLoaded",function c(){document.removeEventListener("DOMContentLoaded",c),a()}):document.attachEvent("onreadystatechange",function l(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",l),a())})}function t(a){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(a)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",
this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function x(a,b){a.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+b+";"}function y(a){var b=a.a.offsetWidth,c=b+100;return a.f.style.width=c+"px",a.c.scrollLeft=c,a.b.scrollLeft=a.b.scrollWidth+100,a.g!==b&&(a.g=b,!0)}function z(a,b){function c(){var a=l;y(a)&&a.a.parentNode&&b(a.g)}var l=a;m(a.b,c),m(a.c,c),y(a)}function A(a,b){var c=b||{};this.family=a,this.style=c.style||"normal",this.weight=c.weight||"normal",this.stretch=c.stretch||"normal"}function I(){if(null===E){var a=document.createElement("div");try{a.style.font="condensed 100px sans-serif"}catch(b){}E=""!==a.style.font}return E}function J(a,b){return[a.style,a.weight,I()?a.stretch:"","100px",b].join(" ")}var B=null,C=null,E=null,F=null;A.prototype.load=function(a,b){var c=this,l=a||"BESbswy",r=0,D=b||3e3,G=(new Date).getTime();return new Promise(function(a,b){var e;if(null===F&&(F=!!document.fonts),(e=F)&&(null===C&&(C=/OS X.*Version\/10\..*Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),e=!C),e){e=new Promise(function(a,b){function f(){(new Date).getTime()-G>=D?b():document.fonts.load(J(c,'"'+c.family+'"'),l).then(function(c){1<=c.length?a():setTimeout(f,25)},function(){b()})}f()});var K=new Promise(function(a,c){r=setTimeout(c,D)});Promise.race([K,e]).then(function(){clearTimeout(r),a(c)},function(){b(c)})}else n(function(){function e(){var b;(b=-1!=g&&-1!=h||-1!=g&&-1!=k||-1!=h&&-1!=k)&&((b=g!=h&&g!=k&&h!=k)||(null===B&&(b=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),B=!!b&&(536>parseInt(b[1],10)||536===parseInt(b[1],10)&&11>=parseInt(b[2],10))),b=B&&(g==u&&h==u&&k==u||g==v&&h==v&&k==v||g==w&&h==w&&k==w)),b=!b),b&&(d.parentNode&&d.parentNode.removeChild(d),clearTimeout(r),a(c))}function H(){if((new Date).getTime()-G>=D)d.parentNode&&d.parentNode.removeChild(d),b(c);else{var a=document.hidden;!0!==a&&void 0!==a||(g=f.a.offsetWidth,h=p.a.offsetWidth,k=q.a.offsetWidth,e()),r=setTimeout(H,50)}}var f=new t(l),p=new t(l),q=new t(l),g=-1,h=-1,k=-1,u=-1,v=-1,w=-1,d=document.createElement("div");d.dir="ltr",x(f,J(c,"sans-serif")),x(p,J(c,"serif")),x(q,J(c,"monospace")),d.appendChild(f.a),d.appendChild(p.a),d.appendChild(q.a),document.body.appendChild(d),u=f.a.offsetWidth,v=p.a.offsetWidth,w=q.a.offsetWidth,H(),z(f,function(a){g=a,e()}),x(f,J(c,'"'+c.family+'",sans-serif')),z(p,function(a){h=a,e()}),x(p,J(c,'"'+c.family+'",serif')),z(q,function(a){k=a,e()}),x(q,J(c,'"'+c.family+'",monospace'))})})},module.exports=A}()},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(199),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(200),_createClass3=_interopRequireDefault(_createClass2),_mcgl=__webpack_require__(2),_mcgl2=_interopRequireDefault(_mcgl),_ViewLine=__webpack_require__(222),_ViewLine2=_interopRequireDefault(_ViewLine),_ViewSim=__webpack_require__(237),_ViewNoise=(_interopRequireDefault(_ViewSim),__webpack_require__(240)),_ViewNoise2=_interopRequireDefault(_ViewNoise),_ViewRenderer=__webpack_require__(243),_ViewRenderer2=_interopRequireDefault(_ViewRenderer),_McglFloor=__webpack_require__(246),_McglFloor2=_interopRequireDefault(_McglFloor),_sono=__webpack_require__(249),_sono2=_interopRequireDefault(_sono),gl=void 0,Scene=function(){function Scene(){var _this=this;(0,_classCallCheck3["default"])(this,Scene),gl=_mcgl.GL.gl,this.tick=0,this.currentNoise=1,this.isPaused=!1,gl.enable(gl.DEPTH_TEST),gl.enable(gl.BLEND),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA),this._bCopy=new _mcgl2["default"].BatchCopy,window.addEventListener("resize",this.resize.bind(this)),this.controller=new _mcgl2["default"].Controller,this.controller.onKeyPressed.add(this.onKeyPressed,this),this.xAxisPlane=new _McglFloor2["default"],this.cameraControl=new _mcgl2["default"].CameraControl,this.rx=0,this.ry=Math.PI/2,this.camera=new _mcgl2["default"].camera.CameraPOV,this._fboNoise=new _mcgl2["default"].FBO(256,256),this.viewNoise=new _ViewNoise2["default"](256,256),this.lines=[];for(var i=0;i<4;i++){var l=new _ViewLine2["default"](0===i);this.lines.push(l)}this.viewRender=new _ViewRenderer2["default"](256,256),this._fboNoise.bind(256,256),_mcgl2["default"].GL.gl.clear(0,0,0,0),this.viewNoise.render(),this._fboNoise.unbind(),this.targetPoint=[0,0,0],this.height={noise:.2,lines:.2},this._fboNoise.clear(),window.addEventListener("mousemove",function(e){_this.onMouseMove(e)},!1),this.x=.35,this.y=0,this.z=.2,this.z=-.1,this.sound=_sono2["default"].createSound({url:[ASSET_URL+"sounds/kognitif.mp3"],loop:!0,volume:1}),this.sound.play(),this.analyser=_sono2["default"].effect.analyser({fftSize:512,smoothingTimeConstant:.7})}return(0,_createClass3["default"])(Scene,[{key:"onKeyPressed",value:function(key){"space"===key&&this.pause()}},{key:"pause",value:function(){this.isPaused?this.sound.fade(0,1):this.sound.fade(1,1),this.isPaused=!this.isPaused}},{key:"onMouseMove",value:function(e){for(var i=0;i<this.lines.length;i++)this.lines[i].onMouseMove(e)}},{key:"updateFBO",value:function(){this._fboNoise.bind(256,256),_mcgl2["default"].GL.gl.clear(0,0,0,0),this.viewNoise.render(),this._fboNoise.unbind()}},{key:"getM",value:function(a){for(var sum=0,count=0,i=0;i<a.length;i++)a[i]>10&&(sum+=a[i],count++);return sum/count}},{key:"toggleSound",value:function(){this.pause()}},{key:"update",value:function(){this.updateFBO(),this.render()}},{key:"render",value:function(){this.cameraControl.update(),this.tick++,_mcgl.GL.setMatrices(this.camera);var f=this.analyser.getWaveform();this.x=.35+.4*Math.cos(this.tick/120),this.camera.perspective(60*Math.PI/180,_mcgl.GL.aspectRatio,.1,60),this.camera.setPosition(this.x,this.y,this.z),this.ry=Math.PI/4*2.45+.1*Math.cos(this.tick/100),this.rx=.08*Math.sin(this.tick/100)+.1*this.cameraControl.rx,this.rz=.09*Math.sin(this.tick/30)+.1*this.cameraControl.ry,this.camera.rotateX(this.rx),this.camera.rotateY(this.ry),this.camera.rotateZ(this.rz);var t=this._fboNoise.textures[0],m=Math.max.apply(null,f)/256;m-=.5,m*=2,m=10*this.easeInExpo(m,0,1,1),this.currentNoise+=.01*(m-this.currentNoise),this.viewNoise.amplitude=this.currentNoise,this.viewRender.render(t,m),this._fboNoise.clear()}},{key:"easeOutCubic",value:function(t,b,c,d){return t/=d,t--,c*(t*t*t+1)+b}},{key:"easeInExpo",value:function(t,b,c,d){return c*Math.pow(2,10*(t/d-1))+b}},{key:"resize",value:function(){_mcgl.GL.resize(window.innerWidth,window.innerHeight),this.camera.setAspectRatio(_mcgl.GL.aspectRatio)}}]),Scene}();exports["default"]=Scene,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(199),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(200),_createClass3=_interopRequireDefault(_createClass2),_mcgl=__webpack_require__(2),_mcgl2=_interopRequireDefault(_mcgl),_glMatrix=__webpack_require__(223),_line=(_interopRequireDefault(_glMatrix),__webpack_require__(233)),_line2=_interopRequireDefault(_line),_line3=__webpack_require__(234),_line4=_interopRequireDefault(_line3),_Spline=__webpack_require__(235),_Spline2=_interopRequireDefault(_Spline),_LinesMotions=__webpack_require__(236),_LinesMotions2=_interopRequireDefault(_LinesMotions),tempArray=[],STATES={wandering:0},ViewLine=function(){function ViewLine(isMainLine){(0,_classCallCheck3["default"])(this,ViewLine),this.position=[0,0,0],this.state=STATES.wandering,this.isMainLine=isMainLine,this.shader=new _mcgl.GLShader(_line2["default"],_line4["default"]),this.shader.bind(),this.delay=240*Math.random(),this.spline=new _Spline2["default"]([]),this.points=[],this.sub=3,this.height=.2,this.width=this.isMainLine?.5:.4*Math.random()+.1;for(var index=0,i=0;i<15;i++)this.points[index++]=[.5,0,this.width/15*i];this.targetPoint=[0,0,0],this.line=new _mcgl2["default"].geom.Line(this.shader.shaderProgram,this.getPoints(this.points)),this.line.points=this.line.vert,this.texture=new _mcgl2["default"].Texture(ASSET_URL+"images/stroke.png"),this.isMainLine?this.alpha=1:this.alpha=.4*Math.random()+.4,this.options={speed:this.isMainLine?1:.8*Math.random()+.2,time:100*Math.random()-50,targetPoint:this.targetPoint},this.motions={0:[_LinesMotions2["default"].move2.bind(_LinesMotions2["default"]),_LinesMotions2["default"].move3.bind(_LinesMotions2["default"]),_LinesMotions2["default"].move4.bind(_LinesMotions2["default"])]},this.changeMotion()}return(0,_createClass3["default"])(ViewLine,[{key:"changeMotion",value:function(e){this.motion=this.motions[this.state][Math.floor(Math.random()*this.motions[this.state].length)]}},{key:"onMouseMove",value:function(e){if(this.isMainLine){var x=e.screenX/window.innerWidth;e.screenY/window.innerHeight;this.targetPoint[0]=x}}},{key:"getPoints",value:function(pts){this.spline.points=pts;var indexArray=void 0,n_sub=this.sub;tempArray=[];for(var i=0;i<pts.length*n_sub;i++)indexArray=i/(pts.length*n_sub),this.spline.getPoint(indexArray,tempArray);return tempArray}},{key:"animateTargetPoint",value:function(){this.targetPoint[2]=.25*Math.sin(this.options.time/100)+.25,this.isMainLine||this.motion(this.options)}},{key:"newPoints",value:function(line){var pt0=line.points[0];pt0[0]+=.4*(this.targetPoint[0]-pt0[0]),pt0[2]+=.4*(this.targetPoint[2]-pt0[2]);for(var speed=.6,i=1;i<line.points.length;i++)line.points[i][0]+=(line.points[i-1][0]-line.points[i][0])*speed,line.points[i][2]=pt0[2]+i*this.width/line.points.length;var pts=line.points;return pts}},{key:"render",value:function(t,height){this.delay--,this.delay<0&&(this.delay=120*Math.random()+120,this.changeMotion()),this.options.time+=this.options.speed,this.shader.bind(),t.bind(),this.texture.bind(1),this.shader.uniform("texture","uniform1i",1),this.animateTargetPoint();var pts=this.newPoints(this.line);this.line.render(pts,!1),this.shader.uniform("alpha","float",this.alpha),this.shader.uniform("uTime","float",0),this.shader.uniform("u_position","vec3",this.position),this.shader.uniform("u_height","float",height),this.shader.uniform("aspect","float",window.innerWidth/window.innerHeight),this.shader.uniform("resolutions","vec2",[window.innerWidth,window.innerHeight]),GL.draw(this.line)}}]),ViewLine}();exports["default"]=ViewLine,module.exports=exports["default"]},function(module,exports,__webpack_require__){exports.glMatrix=__webpack_require__(224),exports.mat2=__webpack_require__(225),exports.mat2d=__webpack_require__(226),exports.mat3=__webpack_require__(227),exports.mat4=__webpack_require__(228),exports.quat=__webpack_require__(229),exports.vec2=__webpack_require__(232),exports.vec3=__webpack_require__(230),exports.vec4=__webpack_require__(231)},function(module,exports){var glMatrix={};glMatrix.EPSILON=1e-6,glMatrix.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,glMatrix.RANDOM=Math.random,glMatrix.ENABLE_SIMD=!1,glMatrix.SIMD_AVAILABLE=glMatrix.ARRAY_TYPE===Float32Array&&"SIMD"in this,glMatrix.USE_SIMD=glMatrix.ENABLE_SIMD&&glMatrix.SIMD_AVAILABLE,glMatrix.setMatrixArrayType=function(type){glMatrix.ARRAY_TYPE=type};var degree=Math.PI/180;glMatrix.toRadian=function(a){return a*degree},glMatrix.equals=function(a,b){return Math.abs(a-b)<=glMatrix.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))},module.exports=glMatrix},function(module,exports,__webpack_require__){var glMatrix=__webpack_require__(224),mat2={};mat2.create=function(){var out=new glMatrix.ARRAY_TYPE(4);return out[0]=1,out[1]=0,out[2]=0,out[3]=1,out},mat2.clone=function(a){var out=new glMatrix.ARRAY_TYPE(4);return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out},mat2.copy=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out},mat2.identity=function(out){return out[0]=1,out[1]=0,out[2]=0,out[3]=1,out},mat2.fromValues=function(m00,m01,m10,m11){var out=new glMatrix.ARRAY_TYPE(4);return out[0]=m00,out[1]=m01,out[2]=m10,out[3]=m11,out},mat2.set=function(out,m00,m01,m10,m11){return out[0]=m00,out[1]=m01,out[2]=m10,out[3]=m11,out},mat2.transpose=function(out,a){if(out===a){var a1=a[1];out[1]=a[2],out[2]=a1}else out[0]=a[0],out[1]=a[2],out[2]=a[1],out[3]=a[3];return out},mat2.invert=function(out,a){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],det=a0*a3-a2*a1;return det?(det=1/det,out[0]=a3*det,out[1]=-a1*det,out[2]=-a2*det,out[3]=a0*det,out):null},mat2.adjoint=function(out,a){var a0=a[0];return out[0]=a[3],out[1]=-a[1],out[2]=-a[2],out[3]=a0,out},mat2.determinant=function(a){return a[0]*a[3]-a[2]*a[1]},mat2.multiply=function(out,a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],b0=b[0],b1=b[1],b2=b[2],b3=b[3];return out[0]=a0*b0+a2*b1,out[1]=a1*b0+a3*b1,out[2]=a0*b2+a2*b3,out[3]=a1*b2+a3*b3,out},mat2.mul=mat2.multiply,mat2.rotate=function(out,a,rad){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],s=Math.sin(rad),c=Math.cos(rad);return out[0]=a0*c+a2*s,out[1]=a1*c+a3*s,out[2]=a0*-s+a2*c,out[3]=a1*-s+a3*c,out},mat2.scale=function(out,a,v){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],v0=v[0],v1=v[1];return out[0]=a0*v0,out[1]=a1*v0,out[2]=a2*v1,out[3]=a3*v1,out},mat2.fromRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);return out[0]=c,out[1]=s,out[2]=-s,out[3]=c,out},mat2.fromScaling=function(out,v){return out[0]=v[0],out[1]=0,out[2]=0,out[3]=v[1],out},mat2.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},mat2.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))},mat2.LDU=function(L,D,U,a){return L[2]=a[2]/a[0],U[0]=a[0],U[1]=a[1],U[3]=a[3]-L[2]*U[1],[L,D,U]},mat2.add=function(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out[2]=a[2]+b[2],out[3]=a[3]+b[3],out},mat2.subtract=function(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out[3]=a[3]-b[3],out},mat2.sub=mat2.subtract,mat2.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]},mat2.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],b0=b[0],b1=b[1],b2=b[2],b3=b[3];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=glMatrix.EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))},mat2.multiplyScalar=function(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out[3]=a[3]*b,out},mat2.multiplyScalarAndAdd=function(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out[2]=a[2]+b[2]*scale,out[3]=a[3]+b[3]*scale,out},module.exports=mat2},function(module,exports,__webpack_require__){var glMatrix=__webpack_require__(224),mat2d={};mat2d.create=function(){var out=new glMatrix.ARRAY_TYPE(6);return out[0]=1,out[1]=0,out[2]=0,out[3]=1,out[4]=0,out[5]=0,out},mat2d.clone=function(a){var out=new glMatrix.ARRAY_TYPE(6);return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out},mat2d.copy=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out},mat2d.identity=function(out){return out[0]=1,out[1]=0,out[2]=0,out[3]=1,out[4]=0,out[5]=0,out},mat2d.fromValues=function(a,b,c,d,tx,ty){var out=new glMatrix.ARRAY_TYPE(6);return out[0]=a,out[1]=b,out[2]=c,out[3]=d,out[4]=tx,out[5]=ty,out},mat2d.set=function(out,a,b,c,d,tx,ty){return out[0]=a,out[1]=b,out[2]=c,out[3]=d,out[4]=tx,out[5]=ty,out},mat2d.invert=function(out,a){var aa=a[0],ab=a[1],ac=a[2],ad=a[3],atx=a[4],aty=a[5],det=aa*ad-ab*ac;return det?(det=1/det,out[0]=ad*det,out[1]=-ab*det,out[2]=-ac*det,out[3]=aa*det,out[4]=(ac*aty-ad*atx)*det,out[5]=(ab*atx-aa*aty)*det,out):null},mat2d.determinant=function(a){return a[0]*a[3]-a[1]*a[2]},mat2d.multiply=function(out,a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5];return out[0]=a0*b0+a2*b1,out[1]=a1*b0+a3*b1,out[2]=a0*b2+a2*b3,out[3]=a1*b2+a3*b3,out[4]=a0*b4+a2*b5+a4,out[5]=a1*b4+a3*b5+a5,out},mat2d.mul=mat2d.multiply,mat2d.rotate=function(out,a,rad){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],s=Math.sin(rad),c=Math.cos(rad);return out[0]=a0*c+a2*s,out[1]=a1*c+a3*s,out[2]=a0*-s+a2*c,out[3]=a1*-s+a3*c,out[4]=a4,out[5]=a5,out},mat2d.scale=function(out,a,v){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],v0=v[0],v1=v[1];return out[0]=a0*v0,out[1]=a1*v0,out[2]=a2*v1,out[3]=a3*v1,out[4]=a4,out[5]=a5,out},mat2d.translate=function(out,a,v){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],v0=v[0],v1=v[1];return out[0]=a0,out[1]=a1,out[2]=a2,out[3]=a3,out[4]=a0*v0+a2*v1+a4,out[5]=a1*v0+a3*v1+a5,out},mat2d.fromRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);return out[0]=c,out[1]=s,out[2]=-s,out[3]=c,out[4]=0,out[5]=0,out},mat2d.fromScaling=function(out,v){return out[0]=v[0],out[1]=0,out[2]=0,out[3]=v[1],out[4]=0,out[5]=0,out},mat2d.fromTranslation=function(out,v){return out[0]=1,out[1]=0,out[2]=0,out[3]=1,out[4]=v[0],out[5]=v[1],out},mat2d.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"},mat2d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)},mat2d.add=function(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out[2]=a[2]+b[2],out[3]=a[3]+b[3],out[4]=a[4]+b[4],out[5]=a[5]+b[5],out},mat2d.subtract=function(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out[3]=a[3]-b[3],out[4]=a[4]-b[4],out[5]=a[5]-b[5],out},mat2d.sub=mat2d.subtract,mat2d.multiplyScalar=function(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out[3]=a[3]*b,out[4]=a[4]*b,out[5]=a[5]*b,out},mat2d.multiplyScalarAndAdd=function(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out[2]=a[2]+b[2]*scale,out[3]=a[3]+b[3]*scale,out[4]=a[4]+b[4]*scale,out[5]=a[5]+b[5]*scale,out},mat2d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]},mat2d.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=glMatrix.EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=glMatrix.EPSILON*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=glMatrix.EPSILON*Math.max(1,Math.abs(a5),Math.abs(b5))},module.exports=mat2d},function(module,exports,__webpack_require__){var glMatrix=__webpack_require__(224),mat3={};mat3.create=function(){var out=new glMatrix.ARRAY_TYPE(9);return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=1,out[5]=0,out[6]=0,out[7]=0,out[8]=1,out},mat3.fromMat4=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[4],out[4]=a[5],out[5]=a[6],out[6]=a[8],out[7]=a[9],out[8]=a[10],out},mat3.clone=function(a){var out=new glMatrix.ARRAY_TYPE(9);return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],out},mat3.copy=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],out},mat3.fromValues=function(m00,m01,m02,m10,m11,m12,m20,m21,m22){var out=new glMatrix.ARRAY_TYPE(9);return out[0]=m00,out[1]=m01,out[2]=m02,out[3]=m10,out[4]=m11,out[5]=m12,out[6]=m20,out[7]=m21,out[8]=m22,out},mat3.set=function(out,m00,m01,m02,m10,m11,m12,m20,m21,m22){return out[0]=m00,out[1]=m01,out[2]=m02,out[3]=m10,out[4]=m11,out[5]=m12,out[6]=m20,out[7]=m21,out[8]=m22,out},mat3.identity=function(out){return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=1,out[5]=0,out[6]=0,out[7]=0,out[8]=1,out},mat3.transpose=function(out,a){if(out===a){var a01=a[1],a02=a[2],a12=a[5];out[1]=a[3],out[2]=a[6],out[3]=a01,out[5]=a[7],out[6]=a02,out[7]=a12}else out[0]=a[0],out[1]=a[3],out[2]=a[6],out[3]=a[1],out[4]=a[4],out[5]=a[7],out[6]=a[2],out[7]=a[5],out[8]=a[8];return out},mat3.invert=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],b01=a22*a11-a12*a21,b11=-a22*a10+a12*a20,b21=a21*a10-a11*a20,det=a00*b01+a01*b11+a02*b21;return det?(det=1/det,out[0]=b01*det,out[1]=(-a22*a01+a02*a21)*det,out[2]=(a12*a01-a02*a11)*det,out[3]=b11*det,out[4]=(a22*a00-a02*a20)*det,out[5]=(-a12*a00+a02*a10)*det,out[6]=b21*det,out[7]=(-a21*a00+a01*a20)*det,out[8]=(a11*a00-a01*a10)*det,out):null},mat3.adjoint=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8];return out[0]=a11*a22-a12*a21,out[1]=a02*a21-a01*a22,out[2]=a01*a12-a02*a11,out[3]=a12*a20-a10*a22,out[4]=a00*a22-a02*a20,out[5]=a02*a10-a00*a12,out[6]=a10*a21-a11*a20,out[7]=a01*a20-a00*a21,out[8]=a00*a11-a01*a10,out},mat3.determinant=function(a){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8];return a00*(a22*a11-a12*a21)+a01*(-a22*a10+a12*a20)+a02*(a21*a10-a11*a20)},mat3.multiply=function(out,a,b){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],b00=b[0],b01=b[1],b02=b[2],b10=b[3],b11=b[4],b12=b[5],b20=b[6],b21=b[7],b22=b[8];return out[0]=b00*a00+b01*a10+b02*a20,out[1]=b00*a01+b01*a11+b02*a21,out[2]=b00*a02+b01*a12+b02*a22,out[3]=b10*a00+b11*a10+b12*a20,out[4]=b10*a01+b11*a11+b12*a21,out[5]=b10*a02+b11*a12+b12*a22,out[6]=b20*a00+b21*a10+b22*a20,out[7]=b20*a01+b21*a11+b22*a21,out[8]=b20*a02+b21*a12+b22*a22,out},mat3.mul=mat3.multiply,mat3.translate=function(out,a,v){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],x=v[0],y=v[1];return out[0]=a00,out[1]=a01,out[2]=a02,out[3]=a10,out[4]=a11,out[5]=a12,out[6]=x*a00+y*a10+a20,out[7]=x*a01+y*a11+a21,out[8]=x*a02+y*a12+a22,out},mat3.rotate=function(out,a,rad){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],s=Math.sin(rad),c=Math.cos(rad);return out[0]=c*a00+s*a10,out[1]=c*a01+s*a11,out[2]=c*a02+s*a12,out[3]=c*a10-s*a00,out[4]=c*a11-s*a01,out[5]=c*a12-s*a02,out[6]=a20,out[7]=a21,out[8]=a22,out},mat3.scale=function(out,a,v){var x=v[0],y=v[1];return out[0]=x*a[0],out[1]=x*a[1],out[2]=x*a[2],out[3]=y*a[3],out[4]=y*a[4],out[5]=y*a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],out},mat3.fromTranslation=function(out,v){return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=1,out[5]=0,out[6]=v[0],out[7]=v[1],out[8]=1,out},mat3.fromRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);return out[0]=c,out[1]=s,out[2]=0,out[3]=-s,out[4]=c,out[5]=0,out[6]=0,out[7]=0,out[8]=1,out},mat3.fromScaling=function(out,v){return out[0]=v[0],out[1]=0,out[2]=0,out[3]=0,out[4]=v[1],out[5]=0,out[6]=0,out[7]=0,out[8]=1,out},mat3.fromMat2d=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=0,out[3]=a[2],out[4]=a[3],out[5]=0,out[6]=a[4],out[7]=a[5],out[8]=1,out},mat3.fromQuat=function(out,q){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,yx=y*x2,yy=y*y2,zx=z*x2,zy=z*y2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;return out[0]=1-yy-zz,out[3]=yx-wz,out[6]=zx+wy,out[1]=yx+wz,out[4]=1-xx-zz,out[7]=zy-wx,out[2]=zx-wy,out[5]=zy+wx,out[8]=1-xx-yy,out},mat3.normalFromMat4=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;return det?(det=1/det,out[0]=(a11*b11-a12*b10+a13*b09)*det,out[1]=(a12*b08-a10*b11-a13*b07)*det,out[2]=(a10*b10-a11*b08+a13*b06)*det,out[3]=(a02*b10-a01*b11-a03*b09)*det,out[4]=(a00*b11-a02*b08+a03*b07)*det,out[5]=(a01*b08-a00*b10-a03*b06)*det,out[6]=(a31*b05-a32*b04+a33*b03)*det,out[7]=(a32*b02-a30*b05-a33*b01)*det,out[8]=(a30*b04-a31*b02+a33*b00)*det,out):null},mat3.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"},mat3.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))},mat3.add=function(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out[2]=a[2]+b[2],out[3]=a[3]+b[3],out[4]=a[4]+b[4],out[5]=a[5]+b[5],out[6]=a[6]+b[6],out[7]=a[7]+b[7],out[8]=a[8]+b[8],out},mat3.subtract=function(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out[3]=a[3]-b[3],out[4]=a[4]-b[4],out[5]=a[5]-b[5],out[6]=a[6]-b[6],out[7]=a[7]-b[7],out[8]=a[8]-b[8],out},mat3.sub=mat3.subtract,mat3.multiplyScalar=function(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out[3]=a[3]*b,out[4]=a[4]*b,out[5]=a[5]*b,out[6]=a[6]*b,out[7]=a[7]*b,out[8]=a[8]*b,out},mat3.multiplyScalarAndAdd=function(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out[2]=a[2]+b[2]*scale,out[3]=a[3]+b[3]*scale,out[4]=a[4]+b[4]*scale,out[5]=a[5]+b[5]*scale,out[6]=a[6]+b[6]*scale,out[7]=a[7]+b[7]*scale,out[8]=a[8]+b[8]*scale,out},mat3.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]},mat3.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],a6=a[6],a7=a[7],a8=a[8],b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=a[6],b7=b[7],b8=b[8];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=glMatrix.EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=glMatrix.EPSILON*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=glMatrix.EPSILON*Math.max(1,Math.abs(a5),Math.abs(b5))&&Math.abs(a6-b6)<=glMatrix.EPSILON*Math.max(1,Math.abs(a6),Math.abs(b6))&&Math.abs(a7-b7)<=glMatrix.EPSILON*Math.max(1,Math.abs(a7),Math.abs(b7))&&Math.abs(a8-b8)<=glMatrix.EPSILON*Math.max(1,Math.abs(a8),Math.abs(b8))},module.exports=mat3},function(module,exports,__webpack_require__){var glMatrix=__webpack_require__(224),mat4={scalar:{},SIMD:{}};mat4.create=function(){var out=new glMatrix.ARRAY_TYPE(16);return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=1,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=1,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},mat4.clone=function(a){var out=new glMatrix.ARRAY_TYPE(16);return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],out[9]=a[9],out[10]=a[10],out[11]=a[11],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15],out},mat4.copy=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],out[9]=a[9],out[10]=a[10],out[11]=a[11],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15],out},mat4.fromValues=function(m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33){var out=new glMatrix.ARRAY_TYPE(16);return out[0]=m00,out[1]=m01,out[2]=m02,out[3]=m03,out[4]=m10,out[5]=m11,out[6]=m12,out[7]=m13,out[8]=m20,out[9]=m21,out[10]=m22,out[11]=m23,out[12]=m30,out[13]=m31,out[14]=m32,out[15]=m33,out},mat4.set=function(out,m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33){return out[0]=m00,out[1]=m01,out[2]=m02,out[3]=m03,out[4]=m10,out[5]=m11,out[6]=m12,out[7]=m13,out[8]=m20,out[9]=m21,out[10]=m22,out[11]=m23,out[12]=m30,out[13]=m31,out[14]=m32,out[15]=m33,out},mat4.identity=function(out){return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=1,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=1,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},mat4.scalar.transpose=function(out,a){if(out===a){var a01=a[1],a02=a[2],a03=a[3],a12=a[6],a13=a[7],a23=a[11];out[1]=a[4],out[2]=a[8],out[3]=a[12],out[4]=a01,out[6]=a[9],out[7]=a[13],out[8]=a02,out[9]=a12,out[11]=a[14],out[12]=a03,out[13]=a13,out[14]=a23}else out[0]=a[0],out[1]=a[4],out[2]=a[8],out[3]=a[12],out[4]=a[1],out[5]=a[5],out[6]=a[9],out[7]=a[13],out[8]=a[2],out[9]=a[6],out[10]=a[10],out[11]=a[14],out[12]=a[3],out[13]=a[7],out[14]=a[11],out[15]=a[15];return out},mat4.SIMD.transpose=function(out,a){var a0,a1,a2,a3,tmp01,tmp23,out0,out1,out2,out3;return a0=SIMD.Float32x4.load(a,0),a1=SIMD.Float32x4.load(a,4),a2=SIMD.Float32x4.load(a,8),a3=SIMD.Float32x4.load(a,12),tmp01=SIMD.Float32x4.shuffle(a0,a1,0,1,4,5),tmp23=SIMD.Float32x4.shuffle(a2,a3,0,1,4,5),out0=SIMD.Float32x4.shuffle(tmp01,tmp23,0,2,4,6),out1=SIMD.Float32x4.shuffle(tmp01,tmp23,1,3,5,7),SIMD.Float32x4.store(out,0,out0),SIMD.Float32x4.store(out,4,out1),tmp01=SIMD.Float32x4.shuffle(a0,a1,2,3,6,7),tmp23=SIMD.Float32x4.shuffle(a2,a3,2,3,6,7),out2=SIMD.Float32x4.shuffle(tmp01,tmp23,0,2,4,6),out3=SIMD.Float32x4.shuffle(tmp01,tmp23,1,3,5,7),SIMD.Float32x4.store(out,8,out2),SIMD.Float32x4.store(out,12,out3),out},mat4.transpose=glMatrix.USE_SIMD?mat4.SIMD.transpose:mat4.scalar.transpose,mat4.scalar.invert=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;return det?(det=1/det,out[0]=(a11*b11-a12*b10+a13*b09)*det,out[1]=(a02*b10-a01*b11-a03*b09)*det,out[2]=(a31*b05-a32*b04+a33*b03)*det,out[3]=(a22*b04-a21*b05-a23*b03)*det,out[4]=(a12*b08-a10*b11-a13*b07)*det,out[5]=(a00*b11-a02*b08+a03*b07)*det,out[6]=(a32*b02-a30*b05-a33*b01)*det,out[7]=(a20*b05-a22*b02+a23*b01)*det,out[8]=(a10*b10-a11*b08+a13*b06)*det,out[9]=(a01*b08-a00*b10-a03*b06)*det,out[10]=(a30*b04-a31*b02+a33*b00)*det,out[11]=(a21*b02-a20*b04-a23*b00)*det,out[12]=(a11*b07-a10*b09-a12*b06)*det,out[13]=(a00*b09-a01*b07+a02*b06)*det,out[14]=(a31*b01-a30*b03-a32*b00)*det,out[15]=(a20*b03-a21*b01+a22*b00)*det,out):null},mat4.SIMD.invert=function(out,a){var row0,row1,row2,row3,tmp1,minor0,minor1,minor2,minor3,det,a0=SIMD.Float32x4.load(a,0),a1=SIMD.Float32x4.load(a,4),a2=SIMD.Float32x4.load(a,8),a3=SIMD.Float32x4.load(a,12);return tmp1=SIMD.Float32x4.shuffle(a0,a1,0,1,4,5),row1=SIMD.Float32x4.shuffle(a2,a3,0,1,4,5),row0=SIMD.Float32x4.shuffle(tmp1,row1,0,2,4,6),row1=SIMD.Float32x4.shuffle(row1,tmp1,1,3,5,7),tmp1=SIMD.Float32x4.shuffle(a0,a1,2,3,6,7),row3=SIMD.Float32x4.shuffle(a2,a3,2,3,6,7),row2=SIMD.Float32x4.shuffle(tmp1,row3,0,2,4,6),row3=SIMD.Float32x4.shuffle(row3,tmp1,1,3,5,7),tmp1=SIMD.Float32x4.mul(row2,row3),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor0=SIMD.Float32x4.mul(row1,tmp1),minor1=SIMD.Float32x4.mul(row0,tmp1),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor0=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row1,tmp1),minor0),minor1=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0,tmp1),minor1),minor1=SIMD.Float32x4.swizzle(minor1,2,3,0,1),tmp1=SIMD.Float32x4.mul(row1,row2),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor0=SIMD.Float32x4.add(SIMD.Float32x4.mul(row3,tmp1),minor0),minor3=SIMD.Float32x4.mul(row0,tmp1),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor0=SIMD.Float32x4.sub(minor0,SIMD.Float32x4.mul(row3,tmp1)),minor3=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0,tmp1),minor3),minor3=SIMD.Float32x4.swizzle(minor3,2,3,0,1),
tmp1=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(row1,2,3,0,1),row3),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),row2=SIMD.Float32x4.swizzle(row2,2,3,0,1),minor0=SIMD.Float32x4.add(SIMD.Float32x4.mul(row2,tmp1),minor0),minor2=SIMD.Float32x4.mul(row0,tmp1),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor0=SIMD.Float32x4.sub(minor0,SIMD.Float32x4.mul(row2,tmp1)),minor2=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0,tmp1),minor2),minor2=SIMD.Float32x4.swizzle(minor2,2,3,0,1),tmp1=SIMD.Float32x4.mul(row0,row1),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor2=SIMD.Float32x4.add(SIMD.Float32x4.mul(row3,tmp1),minor2),minor3=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row2,tmp1),minor3),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor2=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row3,tmp1),minor2),minor3=SIMD.Float32x4.sub(minor3,SIMD.Float32x4.mul(row2,tmp1)),tmp1=SIMD.Float32x4.mul(row0,row3),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor1=SIMD.Float32x4.sub(minor1,SIMD.Float32x4.mul(row2,tmp1)),minor2=SIMD.Float32x4.add(SIMD.Float32x4.mul(row1,tmp1),minor2),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor1=SIMD.Float32x4.add(SIMD.Float32x4.mul(row2,tmp1),minor1),minor2=SIMD.Float32x4.sub(minor2,SIMD.Float32x4.mul(row1,tmp1)),tmp1=SIMD.Float32x4.mul(row0,row2),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor1=SIMD.Float32x4.add(SIMD.Float32x4.mul(row3,tmp1),minor1),minor3=SIMD.Float32x4.sub(minor3,SIMD.Float32x4.mul(row1,tmp1)),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor1=SIMD.Float32x4.sub(minor1,SIMD.Float32x4.mul(row3,tmp1)),minor3=SIMD.Float32x4.add(SIMD.Float32x4.mul(row1,tmp1),minor3),det=SIMD.Float32x4.mul(row0,minor0),det=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(det,2,3,0,1),det),det=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(det,1,0,3,2),det),tmp1=SIMD.Float32x4.reciprocalApproximation(det),det=SIMD.Float32x4.sub(SIMD.Float32x4.add(tmp1,tmp1),SIMD.Float32x4.mul(det,SIMD.Float32x4.mul(tmp1,tmp1))),(det=SIMD.Float32x4.swizzle(det,0,0,0,0))?(SIMD.Float32x4.store(out,0,SIMD.Float32x4.mul(det,minor0)),SIMD.Float32x4.store(out,4,SIMD.Float32x4.mul(det,minor1)),SIMD.Float32x4.store(out,8,SIMD.Float32x4.mul(det,minor2)),SIMD.Float32x4.store(out,12,SIMD.Float32x4.mul(det,minor3)),out):null},mat4.invert=glMatrix.USE_SIMD?mat4.SIMD.invert:mat4.scalar.invert,mat4.scalar.adjoint=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15];return out[0]=a11*(a22*a33-a23*a32)-a21*(a12*a33-a13*a32)+a31*(a12*a23-a13*a22),out[1]=-(a01*(a22*a33-a23*a32)-a21*(a02*a33-a03*a32)+a31*(a02*a23-a03*a22)),out[2]=a01*(a12*a33-a13*a32)-a11*(a02*a33-a03*a32)+a31*(a02*a13-a03*a12),out[3]=-(a01*(a12*a23-a13*a22)-a11*(a02*a23-a03*a22)+a21*(a02*a13-a03*a12)),out[4]=-(a10*(a22*a33-a23*a32)-a20*(a12*a33-a13*a32)+a30*(a12*a23-a13*a22)),out[5]=a00*(a22*a33-a23*a32)-a20*(a02*a33-a03*a32)+a30*(a02*a23-a03*a22),out[6]=-(a00*(a12*a33-a13*a32)-a10*(a02*a33-a03*a32)+a30*(a02*a13-a03*a12)),out[7]=a00*(a12*a23-a13*a22)-a10*(a02*a23-a03*a22)+a20*(a02*a13-a03*a12),out[8]=a10*(a21*a33-a23*a31)-a20*(a11*a33-a13*a31)+a30*(a11*a23-a13*a21),out[9]=-(a00*(a21*a33-a23*a31)-a20*(a01*a33-a03*a31)+a30*(a01*a23-a03*a21)),out[10]=a00*(a11*a33-a13*a31)-a10*(a01*a33-a03*a31)+a30*(a01*a13-a03*a11),out[11]=-(a00*(a11*a23-a13*a21)-a10*(a01*a23-a03*a21)+a20*(a01*a13-a03*a11)),out[12]=-(a10*(a21*a32-a22*a31)-a20*(a11*a32-a12*a31)+a30*(a11*a22-a12*a21)),out[13]=a00*(a21*a32-a22*a31)-a20*(a01*a32-a02*a31)+a30*(a01*a22-a02*a21),out[14]=-(a00*(a11*a32-a12*a31)-a10*(a01*a32-a02*a31)+a30*(a01*a12-a02*a11)),out[15]=a00*(a11*a22-a12*a21)-a10*(a01*a22-a02*a21)+a20*(a01*a12-a02*a11),out},mat4.SIMD.adjoint=function(out,a){var a0,a1,a2,a3,row0,row1,row2,row3,tmp1,minor0,minor1,minor2,minor3,a0=SIMD.Float32x4.load(a,0),a1=SIMD.Float32x4.load(a,4),a2=SIMD.Float32x4.load(a,8),a3=SIMD.Float32x4.load(a,12);return tmp1=SIMD.Float32x4.shuffle(a0,a1,0,1,4,5),row1=SIMD.Float32x4.shuffle(a2,a3,0,1,4,5),row0=SIMD.Float32x4.shuffle(tmp1,row1,0,2,4,6),row1=SIMD.Float32x4.shuffle(row1,tmp1,1,3,5,7),tmp1=SIMD.Float32x4.shuffle(a0,a1,2,3,6,7),row3=SIMD.Float32x4.shuffle(a2,a3,2,3,6,7),row2=SIMD.Float32x4.shuffle(tmp1,row3,0,2,4,6),row3=SIMD.Float32x4.shuffle(row3,tmp1,1,3,5,7),tmp1=SIMD.Float32x4.mul(row2,row3),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor0=SIMD.Float32x4.mul(row1,tmp1),minor1=SIMD.Float32x4.mul(row0,tmp1),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor0=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row1,tmp1),minor0),minor1=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0,tmp1),minor1),minor1=SIMD.Float32x4.swizzle(minor1,2,3,0,1),tmp1=SIMD.Float32x4.mul(row1,row2),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor0=SIMD.Float32x4.add(SIMD.Float32x4.mul(row3,tmp1),minor0),minor3=SIMD.Float32x4.mul(row0,tmp1),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor0=SIMD.Float32x4.sub(minor0,SIMD.Float32x4.mul(row3,tmp1)),minor3=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0,tmp1),minor3),minor3=SIMD.Float32x4.swizzle(minor3,2,3,0,1),tmp1=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(row1,2,3,0,1),row3),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),row2=SIMD.Float32x4.swizzle(row2,2,3,0,1),minor0=SIMD.Float32x4.add(SIMD.Float32x4.mul(row2,tmp1),minor0),minor2=SIMD.Float32x4.mul(row0,tmp1),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor0=SIMD.Float32x4.sub(minor0,SIMD.Float32x4.mul(row2,tmp1)),minor2=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0,tmp1),minor2),minor2=SIMD.Float32x4.swizzle(minor2,2,3,0,1),tmp1=SIMD.Float32x4.mul(row0,row1),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor2=SIMD.Float32x4.add(SIMD.Float32x4.mul(row3,tmp1),minor2),minor3=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row2,tmp1),minor3),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor2=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row3,tmp1),minor2),minor3=SIMD.Float32x4.sub(minor3,SIMD.Float32x4.mul(row2,tmp1)),tmp1=SIMD.Float32x4.mul(row0,row3),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor1=SIMD.Float32x4.sub(minor1,SIMD.Float32x4.mul(row2,tmp1)),minor2=SIMD.Float32x4.add(SIMD.Float32x4.mul(row1,tmp1),minor2),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor1=SIMD.Float32x4.add(SIMD.Float32x4.mul(row2,tmp1),minor1),minor2=SIMD.Float32x4.sub(minor2,SIMD.Float32x4.mul(row1,tmp1)),tmp1=SIMD.Float32x4.mul(row0,row2),tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2),minor1=SIMD.Float32x4.add(SIMD.Float32x4.mul(row3,tmp1),minor1),minor3=SIMD.Float32x4.sub(minor3,SIMD.Float32x4.mul(row1,tmp1)),tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1),minor1=SIMD.Float32x4.sub(minor1,SIMD.Float32x4.mul(row3,tmp1)),minor3=SIMD.Float32x4.add(SIMD.Float32x4.mul(row1,tmp1),minor3),SIMD.Float32x4.store(out,0,minor0),SIMD.Float32x4.store(out,4,minor1),SIMD.Float32x4.store(out,8,minor2),SIMD.Float32x4.store(out,12,minor3),out},mat4.adjoint=glMatrix.USE_SIMD?mat4.SIMD.adjoint:mat4.scalar.adjoint,mat4.determinant=function(a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32;return b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06},mat4.SIMD.multiply=function(out,a,b){var a0=SIMD.Float32x4.load(a,0),a1=SIMD.Float32x4.load(a,4),a2=SIMD.Float32x4.load(a,8),a3=SIMD.Float32x4.load(a,12),b0=SIMD.Float32x4.load(b,0),out0=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0,0,0,0,0),a0),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0,1,1,1,1),a1),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0,2,2,2,2),a2),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0,3,3,3,3),a3))));SIMD.Float32x4.store(out,0,out0);var b1=SIMD.Float32x4.load(b,4),out1=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1,0,0,0,0),a0),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1,1,1,1,1),a1),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1,2,2,2,2),a2),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1,3,3,3,3),a3))));SIMD.Float32x4.store(out,4,out1);var b2=SIMD.Float32x4.load(b,8),out2=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2,0,0,0,0),a0),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2,1,1,1,1),a1),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2,2,2,2,2),a2),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2,3,3,3,3),a3))));SIMD.Float32x4.store(out,8,out2);var b3=SIMD.Float32x4.load(b,12),out3=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3,0,0,0,0),a0),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3,1,1,1,1),a1),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3,2,2,2,2),a2),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3,3,3,3,3),a3))));return SIMD.Float32x4.store(out,12,out3),out},mat4.scalar.multiply=function(out,a,b){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b0=b[0],b1=b[1],b2=b[2],b3=b[3];return out[0]=b0*a00+b1*a10+b2*a20+b3*a30,out[1]=b0*a01+b1*a11+b2*a21+b3*a31,out[2]=b0*a02+b1*a12+b2*a22+b3*a32,out[3]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[4],b1=b[5],b2=b[6],b3=b[7],out[4]=b0*a00+b1*a10+b2*a20+b3*a30,out[5]=b0*a01+b1*a11+b2*a21+b3*a31,out[6]=b0*a02+b1*a12+b2*a22+b3*a32,out[7]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[8],b1=b[9],b2=b[10],b3=b[11],out[8]=b0*a00+b1*a10+b2*a20+b3*a30,out[9]=b0*a01+b1*a11+b2*a21+b3*a31,out[10]=b0*a02+b1*a12+b2*a22+b3*a32,out[11]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[12],b1=b[13],b2=b[14],b3=b[15],out[12]=b0*a00+b1*a10+b2*a20+b3*a30,out[13]=b0*a01+b1*a11+b2*a21+b3*a31,out[14]=b0*a02+b1*a12+b2*a22+b3*a32,out[15]=b0*a03+b1*a13+b2*a23+b3*a33,out},mat4.multiply=glMatrix.USE_SIMD?mat4.SIMD.multiply:mat4.scalar.multiply,mat4.mul=mat4.multiply,mat4.scalar.translate=function(out,a,v){var a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,x=v[0],y=v[1],z=v[2];return a===out?(out[12]=a[0]*x+a[4]*y+a[8]*z+a[12],out[13]=a[1]*x+a[5]*y+a[9]*z+a[13],out[14]=a[2]*x+a[6]*y+a[10]*z+a[14],out[15]=a[3]*x+a[7]*y+a[11]*z+a[15]):(a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],out[0]=a00,out[1]=a01,out[2]=a02,out[3]=a03,out[4]=a10,out[5]=a11,out[6]=a12,out[7]=a13,out[8]=a20,out[9]=a21,out[10]=a22,out[11]=a23,out[12]=a00*x+a10*y+a20*z+a[12],out[13]=a01*x+a11*y+a21*z+a[13],out[14]=a02*x+a12*y+a22*z+a[14],out[15]=a03*x+a13*y+a23*z+a[15]),out},mat4.SIMD.translate=function(out,a,v){var a0=SIMD.Float32x4.load(a,0),a1=SIMD.Float32x4.load(a,4),a2=SIMD.Float32x4.load(a,8),a3=SIMD.Float32x4.load(a,12),vec=SIMD.Float32x4(v[0],v[1],v[2],0);a!==out&&(out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[8]=a[8],out[9]=a[9],out[10]=a[10],out[11]=a[11]),a0=SIMD.Float32x4.mul(a0,SIMD.Float32x4.swizzle(vec,0,0,0,0)),a1=SIMD.Float32x4.mul(a1,SIMD.Float32x4.swizzle(vec,1,1,1,1)),a2=SIMD.Float32x4.mul(a2,SIMD.Float32x4.swizzle(vec,2,2,2,2));var t0=SIMD.Float32x4.add(a0,SIMD.Float32x4.add(a1,SIMD.Float32x4.add(a2,a3)));return SIMD.Float32x4.store(out,12,t0),out},mat4.translate=glMatrix.USE_SIMD?mat4.SIMD.translate:mat4.scalar.translate,mat4.scalar.scale=function(out,a,v){var x=v[0],y=v[1],z=v[2];return out[0]=a[0]*x,out[1]=a[1]*x,out[2]=a[2]*x,out[3]=a[3]*x,out[4]=a[4]*y,out[5]=a[5]*y,out[6]=a[6]*y,out[7]=a[7]*y,out[8]=a[8]*z,out[9]=a[9]*z,out[10]=a[10]*z,out[11]=a[11]*z,out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15],out},mat4.SIMD.scale=function(out,a,v){var a0,a1,a2,vec=SIMD.Float32x4(v[0],v[1],v[2],0);return a0=SIMD.Float32x4.load(a,0),SIMD.Float32x4.store(out,0,SIMD.Float32x4.mul(a0,SIMD.Float32x4.swizzle(vec,0,0,0,0))),a1=SIMD.Float32x4.load(a,4),SIMD.Float32x4.store(out,4,SIMD.Float32x4.mul(a1,SIMD.Float32x4.swizzle(vec,1,1,1,1))),a2=SIMD.Float32x4.load(a,8),SIMD.Float32x4.store(out,8,SIMD.Float32x4.mul(a2,SIMD.Float32x4.swizzle(vec,2,2,2,2))),out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15],out},mat4.scale=glMatrix.USE_SIMD?mat4.SIMD.scale:mat4.scalar.scale,mat4.rotate=function(out,a,rad,axis){var s,c,t,a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,b00,b01,b02,b10,b11,b12,b20,b21,b22,x=axis[0],y=axis[1],z=axis[2],len=Math.sqrt(x*x+y*y+z*z);return Math.abs(len)<glMatrix.EPSILON?null:(len=1/len,x*=len,y*=len,z*=len,s=Math.sin(rad),c=Math.cos(rad),t=1-c,a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],b00=x*x*t+c,b01=y*x*t+z*s,b02=z*x*t-y*s,b10=x*y*t-z*s,b11=y*y*t+c,b12=z*y*t+x*s,b20=x*z*t+y*s,b21=y*z*t-x*s,b22=z*z*t+c,out[0]=a00*b00+a10*b01+a20*b02,out[1]=a01*b00+a11*b01+a21*b02,out[2]=a02*b00+a12*b01+a22*b02,out[3]=a03*b00+a13*b01+a23*b02,out[4]=a00*b10+a10*b11+a20*b12,out[5]=a01*b10+a11*b11+a21*b12,out[6]=a02*b10+a12*b11+a22*b12,out[7]=a03*b10+a13*b11+a23*b12,out[8]=a00*b20+a10*b21+a20*b22,out[9]=a01*b20+a11*b21+a21*b22,out[10]=a02*b20+a12*b21+a22*b22,out[11]=a03*b20+a13*b21+a23*b22,a!==out&&(out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out)},mat4.scalar.rotateX=function(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11];return a!==out&&(out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out[4]=a10*c+a20*s,out[5]=a11*c+a21*s,out[6]=a12*c+a22*s,out[7]=a13*c+a23*s,out[8]=a20*c-a10*s,out[9]=a21*c-a11*s,out[10]=a22*c-a12*s,out[11]=a23*c-a13*s,out},mat4.SIMD.rotateX=function(out,a,rad){var s=SIMD.Float32x4.splat(Math.sin(rad)),c=SIMD.Float32x4.splat(Math.cos(rad));a!==out&&(out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]);var a_1=SIMD.Float32x4.load(a,4),a_2=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(out,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(a_1,c),SIMD.Float32x4.mul(a_2,s))),SIMD.Float32x4.store(out,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a_2,c),SIMD.Float32x4.mul(a_1,s))),out},mat4.rotateX=glMatrix.USE_SIMD?mat4.SIMD.rotateX:mat4.scalar.rotateX,mat4.scalar.rotateY=function(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a20=a[8],a21=a[9],a22=a[10],a23=a[11];return a!==out&&(out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out[0]=a00*c-a20*s,out[1]=a01*c-a21*s,out[2]=a02*c-a22*s,out[3]=a03*c-a23*s,out[8]=a00*s+a20*c,out[9]=a01*s+a21*c,out[10]=a02*s+a22*c,out[11]=a03*s+a23*c,out},mat4.SIMD.rotateY=function(out,a,rad){var s=SIMD.Float32x4.splat(Math.sin(rad)),c=SIMD.Float32x4.splat(Math.cos(rad));a!==out&&(out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]);var a_0=SIMD.Float32x4.load(a,0),a_2=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(out,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a_0,c),SIMD.Float32x4.mul(a_2,s))),SIMD.Float32x4.store(out,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(a_0,s),SIMD.Float32x4.mul(a_2,c))),out},mat4.rotateY=glMatrix.USE_SIMD?mat4.SIMD.rotateY:mat4.scalar.rotateY,mat4.scalar.rotateZ=function(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7];return a!==out&&(out[8]=a[8],out[9]=a[9],out[10]=a[10],out[11]=a[11],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out[0]=a00*c+a10*s,out[1]=a01*c+a11*s,out[2]=a02*c+a12*s,out[3]=a03*c+a13*s,out[4]=a10*c-a00*s,out[5]=a11*c-a01*s,out[6]=a12*c-a02*s,out[7]=a13*c-a03*s,out},mat4.SIMD.rotateZ=function(out,a,rad){var s=SIMD.Float32x4.splat(Math.sin(rad)),c=SIMD.Float32x4.splat(Math.cos(rad));a!==out&&(out[8]=a[8],out[9]=a[9],out[10]=a[10],out[11]=a[11],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]);var a_0=SIMD.Float32x4.load(a,0),a_1=SIMD.Float32x4.load(a,4);return SIMD.Float32x4.store(out,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(a_0,c),SIMD.Float32x4.mul(a_1,s))),SIMD.Float32x4.store(out,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a_1,c),SIMD.Float32x4.mul(a_0,s))),out},mat4.rotateZ=glMatrix.USE_SIMD?mat4.SIMD.rotateZ:mat4.scalar.rotateZ,mat4.fromTranslation=function(out,v){return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=1,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=1,out[11]=0,out[12]=v[0],out[13]=v[1],out[14]=v[2],out[15]=1,out},mat4.fromScaling=function(out,v){return out[0]=v[0],out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=v[1],out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=v[2],out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},mat4.fromRotation=function(out,rad,axis){var s,c,t,x=axis[0],y=axis[1],z=axis[2],len=Math.sqrt(x*x+y*y+z*z);return Math.abs(len)<glMatrix.EPSILON?null:(len=1/len,x*=len,y*=len,z*=len,s=Math.sin(rad),c=Math.cos(rad),t=1-c,out[0]=x*x*t+c,out[1]=y*x*t+z*s,out[2]=z*x*t-y*s,out[3]=0,out[4]=x*y*t-z*s,out[5]=y*y*t+c,out[6]=z*y*t+x*s,out[7]=0,out[8]=x*z*t+y*s,out[9]=y*z*t-x*s,out[10]=z*z*t+c,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out)},mat4.fromXRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=c,out[6]=s,out[7]=0,out[8]=0,out[9]=-s,out[10]=c,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},mat4.fromYRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);return out[0]=c,out[1]=0,out[2]=-s,out[3]=0,out[4]=0,out[5]=1,out[6]=0,out[7]=0,out[8]=s,out[9]=0,out[10]=c,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},mat4.fromZRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);return out[0]=c,out[1]=s,out[2]=0,out[3]=0,out[4]=-s,out[5]=c,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=1,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},mat4.fromRotationTranslation=function(out,q,v){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;return out[0]=1-(yy+zz),out[1]=xy+wz,out[2]=xz-wy,out[3]=0,out[4]=xy-wz,out[5]=1-(xx+zz),out[6]=yz+wx,out[7]=0,out[8]=xz+wy,out[9]=yz-wx,out[10]=1-(xx+yy),out[11]=0,out[12]=v[0],out[13]=v[1],out[14]=v[2],out[15]=1,out},mat4.getTranslation=function(out,mat){return out[0]=mat[12],out[1]=mat[13],out[2]=mat[14],out},mat4.getRotation=function(out,mat){var trace=mat[0]+mat[5]+mat[10],S=0;return trace>0?(S=2*Math.sqrt(trace+1),out[3]=.25*S,out[0]=(mat[6]-mat[9])/S,out[1]=(mat[8]-mat[2])/S,out[2]=(mat[1]-mat[4])/S):mat[0]>mat[5]&mat[0]>mat[10]?(S=2*Math.sqrt(1+mat[0]-mat[5]-mat[10]),out[3]=(mat[6]-mat[9])/S,out[0]=.25*S,out[1]=(mat[1]+mat[4])/S,out[2]=(mat[8]+mat[2])/S):mat[5]>mat[10]?(S=2*Math.sqrt(1+mat[5]-mat[0]-mat[10]),out[3]=(mat[8]-mat[2])/S,out[0]=(mat[1]+mat[4])/S,out[1]=.25*S,out[2]=(mat[6]+mat[9])/S):(S=2*Math.sqrt(1+mat[10]-mat[0]-mat[5]),out[3]=(mat[1]-mat[4])/S,out[0]=(mat[8]+mat[2])/S,out[1]=(mat[6]+mat[9])/S,out[2]=.25*S),out},mat4.fromRotationTranslationScale=function(out,q,v,s){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2,sx=s[0],sy=s[1],sz=s[2];return out[0]=(1-(yy+zz))*sx,out[1]=(xy+wz)*sx,out[2]=(xz-wy)*sx,out[3]=0,out[4]=(xy-wz)*sy,out[5]=(1-(xx+zz))*sy,out[6]=(yz+wx)*sy,out[7]=0,out[8]=(xz+wy)*sz,out[9]=(yz-wx)*sz,out[10]=(1-(xx+yy))*sz,out[11]=0,out[12]=v[0],out[13]=v[1],out[14]=v[2],out[15]=1,out},mat4.fromRotationTranslationScaleOrigin=function(out,q,v,s,o){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2,sx=s[0],sy=s[1],sz=s[2],ox=o[0],oy=o[1],oz=o[2];return out[0]=(1-(yy+zz))*sx,out[1]=(xy+wz)*sx,out[2]=(xz-wy)*sx,out[3]=0,out[4]=(xy-wz)*sy,out[5]=(1-(xx+zz))*sy,out[6]=(yz+wx)*sy,out[7]=0,out[8]=(xz+wy)*sz,out[9]=(yz-wx)*sz,out[10]=(1-(xx+yy))*sz,out[11]=0,out[12]=v[0]+ox-(out[0]*ox+out[4]*oy+out[8]*oz),out[13]=v[1]+oy-(out[1]*ox+out[5]*oy+out[9]*oz),out[14]=v[2]+oz-(out[2]*ox+out[6]*oy+out[10]*oz),out[15]=1,out},mat4.fromQuat=function(out,q){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,yx=y*x2,yy=y*y2,zx=z*x2,zy=z*y2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;return out[0]=1-yy-zz,out[1]=yx+wz,out[2]=zx-wy,out[3]=0,out[4]=yx-wz,out[5]=1-xx-zz,out[6]=zy+wx,out[7]=0,out[8]=zx+wy,out[9]=zy-wx,out[10]=1-xx-yy,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out},mat4.frustum=function(out,left,right,bottom,top,near,far){var rl=1/(right-left),tb=1/(top-bottom),nf=1/(near-far);return out[0]=2*near*rl,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=2*near*tb,out[6]=0,out[7]=0,out[8]=(right+left)*rl,out[9]=(top+bottom)*tb,out[10]=(far+near)*nf,out[11]=-1,out[12]=0,out[13]=0,out[14]=far*near*2*nf,out[15]=0,out},mat4.perspective=function(out,fovy,aspect,near,far){var f=1/Math.tan(fovy/2),nf=1/(near-far);return out[0]=f/aspect,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=f,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=(far+near)*nf,out[11]=-1,out[12]=0,out[13]=0,out[14]=2*far*near*nf,out[15]=0,out},mat4.perspectiveFromFieldOfView=function(out,fov,near,far){var upTan=Math.tan(fov.upDegrees*Math.PI/180),downTan=Math.tan(fov.downDegrees*Math.PI/180),leftTan=Math.tan(fov.leftDegrees*Math.PI/180),rightTan=Math.tan(fov.rightDegrees*Math.PI/180),xScale=2/(leftTan+rightTan),yScale=2/(upTan+downTan);return out[0]=xScale,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=yScale,out[6]=0,out[7]=0,out[8]=-((leftTan-rightTan)*xScale*.5),out[9]=(upTan-downTan)*yScale*.5,out[10]=far/(near-far),out[11]=-1,out[12]=0,out[13]=0,out[14]=far*near/(near-far),out[15]=0,out},mat4.ortho=function(out,left,right,bottom,top,near,far){var lr=1/(left-right),bt=1/(bottom-top),nf=1/(near-far);return out[0]=-2*lr,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=-2*bt,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=2*nf,out[11]=0,out[12]=(left+right)*lr,out[13]=(top+bottom)*bt,out[14]=(far+near)*nf,out[15]=1,out},mat4.lookAt=function(out,eye,center,up){var x0,x1,x2,y0,y1,y2,z0,z1,z2,len,eyex=eye[0],eyey=eye[1],eyez=eye[2],upx=up[0],upy=up[1],upz=up[2],centerx=center[0],centery=center[1],centerz=center[2];return Math.abs(eyex-centerx)<glMatrix.EPSILON&&Math.abs(eyey-centery)<glMatrix.EPSILON&&Math.abs(eyez-centerz)<glMatrix.EPSILON?mat4.identity(out):(z0=eyex-centerx,z1=eyey-centery,z2=eyez-centerz,len=1/Math.sqrt(z0*z0+z1*z1+z2*z2),z0*=len,z1*=len,z2*=len,x0=upy*z2-upz*z1,x1=upz*z0-upx*z2,x2=upx*z1-upy*z0,len=Math.sqrt(x0*x0+x1*x1+x2*x2),len?(len=1/len,x0*=len,x1*=len,x2*=len):(x0=0,x1=0,x2=0),y0=z1*x2-z2*x1,y1=z2*x0-z0*x2,y2=z0*x1-z1*x0,len=Math.sqrt(y0*y0+y1*y1+y2*y2),len?(len=1/len,y0*=len,y1*=len,y2*=len):(y0=0,y1=0,y2=0),out[0]=x0,out[1]=y0,out[2]=z0,out[3]=0,out[4]=x1,out[5]=y1,out[6]=z1,out[7]=0,out[8]=x2,out[9]=y2,out[10]=z2,out[11]=0,out[12]=-(x0*eyex+x1*eyey+x2*eyez),out[13]=-(y0*eyex+y1*eyey+y2*eyez),out[14]=-(z0*eyex+z1*eyey+z2*eyez),out[15]=1,out)},mat4.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"},mat4.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))},mat4.add=function(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out[2]=a[2]+b[2],out[3]=a[3]+b[3],out[4]=a[4]+b[4],out[5]=a[5]+b[5],out[6]=a[6]+b[6],out[7]=a[7]+b[7],out[8]=a[8]+b[8],out[9]=a[9]+b[9],out[10]=a[10]+b[10],out[11]=a[11]+b[11],out[12]=a[12]+b[12],out[13]=a[13]+b[13],out[14]=a[14]+b[14],out[15]=a[15]+b[15],out},mat4.subtract=function(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out[3]=a[3]-b[3],out[4]=a[4]-b[4],out[5]=a[5]-b[5],out[6]=a[6]-b[6],out[7]=a[7]-b[7],out[8]=a[8]-b[8],out[9]=a[9]-b[9],out[10]=a[10]-b[10],out[11]=a[11]-b[11],out[12]=a[12]-b[12],out[13]=a[13]-b[13],out[14]=a[14]-b[14],out[15]=a[15]-b[15],out},mat4.sub=mat4.subtract,mat4.multiplyScalar=function(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out[3]=a[3]*b,out[4]=a[4]*b,out[5]=a[5]*b,out[6]=a[6]*b,out[7]=a[7]*b,out[8]=a[8]*b,out[9]=a[9]*b,out[10]=a[10]*b,out[11]=a[11]*b,out[12]=a[12]*b,out[13]=a[13]*b,out[14]=a[14]*b,out[15]=a[15]*b,out},mat4.multiplyScalarAndAdd=function(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out[2]=a[2]+b[2]*scale,out[3]=a[3]+b[3]*scale,out[4]=a[4]+b[4]*scale,out[5]=a[5]+b[5]*scale,out[6]=a[6]+b[6]*scale,out[7]=a[7]+b[7]*scale,out[8]=a[8]+b[8]*scale,out[9]=a[9]+b[9]*scale,out[10]=a[10]+b[10]*scale,out[11]=a[11]+b[11]*scale,out[12]=a[12]+b[12]*scale,out[13]=a[13]+b[13]*scale,out[14]=a[14]+b[14]*scale,out[15]=a[15]+b[15]*scale,out},mat4.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]},mat4.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],a6=a[6],a7=a[7],a8=a[8],a9=a[9],a10=a[10],a11=a[11],a12=a[12],a13=a[13],a14=a[14],a15=a[15],b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=glMatrix.EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=glMatrix.EPSILON*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=glMatrix.EPSILON*Math.max(1,Math.abs(a5),Math.abs(b5))&&Math.abs(a6-b6)<=glMatrix.EPSILON*Math.max(1,Math.abs(a6),Math.abs(b6))&&Math.abs(a7-b7)<=glMatrix.EPSILON*Math.max(1,Math.abs(a7),Math.abs(b7))&&Math.abs(a8-b8)<=glMatrix.EPSILON*Math.max(1,Math.abs(a8),Math.abs(b8))&&Math.abs(a9-b9)<=glMatrix.EPSILON*Math.max(1,Math.abs(a9),Math.abs(b9))&&Math.abs(a10-b10)<=glMatrix.EPSILON*Math.max(1,Math.abs(a10),Math.abs(b10))&&Math.abs(a11-b11)<=glMatrix.EPSILON*Math.max(1,Math.abs(a11),Math.abs(b11))&&Math.abs(a12-b12)<=glMatrix.EPSILON*Math.max(1,Math.abs(a12),Math.abs(b12))&&Math.abs(a13-b13)<=glMatrix.EPSILON*Math.max(1,Math.abs(a13),Math.abs(b13))&&Math.abs(a14-b14)<=glMatrix.EPSILON*Math.max(1,Math.abs(a14),Math.abs(b14))&&Math.abs(a15-b15)<=glMatrix.EPSILON*Math.max(1,Math.abs(a15),Math.abs(b15))},module.exports=mat4},function(module,exports,__webpack_require__){var glMatrix=__webpack_require__(224),mat3=__webpack_require__(227),vec3=__webpack_require__(230),vec4=__webpack_require__(231),quat={};quat.create=function(){var out=new glMatrix.ARRAY_TYPE(4);return out[0]=0,out[1]=0,out[2]=0,out[3]=1,out},quat.rotationTo=function(){var tmpvec3=vec3.create(),xUnitVec3=vec3.fromValues(1,0,0),yUnitVec3=vec3.fromValues(0,1,0);return function(out,a,b){var dot=vec3.dot(a,b);return dot<-.999999?(vec3.cross(tmpvec3,xUnitVec3,a),vec3.length(tmpvec3)<1e-6&&vec3.cross(tmpvec3,yUnitVec3,a),vec3.normalize(tmpvec3,tmpvec3),quat.setAxisAngle(out,tmpvec3,Math.PI),out):dot>.999999?(out[0]=0,out[1]=0,out[2]=0,out[3]=1,out):(vec3.cross(tmpvec3,a,b),out[0]=tmpvec3[0],out[1]=tmpvec3[1],out[2]=tmpvec3[2],out[3]=1+dot,quat.normalize(out,out))}}(),quat.setAxes=function(){var matr=mat3.create();return function(out,view,right,up){return matr[0]=right[0],matr[3]=right[1],matr[6]=right[2],matr[1]=up[0],matr[4]=up[1],matr[7]=up[2],matr[2]=-view[0],matr[5]=-view[1],matr[8]=-view[2],quat.normalize(out,quat.fromMat3(out,matr))}}(),quat.clone=vec4.clone,quat.fromValues=vec4.fromValues,quat.copy=vec4.copy,quat.set=vec4.set,quat.identity=function(out){return out[0]=0,out[1]=0,out[2]=0,out[3]=1,out},quat.setAxisAngle=function(out,axis,rad){rad=.5*rad;var s=Math.sin(rad);return out[0]=s*axis[0],out[1]=s*axis[1],out[2]=s*axis[2],out[3]=Math.cos(rad),out},quat.getAxisAngle=function(out_axis,q){var rad=2*Math.acos(q[3]),s=Math.sin(rad/2);return 0!=s?(out_axis[0]=q[0]/s,out_axis[1]=q[1]/s,out_axis[2]=q[2]/s):(out_axis[0]=1,out_axis[1]=0,out_axis[2]=0),rad},quat.add=vec4.add,quat.multiply=function(out,a,b){var ax=a[0],ay=a[1],az=a[2],aw=a[3],bx=b[0],by=b[1],bz=b[2],bw=b[3];return out[0]=ax*bw+aw*bx+ay*bz-az*by,out[1]=ay*bw+aw*by+az*bx-ax*bz,out[2]=az*bw+aw*bz+ax*by-ay*bx,out[3]=aw*bw-ax*bx-ay*by-az*bz,out},quat.mul=quat.multiply,quat.scale=vec4.scale,quat.rotateX=function(out,a,rad){rad*=.5;var ax=a[0],ay=a[1],az=a[2],aw=a[3],bx=Math.sin(rad),bw=Math.cos(rad);return out[0]=ax*bw+aw*bx,out[1]=ay*bw+az*bx,out[2]=az*bw-ay*bx,out[3]=aw*bw-ax*bx,out},quat.rotateY=function(out,a,rad){rad*=.5;var ax=a[0],ay=a[1],az=a[2],aw=a[3],by=Math.sin(rad),bw=Math.cos(rad);return out[0]=ax*bw-az*by,out[1]=ay*bw+aw*by,out[2]=az*bw+ax*by,out[3]=aw*bw-ay*by,out},quat.rotateZ=function(out,a,rad){rad*=.5;var ax=a[0],ay=a[1],az=a[2],aw=a[3],bz=Math.sin(rad),bw=Math.cos(rad);return out[0]=ax*bw+ay*bz,out[1]=ay*bw-ax*bz,out[2]=az*bw+aw*bz,out[3]=aw*bw-az*bz,out},quat.calculateW=function(out,a){var x=a[0],y=a[1],z=a[2];return out[0]=x,out[1]=y,out[2]=z,out[3]=Math.sqrt(Math.abs(1-x*x-y*y-z*z)),out},quat.dot=vec4.dot,quat.lerp=vec4.lerp,quat.slerp=function(out,a,b,t){var omega,cosom,sinom,scale0,scale1,ax=a[0],ay=a[1],az=a[2],aw=a[3],bx=b[0],by=b[1],bz=b[2],bw=b[3];return cosom=ax*bx+ay*by+az*bz+aw*bw,cosom<0&&(cosom=-cosom,bx=-bx,by=-by,bz=-bz,bw=-bw),1-cosom>1e-6?(omega=Math.acos(cosom),sinom=Math.sin(omega),scale0=Math.sin((1-t)*omega)/sinom,scale1=Math.sin(t*omega)/sinom):(scale0=1-t,scale1=t),out[0]=scale0*ax+scale1*bx,out[1]=scale0*ay+scale1*by,out[2]=scale0*az+scale1*bz,out[3]=scale0*aw+scale1*bw,out},quat.sqlerp=function(){var temp1=quat.create(),temp2=quat.create();return function(out,a,b,c,d,t){return quat.slerp(temp1,a,d,t),quat.slerp(temp2,b,c,t),quat.slerp(out,temp1,temp2,2*t*(1-t)),out}}(),quat.invert=function(out,a){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],dot=a0*a0+a1*a1+a2*a2+a3*a3,invDot=dot?1/dot:0;return out[0]=-a0*invDot,out[1]=-a1*invDot,out[2]=-a2*invDot,out[3]=a3*invDot,out},quat.conjugate=function(out,a){return out[0]=-a[0],out[1]=-a[1],out[2]=-a[2],out[3]=a[3],out},quat.length=vec4.length,quat.len=quat.length,quat.squaredLength=vec4.squaredLength,quat.sqrLen=quat.squaredLength,quat.normalize=vec4.normalize,quat.fromMat3=function(out,m){var fRoot,fTrace=m[0]+m[4]+m[8];if(fTrace>0)fRoot=Math.sqrt(fTrace+1),out[3]=.5*fRoot,fRoot=.5/fRoot,out[0]=(m[5]-m[7])*fRoot,out[1]=(m[6]-m[2])*fRoot,out[2]=(m[1]-m[3])*fRoot;else{var i=0;m[4]>m[0]&&(i=1),m[8]>m[3*i+i]&&(i=2);var j=(i+1)%3,k=(i+2)%3;fRoot=Math.sqrt(m[3*i+i]-m[3*j+j]-m[3*k+k]+1),out[i]=.5*fRoot,fRoot=.5/fRoot,out[3]=(m[3*j+k]-m[3*k+j])*fRoot,out[j]=(m[3*j+i]+m[3*i+j])*fRoot,out[k]=(m[3*k+i]+m[3*i+k])*fRoot}return out},quat.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},quat.exactEquals=vec4.exactEquals,quat.equals=vec4.equals,module.exports=quat},function(module,exports,__webpack_require__){var glMatrix=__webpack_require__(224),vec3={};vec3.create=function(){var out=new glMatrix.ARRAY_TYPE(3);return out[0]=0,out[1]=0,out[2]=0,out},vec3.clone=function(a){var out=new glMatrix.ARRAY_TYPE(3);return out[0]=a[0],out[1]=a[1],out[2]=a[2],out},vec3.fromValues=function(x,y,z){var out=new glMatrix.ARRAY_TYPE(3);return out[0]=x,out[1]=y,out[2]=z,out},vec3.copy=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out},vec3.set=function(out,x,y,z){return out[0]=x,out[1]=y,out[2]=z,out},vec3.add=function(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out[2]=a[2]+b[2],out},vec3.subtract=function(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out},vec3.sub=vec3.subtract,vec3.multiply=function(out,a,b){return out[0]=a[0]*b[0],out[1]=a[1]*b[1],out[2]=a[2]*b[2],out},vec3.mul=vec3.multiply,vec3.divide=function(out,a,b){return out[0]=a[0]/b[0],out[1]=a[1]/b[1],out[2]=a[2]/b[2],out},vec3.div=vec3.divide,vec3.ceil=function(out,a){return out[0]=Math.ceil(a[0]),out[1]=Math.ceil(a[1]),out[2]=Math.ceil(a[2]),
out},vec3.floor=function(out,a){return out[0]=Math.floor(a[0]),out[1]=Math.floor(a[1]),out[2]=Math.floor(a[2]),out},vec3.min=function(out,a,b){return out[0]=Math.min(a[0],b[0]),out[1]=Math.min(a[1],b[1]),out[2]=Math.min(a[2],b[2]),out},vec3.max=function(out,a,b){return out[0]=Math.max(a[0],b[0]),out[1]=Math.max(a[1],b[1]),out[2]=Math.max(a[2],b[2]),out},vec3.round=function(out,a){return out[0]=Math.round(a[0]),out[1]=Math.round(a[1]),out[2]=Math.round(a[2]),out},vec3.scale=function(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out},vec3.scaleAndAdd=function(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out[2]=a[2]+b[2]*scale,out},vec3.distance=function(a,b){var x=b[0]-a[0],y=b[1]-a[1],z=b[2]-a[2];return Math.sqrt(x*x+y*y+z*z)},vec3.dist=vec3.distance,vec3.squaredDistance=function(a,b){var x=b[0]-a[0],y=b[1]-a[1],z=b[2]-a[2];return x*x+y*y+z*z},vec3.sqrDist=vec3.squaredDistance,vec3.length=function(a){var x=a[0],y=a[1],z=a[2];return Math.sqrt(x*x+y*y+z*z)},vec3.len=vec3.length,vec3.squaredLength=function(a){var x=a[0],y=a[1],z=a[2];return x*x+y*y+z*z},vec3.sqrLen=vec3.squaredLength,vec3.negate=function(out,a){return out[0]=-a[0],out[1]=-a[1],out[2]=-a[2],out},vec3.inverse=function(out,a){return out[0]=1/a[0],out[1]=1/a[1],out[2]=1/a[2],out},vec3.normalize=function(out,a){var x=a[0],y=a[1],z=a[2],len=x*x+y*y+z*z;return len>0&&(len=1/Math.sqrt(len),out[0]=a[0]*len,out[1]=a[1]*len,out[2]=a[2]*len),out},vec3.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},vec3.cross=function(out,a,b){var ax=a[0],ay=a[1],az=a[2],bx=b[0],by=b[1],bz=b[2];return out[0]=ay*bz-az*by,out[1]=az*bx-ax*bz,out[2]=ax*by-ay*bx,out},vec3.lerp=function(out,a,b,t){var ax=a[0],ay=a[1],az=a[2];return out[0]=ax+t*(b[0]-ax),out[1]=ay+t*(b[1]-ay),out[2]=az+t*(b[2]-az),out},vec3.hermite=function(out,a,b,c,d,t){var factorTimes2=t*t,factor1=factorTimes2*(2*t-3)+1,factor2=factorTimes2*(t-2)+t,factor3=factorTimes2*(t-1),factor4=factorTimes2*(3-2*t);return out[0]=a[0]*factor1+b[0]*factor2+c[0]*factor3+d[0]*factor4,out[1]=a[1]*factor1+b[1]*factor2+c[1]*factor3+d[1]*factor4,out[2]=a[2]*factor1+b[2]*factor2+c[2]*factor3+d[2]*factor4,out},vec3.bezier=function(out,a,b,c,d,t){var inverseFactor=1-t,inverseFactorTimesTwo=inverseFactor*inverseFactor,factorTimes2=t*t,factor1=inverseFactorTimesTwo*inverseFactor,factor2=3*t*inverseFactorTimesTwo,factor3=3*factorTimes2*inverseFactor,factor4=factorTimes2*t;return out[0]=a[0]*factor1+b[0]*factor2+c[0]*factor3+d[0]*factor4,out[1]=a[1]*factor1+b[1]*factor2+c[1]*factor3+d[1]*factor4,out[2]=a[2]*factor1+b[2]*factor2+c[2]*factor3+d[2]*factor4,out},vec3.random=function(out,scale){scale=scale||1;var r=2*glMatrix.RANDOM()*Math.PI,z=2*glMatrix.RANDOM()-1,zScale=Math.sqrt(1-z*z)*scale;return out[0]=Math.cos(r)*zScale,out[1]=Math.sin(r)*zScale,out[2]=z*scale,out},vec3.transformMat4=function(out,a,m){var x=a[0],y=a[1],z=a[2],w=m[3]*x+m[7]*y+m[11]*z+m[15];return w=w||1,out[0]=(m[0]*x+m[4]*y+m[8]*z+m[12])/w,out[1]=(m[1]*x+m[5]*y+m[9]*z+m[13])/w,out[2]=(m[2]*x+m[6]*y+m[10]*z+m[14])/w,out},vec3.transformMat3=function(out,a,m){var x=a[0],y=a[1],z=a[2];return out[0]=x*m[0]+y*m[3]+z*m[6],out[1]=x*m[1]+y*m[4]+z*m[7],out[2]=x*m[2]+y*m[5]+z*m[8],out},vec3.transformQuat=function(out,a,q){var x=a[0],y=a[1],z=a[2],qx=q[0],qy=q[1],qz=q[2],qw=q[3],ix=qw*x+qy*z-qz*y,iy=qw*y+qz*x-qx*z,iz=qw*z+qx*y-qy*x,iw=-qx*x-qy*y-qz*z;return out[0]=ix*qw+iw*-qx+iy*-qz-iz*-qy,out[1]=iy*qw+iw*-qy+iz*-qx-ix*-qz,out[2]=iz*qw+iw*-qz+ix*-qy-iy*-qx,out},vec3.rotateX=function(out,a,b,c){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[0],r[1]=p[1]*Math.cos(c)-p[2]*Math.sin(c),r[2]=p[1]*Math.sin(c)+p[2]*Math.cos(c),out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out},vec3.rotateY=function(out,a,b,c){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[2]*Math.sin(c)+p[0]*Math.cos(c),r[1]=p[1],r[2]=p[2]*Math.cos(c)-p[0]*Math.sin(c),out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out},vec3.rotateZ=function(out,a,b,c){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[0]*Math.cos(c)-p[1]*Math.sin(c),r[1]=p[0]*Math.sin(c)+p[1]*Math.cos(c),r[2]=p[2],out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out},vec3.forEach=function(){var vec=vec3.create();return function(a,stride,offset,count,fn,arg){var i,l;for(stride||(stride=3),offset||(offset=0),l=count?Math.min(count*stride+offset,a.length):a.length,i=offset;i<l;i+=stride)vec[0]=a[i],vec[1]=a[i+1],vec[2]=a[i+2],fn(vec,vec,arg),a[i]=vec[0],a[i+1]=vec[1],a[i+2]=vec[2];return a}}(),vec3.angle=function(a,b){var tempA=vec3.fromValues(a[0],a[1],a[2]),tempB=vec3.fromValues(b[0],b[1],b[2]);vec3.normalize(tempA,tempA),vec3.normalize(tempB,tempB);var cosine=vec3.dot(tempA,tempB);return cosine>1?0:Math.acos(cosine)},vec3.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"},vec3.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]},vec3.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],b0=b[0],b1=b[1],b2=b[2];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))},module.exports=vec3},function(module,exports,__webpack_require__){var glMatrix=__webpack_require__(224),vec4={};vec4.create=function(){var out=new glMatrix.ARRAY_TYPE(4);return out[0]=0,out[1]=0,out[2]=0,out[3]=0,out},vec4.clone=function(a){var out=new glMatrix.ARRAY_TYPE(4);return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out},vec4.fromValues=function(x,y,z,w){var out=new glMatrix.ARRAY_TYPE(4);return out[0]=x,out[1]=y,out[2]=z,out[3]=w,out},vec4.copy=function(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out},vec4.set=function(out,x,y,z,w){return out[0]=x,out[1]=y,out[2]=z,out[3]=w,out},vec4.add=function(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out[2]=a[2]+b[2],out[3]=a[3]+b[3],out},vec4.subtract=function(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out[3]=a[3]-b[3],out},vec4.sub=vec4.subtract,vec4.multiply=function(out,a,b){return out[0]=a[0]*b[0],out[1]=a[1]*b[1],out[2]=a[2]*b[2],out[3]=a[3]*b[3],out},vec4.mul=vec4.multiply,vec4.divide=function(out,a,b){return out[0]=a[0]/b[0],out[1]=a[1]/b[1],out[2]=a[2]/b[2],out[3]=a[3]/b[3],out},vec4.div=vec4.divide,vec4.ceil=function(out,a){return out[0]=Math.ceil(a[0]),out[1]=Math.ceil(a[1]),out[2]=Math.ceil(a[2]),out[3]=Math.ceil(a[3]),out},vec4.floor=function(out,a){return out[0]=Math.floor(a[0]),out[1]=Math.floor(a[1]),out[2]=Math.floor(a[2]),out[3]=Math.floor(a[3]),out},vec4.min=function(out,a,b){return out[0]=Math.min(a[0],b[0]),out[1]=Math.min(a[1],b[1]),out[2]=Math.min(a[2],b[2]),out[3]=Math.min(a[3],b[3]),out},vec4.max=function(out,a,b){return out[0]=Math.max(a[0],b[0]),out[1]=Math.max(a[1],b[1]),out[2]=Math.max(a[2],b[2]),out[3]=Math.max(a[3],b[3]),out},vec4.round=function(out,a){return out[0]=Math.round(a[0]),out[1]=Math.round(a[1]),out[2]=Math.round(a[2]),out[3]=Math.round(a[3]),out},vec4.scale=function(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out[3]=a[3]*b,out},vec4.scaleAndAdd=function(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out[2]=a[2]+b[2]*scale,out[3]=a[3]+b[3]*scale,out},vec4.distance=function(a,b){var x=b[0]-a[0],y=b[1]-a[1],z=b[2]-a[2],w=b[3]-a[3];return Math.sqrt(x*x+y*y+z*z+w*w)},vec4.dist=vec4.distance,vec4.squaredDistance=function(a,b){var x=b[0]-a[0],y=b[1]-a[1],z=b[2]-a[2],w=b[3]-a[3];return x*x+y*y+z*z+w*w},vec4.sqrDist=vec4.squaredDistance,vec4.length=function(a){var x=a[0],y=a[1],z=a[2],w=a[3];return Math.sqrt(x*x+y*y+z*z+w*w)},vec4.len=vec4.length,vec4.squaredLength=function(a){var x=a[0],y=a[1],z=a[2],w=a[3];return x*x+y*y+z*z+w*w},vec4.sqrLen=vec4.squaredLength,vec4.negate=function(out,a){return out[0]=-a[0],out[1]=-a[1],out[2]=-a[2],out[3]=-a[3],out},vec4.inverse=function(out,a){return out[0]=1/a[0],out[1]=1/a[1],out[2]=1/a[2],out[3]=1/a[3],out},vec4.normalize=function(out,a){var x=a[0],y=a[1],z=a[2],w=a[3],len=x*x+y*y+z*z+w*w;return len>0&&(len=1/Math.sqrt(len),out[0]=x*len,out[1]=y*len,out[2]=z*len,out[3]=w*len),out},vec4.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},vec4.lerp=function(out,a,b,t){var ax=a[0],ay=a[1],az=a[2],aw=a[3];return out[0]=ax+t*(b[0]-ax),out[1]=ay+t*(b[1]-ay),out[2]=az+t*(b[2]-az),out[3]=aw+t*(b[3]-aw),out},vec4.random=function(out,scale){return scale=scale||1,out[0]=glMatrix.RANDOM(),out[1]=glMatrix.RANDOM(),out[2]=glMatrix.RANDOM(),out[3]=glMatrix.RANDOM(),vec4.normalize(out,out),vec4.scale(out,out,scale),out},vec4.transformMat4=function(out,a,m){var x=a[0],y=a[1],z=a[2],w=a[3];return out[0]=m[0]*x+m[4]*y+m[8]*z+m[12]*w,out[1]=m[1]*x+m[5]*y+m[9]*z+m[13]*w,out[2]=m[2]*x+m[6]*y+m[10]*z+m[14]*w,out[3]=m[3]*x+m[7]*y+m[11]*z+m[15]*w,out},vec4.transformQuat=function(out,a,q){var x=a[0],y=a[1],z=a[2],qx=q[0],qy=q[1],qz=q[2],qw=q[3],ix=qw*x+qy*z-qz*y,iy=qw*y+qz*x-qx*z,iz=qw*z+qx*y-qy*x,iw=-qx*x-qy*y-qz*z;return out[0]=ix*qw+iw*-qx+iy*-qz-iz*-qy,out[1]=iy*qw+iw*-qy+iz*-qx-ix*-qz,out[2]=iz*qw+iw*-qz+ix*-qy-iy*-qx,out[3]=a[3],out},vec4.forEach=function(){var vec=vec4.create();return function(a,stride,offset,count,fn,arg){var i,l;for(stride||(stride=4),offset||(offset=0),l=count?Math.min(count*stride+offset,a.length):a.length,i=offset;i<l;i+=stride)vec[0]=a[i],vec[1]=a[i+1],vec[2]=a[i+2],vec[3]=a[i+3],fn(vec,vec,arg),a[i]=vec[0],a[i+1]=vec[1],a[i+2]=vec[2],a[i+3]=vec[3];return a}}(),vec4.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},vec4.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]},vec4.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],b0=b[0],b1=b[1],b2=b[2],b3=b[3];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=glMatrix.EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))},module.exports=vec4},function(module,exports,__webpack_require__){var glMatrix=__webpack_require__(224),vec2={};vec2.create=function(){var out=new glMatrix.ARRAY_TYPE(2);return out[0]=0,out[1]=0,out},vec2.clone=function(a){var out=new glMatrix.ARRAY_TYPE(2);return out[0]=a[0],out[1]=a[1],out},vec2.fromValues=function(x,y){var out=new glMatrix.ARRAY_TYPE(2);return out[0]=x,out[1]=y,out},vec2.copy=function(out,a){return out[0]=a[0],out[1]=a[1],out},vec2.set=function(out,x,y){return out[0]=x,out[1]=y,out},vec2.add=function(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out},vec2.subtract=function(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out},vec2.sub=vec2.subtract,vec2.multiply=function(out,a,b){return out[0]=a[0]*b[0],out[1]=a[1]*b[1],out},vec2.mul=vec2.multiply,vec2.divide=function(out,a,b){return out[0]=a[0]/b[0],out[1]=a[1]/b[1],out},vec2.div=vec2.divide,vec2.ceil=function(out,a){return out[0]=Math.ceil(a[0]),out[1]=Math.ceil(a[1]),out},vec2.floor=function(out,a){return out[0]=Math.floor(a[0]),out[1]=Math.floor(a[1]),out},vec2.min=function(out,a,b){return out[0]=Math.min(a[0],b[0]),out[1]=Math.min(a[1],b[1]),out},vec2.max=function(out,a,b){return out[0]=Math.max(a[0],b[0]),out[1]=Math.max(a[1],b[1]),out},vec2.round=function(out,a){return out[0]=Math.round(a[0]),out[1]=Math.round(a[1]),out},vec2.scale=function(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out},vec2.scaleAndAdd=function(out,a,b,scale){return out[0]=a[0]+b[0]*scale,out[1]=a[1]+b[1]*scale,out},vec2.distance=function(a,b){var x=b[0]-a[0],y=b[1]-a[1];return Math.sqrt(x*x+y*y)},vec2.dist=vec2.distance,vec2.squaredDistance=function(a,b){var x=b[0]-a[0],y=b[1]-a[1];return x*x+y*y},vec2.sqrDist=vec2.squaredDistance,vec2.length=function(a){var x=a[0],y=a[1];return Math.sqrt(x*x+y*y)},vec2.len=vec2.length,vec2.squaredLength=function(a){var x=a[0],y=a[1];return x*x+y*y},vec2.sqrLen=vec2.squaredLength,vec2.negate=function(out,a){return out[0]=-a[0],out[1]=-a[1],out},vec2.inverse=function(out,a){return out[0]=1/a[0],out[1]=1/a[1],out},vec2.normalize=function(out,a){var x=a[0],y=a[1],len=x*x+y*y;return len>0&&(len=1/Math.sqrt(len),out[0]=a[0]*len,out[1]=a[1]*len),out},vec2.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]},vec2.cross=function(out,a,b){var z=a[0]*b[1]-a[1]*b[0];return out[0]=out[1]=0,out[2]=z,out},vec2.lerp=function(out,a,b,t){var ax=a[0],ay=a[1];return out[0]=ax+t*(b[0]-ax),out[1]=ay+t*(b[1]-ay),out},vec2.random=function(out,scale){scale=scale||1;var r=2*glMatrix.RANDOM()*Math.PI;return out[0]=Math.cos(r)*scale,out[1]=Math.sin(r)*scale,out},vec2.transformMat2=function(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[2]*y,out[1]=m[1]*x+m[3]*y,out},vec2.transformMat2d=function(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[2]*y+m[4],out[1]=m[1]*x+m[3]*y+m[5],out},vec2.transformMat3=function(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[3]*y+m[6],out[1]=m[1]*x+m[4]*y+m[7],out},vec2.transformMat4=function(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[4]*y+m[12],out[1]=m[1]*x+m[5]*y+m[13],out},vec2.forEach=function(){var vec=vec2.create();return function(a,stride,offset,count,fn,arg){var i,l;for(stride||(stride=2),offset||(offset=0),l=count?Math.min(count*stride+offset,a.length):a.length,i=offset;i<l;i+=stride)vec[0]=a[i],vec[1]=a[i+1],fn(vec,vec,arg),a[i]=vec[0],a[i+1]=vec[1];return a}}(),vec2.str=function(a){return"vec2("+a[0]+", "+a[1]+")"},vec2.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]},vec2.equals=function(a,b){var a0=a[0],a1=a[1],b0=b[0],b1=b[1];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))},module.exports=vec2},function(module,exports){module.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 a_position;\nattribute vec2 a_textureCoord;\nattribute float direction;\nattribute vec3 aPrevious;\nattribute vec3 aNext;\nattribute float width;\n// attribute vec4 a_offsets;\nattribute float aCounters;\n// attribute vec3 aNormal;\n\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_modelMatrix;\nuniform mat4 u_inverseViewMatrix;\nuniform sampler2D heightmap;//RenderTarget containing the transformed positions\n\n// uniform mat4 uModelMatrix;\n// uniform mat4 uViewMatrix;\n// uniform mat4 uProjectionMatrix;\nuniform float uTime;\nuniform float u_height;\nuniform vec3 u_position;\n// uniform float thickness;\n\n\nuniform float aspect;\n\nvarying vec2 vUV;\nvarying vec3 vColor;\n// varying vec3 vNormal;\nvarying float vCounters;\n\nvoid main() {\n\n  float thickness = .1;\n  // float thickness = 1. * width;\n  int miter = 0;\n\n  vec3 pos = a_position;\n\n\n  vec2 aspectVec = vec2(aspect, 1.0);\n  // uProjectionMatrix * uViewMatrix * uModelMatrix\n  mat4 projViewModel = u_projectionMatrix * u_viewMatrix * u_modelMatrix;//projection * view * model;\n\n  vec4 previousProjected = projViewModel * vec4(aPrevious.x, aPrevious.y, aPrevious.z, 1.0);\n  vec4 currentProjected = projViewModel * vec4(a_position.x, a_position.y, a_position.z, 1.0);\n  vec4 nextProjected = projViewModel * vec4(aNext.x, aNext.y, aNext.z, 1.0);\n\n  // vec4 previousProjected = projViewModel * vec4(aPrevious, 1.0);\n  // vec4 currentProjected = projViewModel * vec4(a_position, 1.0);\n  // vec4 nextProjected = projViewModel * vec4(aNext, 1.0);\n\n  // vNormal = aNormal;\n  vUV = a_textureCoord;\n  //get 2D screen space with W divide and aspect correction\n  vec2 currentScreen = currentProjected.xy / currentProjected.w * aspectVec;\n  vec2 previousScreen = previousProjected.xy / previousProjected.w * aspectVec;\n  vec2 nextScreen = nextProjected.xy / nextProjected.w * aspectVec;\n\n  vCounters = aCounters;\n\n  float len = thickness *width ;\n  // len *= smoothstep(vUV.x*2.,vUV.y*2.+2.,-uTime*2000.);;\n  // len *= smoothstep(vUV.x * 2., vUV.y * 2.+ 1., -uTime*2000.);\n\n  float orientation = direction;\n\n  //starting point uses (next - current)\n  vColor = vec3(1.0, .0, 0.0);\n  vec2 dir = vec2(0.0);\n  if (currentScreen == previousScreen) {\n    dir = normalize(nextScreen - currentScreen);\n    // vColor = vec3(1.0, 0.0, 0.0);\n  }\n  //ending point uses (current - previous)\n  else if (currentScreen == nextScreen) {\n    dir = normalize(currentScreen - previousScreen);\n    // vColor = vec3(0.0, 1.0, 0.0);\n  }\n  //somewhere in middle, needs a join\n  else {\n    //get directions from (C - B) and (B - A)\n\n    vec2 dirA = normalize((currentScreen - previousScreen));\n    if (miter == 1) {\n      vec2 dirB = normalize((nextScreen - currentScreen));\n      //now compute the miter join normal and length\n      vec2 tangent = normalize(dirA + dirB);\n      vec2 perp = vec2(-dirA.y, dirA.x);\n      vec2 miter = vec2(-tangent.y, tangent.x);\n      dir = tangent;\n      len = thickness / dot(miter, perp);\n    } else {\n      dir = dirA;\n\n    }\n  }\n  vec2 normal = vec2(-dir.y, dir.x);\n  vColor = vec3(normal, 1.0);\n  normal.x /= aspect;\n  normal *= len/2.0;\n\n  vec4 offset =  vec4(normal * orientation, 0.0, 0.0);\n  // vColor = vec3(orientation);\n\n  // currentProjected.y += 20.0;\n\n  vec4 posF = currentProjected + offset;\n  posF.y -= (texture2D( heightmap, a_position.xz ).x * u_height - .15) * pow(-currentProjected.x, 2.);\n  // pos.y -= texture2D( heightmap, a_position.xz ).x * 20.;\n\n\n\n\n\n\n\n  gl_Position = posF;//currentProjected + offset;\n  gl_PointSize = 1.0;\n}\n"},function(module,exports){module.exports="precision mediump float;\n#define GLSLIFY 1\n\n\nuniform sampler2D texture;\n// varying vec3 vPosition;\n// varying vec3 vColor;\n// uniform vec2 resolutions;\nuniform float alpha;\n\nvarying float vCounters;\nvarying vec2 vUV;\n\nvoid main() {\n\n  vec4 color = vec4(.0, .0, .0, alpha);\n  // vec4 color = vec4(1.0);\n  vec4 colorEnd = color * texture2D( texture, vUV );\n\n  // if(colorEnd.a < .01){\n  //   discard;\n  // }\n\n  // colorEnd.a = 1.0;\n  // color *= texture2D( texture, vUV );\n\n  // gl_FragColor = vec4(0., .0, .0, alpha);\n  // gl_FragColor = colorEnd;\n\n  // vec3 color = vec3(0.0, .0, .0);\n  //\n  // color.a = colorEnd.a;\n  gl_FragColor = color;\n\n  // gl_FragColor.rgb *= alpha;\n\n  // gl_FragColor.a *= step(vCounters, 1.0);\n\n}\n"},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(199),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(200),_createClass3=_interopRequireDefault(_createClass2),Spline=function(){function Spline(points){(0,_classCallCheck3["default"])(this,Spline),this.c=[],this.point=0,this.intPoint=0,this.weight=0,this.pa=0,this.pb=0,this.pc=0,this.pd=0,this.w2=0,this.w3=0,this.w4=0,this.v3=[],this.points=points}return(0,_createClass3["default"])(Spline,[{key:"getPoint",value:function(k,out){if(this.point=(this.points.length-1)*k,this.intPoint=Math.floor(this.point),this.weight=this.point-this.intPoint,this.c[0]=0===this.intPoint?this.intPoint:this.intPoint-1,this.c[1]=this.intPoint,this.c[2]=this.intPoint>this.points.length-2?this.intPoint:this.intPoint+1,this.c[3]=this.intPoint>this.points.length-3?this.intPoint:this.intPoint+2,this.pa=this.points[this.c[0]],this.pb=this.points[this.c[1]],this.pc=this.points[this.c[2]],this.pd=this.points[this.c[3]],this.w2=this.weight*this.weight,this.w3=this.weight*this.w2,this.v3[0]=this.interpolate(this.pa[0],this.pb[0],this.pc[0],this.pd[0],this.weight,this.w2,this.w3),this.v3[1]=this.interpolate(this.pa[1],this.pb[1],this.pc[1],this.pd[1],this.weight,this.w2,this.w3),this.v3[2]=this.interpolate(this.pa[2],this.pb[2],this.pc[2],this.pd[2],this.weight,this.w2,this.w3),!out)return[this.v3[0],this.v3[1],this.v3[2]];out.length;out[out.length]=[this.v3[0],this.v3[1],this.v3[2]]}},{key:"interpolate",value:function(p0,p1,p2,p3,t,t2,t3){var v0=.5*(p2-p0),v1=.5*(p3-p1);return(2*(p1-p2)+v0+v1)*t3+(-3*(p1-p2)-2*v0-v1)*t2+v0*t+p1}}]),Spline}();exports["default"]=Spline,module.exports=exports["default"]},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Motions={move1:function(options){var time=options.time;options.targetPoint;time>120&&(time=0,Easings.to(this.targetPoint,.6,{0:Math.random()}))},move2:function(options){var time=options.time,targetPoint=options.targetPoint;targetPoint[0]=.5*Math.cos(time/200)+.5},move4:function(options){var time=options.time,targetPoint=options.targetPoint;targetPoint[0]=.5*Math.pow(.6*Math.abs(Math.sin(time/200*2)),Math.sin(time/200*2))},move3:function(options){var time=options.time,targetPoint=options.targetPoint;targetPoint[0]=1*Math.abs(Math.cos(time/200*2)*Math.sin(time/200*4))}};exports["default"]=Motions,module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(199),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(200),_createClass3=_interopRequireDefault(_createClass2),_mcgl=__webpack_require__(2),_mcgl2=_interopRequireDefault(_mcgl),_glMatrix=__webpack_require__(223),_sim=(_interopRequireDefault(_glMatrix),__webpack_require__(238)),_sim2=_interopRequireDefault(_sim),_sim3=__webpack_require__(239),_sim4=_interopRequireDefault(_sim3),ViewSim=function(){function ViewSim(width,height){(0,_classCallCheck3["default"])(this,ViewSim),this.time=0,this.shader=new _mcgl.GLShader(_sim2["default"],_sim4["default"]),this.shader.bind(),this.mesh=new _mcgl2["default"].geom.BigTriangle(this.shader.shaderProgram,GL.gl.POINTS)}return(0,_createClass3["default"])(ViewSim,[{key:"render",value:function(t){this.time+=.01,this.shader.bind(),t.bind(),this.shader.uniform("time","float",this.time),this.shader.uniform("viewport","vec2",[GL.gl.viewport.width,GL.gl.viewport.height]),GL.draw(this.mesh)}}]),ViewSim}();exports["default"]=ViewSim,module.exports=exports["default"]},function(module,exports){module.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 a_position;\n\nuniform vec3 u_viewport;\nuniform mat4 u_worldViewProjection;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n    gl_Position = vec4(a_position, 0.0, 1.0);\n    vTextureCoord = a_position * .5 + .5;\n\n    const float radius = 0.01;\n    float distOffset = u_viewport.y * u_worldViewProjection[1][1] * radius / gl_Position.w;\n    gl_PointSize = distOffset * (2.0);\n}\n"},function(module,exports){module.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texturePos;\nuniform float time;\nvarying vec2 vTextureCoord;\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n\n}\nvec3 snoiseVec3( vec3 x ){\n\n  float s  = snoise(vec3( x ));\n  float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));\n  float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));\n  vec3 c = vec3( s , s1 , s2 );\n  return c;\n\n}\n\n\nvec3 curlNoise( vec3 p ){\n\n  const float e = .1;\n  vec3 dx = vec3( e   , 0.0 , 0.0 );\n  vec3 dy = vec3( 0.0 , e   , 0.0 );\n  vec3 dz = vec3( 0.0 , 0.0 , e   );\n\n  vec3 p_x0 = snoiseVec3( p - dx );\n  vec3 p_x1 = snoiseVec3( p + dx );\n  vec3 p_y0 = snoiseVec3( p - dy );\n  vec3 p_y1 = snoiseVec3( p + dy );\n  vec3 p_z0 = snoiseVec3( p - dz );\n  vec3 p_z1 = snoiseVec3( p + dz );\n\n  float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;\n  float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;\n  float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;\n\n  const float divisor = 1.0 / ( 2.0 * e );\n  return normalize( vec3( x , y , z ) * divisor );\n\n}\n\nvoid main() {\n\n    //basic simulation: displays the particles in place.\n\n    // if(distance(gl_PointCoord, vec2(.5)) > .5) discard;\n\n    vec3 pos = texture2D(texturePos, vTextureCoord).rgb;\n    // pos.x += .1;//time;\n\n    vec3 n = curlNoise(vec3(pos.x, pos.y, pos.z * time/6.));\n    // vec3 n = curlNoise(pos + time * 100. * 1.0 );\n    pos += n;\n\n    gl_FragColor = vec4(pos, 1.0);\n}\n"},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(199),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(200),_createClass3=_interopRequireDefault(_createClass2),_mcgl=__webpack_require__(2),_mcgl2=_interopRequireDefault(_mcgl),_glMatrix=__webpack_require__(223),_noise=(_interopRequireDefault(_glMatrix),__webpack_require__(241)),_noise2=_interopRequireDefault(_noise),_noise3=__webpack_require__(242),_noise4=_interopRequireDefault(_noise3),ViewNoise=function(){function ViewNoise(width,height){(0,_classCallCheck3["default"])(this,ViewNoise),this.tick=0,this.shader=new _mcgl.GLShader(_noise2["default"],_noise4["default"]),this.height=1,this.tick=0,this.position=[0,0],this.amplitude=0,this.a=0;for(var positions=[],coords=[],indices=[],count=0,ux=void 0,uy=void 0,range=30,j=0;j<width;j++)for(var i=0;i<height;i++)positions.push([Math.random()*range-range/2,Math.random()*range-range/2,Math.random()*range-range/2]),ux=i/width*2-1+.5/width,uy=j/height*2-1+.5/height,coords.push([ux,uy]),indices.push(count),count++;this.mesh=new _mcgl2["default"].Mesh(this.shader.shaderProgram,GL.gl.POINTS),this.mesh.bufferVertex(positions),this.mesh.bufferTexCoord(coords),this.mesh.bufferIndex(indices),this.speed=.01}return(0,_createClass3["default"])(ViewNoise,[{key:"parseMesh",value:function(g){for(var vertices=g._vertices,total=vertices.length,size=parseInt(Math.sqrt(3*total)+.5),data=[],index=0,coords=[],uy=void 0,ux=void 0,count=0,indices=[],j=0;j<size;j++)for(var _i=0;_i<size;_i++)ux=_i/size*2-1+.5/size,uy=j/size*2-1+.5/size,coords.push([ux,uy]);for(var i=0;i<total;i++)data[index++]=[vertices[i][0],vertices[i][1],vertices[i][2]],indices.push(count),count++;return{positions:g._vertices.slice(),coords:coords,indices:indices}}},{key:"getRandomData",value:function(width,height,size){for(var len=width*height,data=[];len--;)data[len]=[(2*Math.random()-1)*size,(2*Math.random()-1)*size,(2*Math.random()-1)*size];return data}},{key:"getCanvas",value:function(w,h){var canvas=document.createElement("canvas");return canvas.width=w||512,canvas.height=h||512,canvas}},{key:"getContext",value:function(canvas,w,h){return canvas=canvas||this.getCanvas(w,h),canvas.width=w||canvas.width,canvas.height=h||canvas.height,canvas.getContext("2d")}},{key:"getImage",value:function(img,width,height,elevation){var ctx=this.getContext(null,width,height);ctx.drawImage(img,0,0);for(var imgData=ctx.getImageData(0,0,width,height),iData=imgData.data,l=width*height,data=[],indices=[],count=0,coords=[],i=0;i<l;i++){var i4=4*i,a=(i%width/width-.5)*width,b=(iData[i4]/255*.299+iData[i4+1]/255*.587+iData[i4+2]/255*.114)*elevation,c=(i/width/height-.5)*height;data.push([a,b,c]),indices.push(count),count++}return{positions:data,indices:indices,coords:coords}}},{key:"render",value:function(t){this.shader.bind(),this.tick-=this.speed,this.a-=this.amplitude,this.amplitude*=.9,this.height+=.01*(this.amplitude-this.height),this.shader.uniform("u_height","float",this.height),this.shader.uniform("u_amplitude","float",this.a),this.shader.uniform("u_time","float",this.tick),GL.draw(this.mesh)}}]),ViewNoise}();exports["default"]=ViewNoise,module.exports=exports["default"]},function(module,exports){module.exports="precision highp float;\n#define GLSLIFY 1\nattribute vec3 a_position;\nattribute vec2 a_textureCoord;\n\n\nuniform mat4 u_world;\nuniform mat4 u_worldViewProjection;\nuniform float u_time;\nuniform float u_amplitude;\nuniform float u_height;\nuniform vec2 u_viewport;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vColor;\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\n\tvec3 snoiseVec3( vec3 x ){\n\n\t  float s  = snoise(vec3( x ));\n\t  float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));\n\t  float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));\n\t  vec3 c = vec3( s , s1 , s2 );\n\t  return c;\n\n\t}\n\n\n\tvec3 curlNoise( vec3 p ){\n\n\t  const float e = .1;\n\t  vec3 dx = vec3( e   , 0.0 , 0.0 );\n\t  vec3 dy = vec3( 0.0 , e   , 0.0 );\n\t  vec3 dz = vec3( 0.0 , 0.0 , e   );\n\n\t  vec3 p_x0 = snoiseVec3( p - dx );\n\t  vec3 p_x1 = snoiseVec3( p + dx );\n\t  vec3 p_y0 = snoiseVec3( p - dy );\n\t  vec3 p_y1 = snoiseVec3( p + dy );\n\t  vec3 p_z0 = snoiseVec3( p - dz );\n\t  vec3 p_z1 = snoiseVec3( p + dz );\n\n\t  float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;\n\t  float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;\n\t  float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;\n\n\t  const float divisor = 1.0 / ( 2.0 * e );\n\t  return normalize( vec3( x , y , z ) * divisor );\n\n\t}\n\nvoid main(void) {\n\tvColor      = a_position;\n\tvec3 pos    = vec3(a_textureCoord, 0.0);\n\n\tfloat n = snoise( vec3(pos.x, pos.y + u_amplitude/50. + u_time, pos.z)  * (1.)  );\n\t// float n = snoise( vec3(pos.x, pos.y + u_amplitude/50., pos.z)  * (1.) + pow(u_height, .2));\n\tvColor = vec3(n);\n\n\tgl_Position = vec4(pos, 1.0);\n\n  // const float radius = 0.01;\n  // float distOffset = u_viewport.y * u_worldViewProjection[1][1] * radius / gl_Position.w;\n  // gl_PointSize = distOffset * 2.0;\n  gl_PointSize = 1.0;\n}\n";
},function(module,exports){module.exports="precision highp float;\n#define GLSLIFY 1\n\nvarying vec3 vColor;\n\nvoid main(void) {\n    gl_FragColor = vec4(vColor, 1.0);\n    // gl_FragColor = vec4(vec3(0.), 1.0);\n}\n"},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(199),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(200),_createClass3=_interopRequireDefault(_createClass2),_mcgl=__webpack_require__(2),_mcgl2=_interopRequireDefault(_mcgl),_glMatrix=__webpack_require__(223),_glMatrix2=_interopRequireDefault(_glMatrix),_render=__webpack_require__(244),_render2=_interopRequireDefault(_render),_render3=__webpack_require__(245),_render4=_interopRequireDefault(_render3),ViewRenderer=function(){function ViewRenderer(width,height){(0,_classCallCheck3["default"])(this,ViewRenderer),this.h=0,this.tick=0,this.amplitude=1,this.height=0,this.shader=new _mcgl.GLShader(_render2["default"],_render4["default"]),this.shader.bind(),this.position=[0,0,0],this.height=.2;for(var positions=[],indices=[],count=0,ux=void 0,uy=void 0,j=0;j<width;j++)for(var i=0;i<height;i++)ux=i/width*1,uy=j/height*1,indices.push(count),count++,positions.push([ux,uy,0]);this.mesh=new _mcgl2["default"].Mesh(this.shader.shaderProgram,GL.gl.POINTS),this.mesh.bufferVertex(positions),this.mesh.bufferIndex(indices),this.rot=[],_glMatrix2["default"].mat4.fromRotation(this.rot,Math.PI/2,[1,0,0]),this.speed=1}return(0,_createClass3["default"])(ViewRenderer,[{key:"render",value:function(t,height){this.tick++,this.shader.bind(),t.bind(),this.height+=.05*(height-this.height),this.shader.uniform("positions","int",0),this.shader.uniform("u_height","float",this.height),this.shader.uniform("u_time","float",this.tick),this.shader.uniform("u_transform","mat4",this.rot),this.shader.uniform("u_position","vec3",this.position),GL.draw(this.mesh)}}]),ViewRenderer}();exports["default"]=ViewRenderer,module.exports=exports["default"]},function(module,exports){module.exports="//vertex shader\nprecision highp float;\n#define GLSLIFY 1\n\nattribute vec3 a_position;\n\n\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_transform;\nuniform float u_height;\nuniform float u_time;\n\nuniform vec3 u_position;\n\nuniform sampler2D positions;//RenderTarget containing the transformed positions\nvarying vec3 v_pos;\n// uniform float pointSize;//size\nvoid main() {\n\n    vec3 a_pos = a_position; // for nothing this line\n\n    // if( == 0){\n    //   discard;\n    // }\n    //the mesh is a nomrliazed square so the uvs = the xy positions of the vertices\n    vec3 pos = a_position * 1.;//texture2D( positions, a_position.xy ).xyz * 1.;\n    // vec3 pos = texture2D( positions, a_position.xy ).xyz * 1.;\n    pos.z = texture2D( positions, a_position.xy ).x * u_height/4. * (sin(a_position.y * 1.) + .02);\n    v_pos = pos;\n    // pos.z = texture2D( positions, a_position.xy ).x * u_height * (pow(a_position.y, 1.8) + .02);\n    // pos.z = texture2D( positions, a_position.xy ).x * u_height * pow(a_position.y, 1. + pow(sin(u_time/100.), 3.) * .6);\n    // float alpha = pow(a_position.x, 2.);\n    pos += u_position;\n    //pos now contains a 3D position in space, we can use it as a regular vertex\n\n    //regular projection of our position\n    gl_Position = u_projectionMatrix * u_viewMatrix * u_transform * vec4( pos, 1.0 );\n    // gl_Position = u_projectionMatrix * u_viewMatrix * u_transform * vec4( pos, a_position.x * alpha );\n\n    //sets the point size\n    gl_PointSize = 1.0;// pointSize;\n}\n"},function(module,exports){module.exports="precision highp float;\n#define GLSLIFY 1\n\nuniform float u_height;\nvarying vec3 v_pos;\n\nvoid main()\n{\n    vec3 color = vec3( 0., 0., 0. );\n    // color.r += v_pos.z * 2.;\n\n    float alpha = u_height + .4;\n    gl_FragColor = vec4(color,  alpha);\n}\n"},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=__webpack_require__(199),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(200),_createClass3=_interopRequireDefault(_createClass2),_mcgl=__webpack_require__(2),_mcgl2=_interopRequireDefault(_mcgl),_plane=__webpack_require__(247),_plane2=_interopRequireDefault(_plane),_plane3=__webpack_require__(248),_plane4=_interopRequireDefault(_plane3),McglFloor=function(){function McglFloor(){(0,_classCallCheck3["default"])(this,McglFloor),this.shader=new _mcgl2["default"].GLShader(_plane2["default"],_plane4["default"]),this.shader.bind(),this.plane=new _mcgl2["default"].geom.PlaneSquare(this.shader.shaderProgram,20,20,20,"xz",(void 0),_mcgl2["default"].GL.gl.LINES),this.plane.position=[100,0,0],this.shader.uniform("alpha","float",.2)}return(0,_createClass3["default"])(McglFloor,[{key:"render",value:function(){this.shader.bind(),this.shader.uniform("resolutions","vec2",[window.innerWidth,window.innerHeight]),_mcgl2["default"].GL.draw(this.plane)}}]),McglFloor}();exports["default"]=McglFloor,module.exports=exports["default"]},function(module,exports){module.exports="#define GLSLIFY 1\nattribute vec4 a_position;\n\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\n// uniform mat4 u_viewMatrixInverseTranspose;\n\n\nvoid main() {\n  // Multiply the position by the matrix.\n\n  vec3 surfaceWorldPosition = (u_viewMatrix * a_position).xyz;\n\n\n  vec3 position = a_position.xyz;\n\n  // position.yz = rotate(position.yz, sin(time * 0.1));\n  // position.xz = rotate(position.xz, time * 2.1);\n\n  gl_Position = u_projectionMatrix * u_viewMatrix * vec4(position, a_position.w);\n\n}\n"},function(module,exports){module.exports="precision mediump float;\n#define GLSLIFY 1\n\n\nuniform float alpha;\nuniform vec2 resolutions;\n\nvoid main() {\n  vec3 color = vec3(.92,.92,.92);\n\n  float y = gl_FragCoord.y/resolutions.y;\n  gl_FragColor = vec4(color, 1.0);\n  // gl_FragColor *= 1.0 - y;\n}\n"},function(module,exports,__webpack_require__){!function(global,factory){module.exports=factory()}(this,function(){"use strict";function getFileExtension(url){if("string"!=typeof url)return"";if("data:"===url.slice(0,5)){var match=url.match(/data:audio\/(ogg|mp3|opus|wav|m4a)/i);if(match&&match.length>1)return match[1].toLowerCase()}url=url.split("?")[0],url=url.slice(url.lastIndexOf("/")+1);var a=url.split(".");return 1===a.length||""===a[0]&&2===a.length?"":a.pop().toLowerCase()}function getSupportedFile(fileNames){var name=void 0;if(Array.isArray(fileNames))for(var i=0;i<fileNames.length;i++){name=fileNames[i];var ext=getFileExtension(name);if(extensions.indexOf(ext)>-1)break}else"object"===("undefined"==typeof fileNames?"undefined":_typeof(fileNames))&&Object.keys(fileNames).some(function(key){name=fileNames[key];var ext=getFileExtension(name);return extensions.indexOf(ext)>-1});return name||fileNames}function isAudioBuffer(data){return!!(data&&window.AudioBuffer&&data instanceof window.AudioBuffer)}function isArrayBuffer(data){return!!(data&&window.ArrayBuffer&&data instanceof window.ArrayBuffer)}function isMediaElement(data){return!!(data&&window.HTMLMediaElement&&data instanceof window.HTMLMediaElement)}function isMediaStream(data){return!!(data&&"function"==typeof data.getAudioTracks&&data.getAudioTracks().length&&window.MediaStreamTrack&&data.getAudioTracks()[0]instanceof window.MediaStreamTrack)}function isOscillatorType(data){return!(!data||"string"!=typeof data||"sine"!==data&&"square"!==data&&"sawtooth"!==data&&"triangle"!==data)}function isScriptConfig(data){return!!(data&&"object"===("undefined"==typeof data?"undefined":_typeof(data))&&data.bufferSize&&data.channels&&data.callback)}function isURL(data){return!(!data||"string"!=typeof data||!(data.indexOf(".")>-1||"data:"===data.slice(0,5)))}function containsURL(config){if(!config||isMediaElement(config))return!1;var src=config.src||config.url||config.data||config;return isURL(src)||isArrayBuffer(src)||Array.isArray(src)&&isURL(src[0])}function Analyser(context,config){function noteFromPitch(frequency){var noteNum=12*(Math.log(frequency/440)/Math.log(2));return Math.round(noteNum)+69}function frequencyFromNoteNumber(note){return 440*Math.pow(2,(note-69)/12)}function centsOffFromPitch(frequency,note){return Math.floor(1200*Math.log(frequency/frequencyFromNoteNumber(note))/Math.log(2))}function needsUpdate(arr,float){return!arr||(node.fftSize!==fftSize||(!!(float&&arr instanceof Uint8Array)||!float&&arr instanceof Float32Array))}function createArray(float,length){return float?new Float32Array(length):new Uint8Array(length)}config=config||{};var node=context.createAnalyser(),fftSize=config.fftSize||512,freqFloat=!!config["float"],waveFloat=!!config["float"],waveform=void 0,frequencies=void 0;node.fftSize=fftSize,node.smoothingTimeConstant=config.smoothing||config.smoothingTimeConstant||node.smoothingTimeConstant,node.minDecibels=config.minDecibels||node.minDecibels,node.maxDecibels=config.maxDecibels||node.maxDecibels;var amplitudeBlob=new Blob(["onmessage=function(e){var data=e.data;var f=new Float32Array(data.b);for(var i=0;i<f.length;i++){data.sum+=f[i]}data.sum/=f.length;postMessage(Math.max(1.0-(data.sum/data.numSamples*-1.0),0))};"]),pitchBlob=new Blob(["onmessage=function(e){var data=e.data;var sampleRate=data.sampleRate;var buf=new Float32Array(data.b);var SIZE=buf.length;var MAX_SAMPLES=Math.floor(SIZE/2);var best_offset=-1;var best_correlation=0;var rms=0;var foundGoodCorrelation=false;var correlations=new Array(MAX_SAMPLES);for(var i=0;i<SIZE;i++){var val=buf[i];rms+=val*val}rms=Math.sqrt(rms/SIZE);if (rms<0.01){postMessage(-1)}else{var lastCorrelation=1;for(var offset=0;offset<MAX_SAMPLES;offset++){var correlation=0;for(var i=0;i<MAX_SAMPLES;i++){correlation+=Math.abs((buf[i])-(buf[i+offset]))}correlation=1-(correlation/MAX_SAMPLES);correlations[offset]=correlation;if ((correlation>0.9)&&(correlation>lastCorrelation)){foundGoodCorrelation=true;if (correlation>best_correlation){best_correlation=correlation;best_offset=offset}}else if (foundGoodCorrelation){var shift=(correlations[best_offset+1]-correlations[best_offset-1])/correlations[best_offset];postMessage(sampleRate/(best_offset+(8*shift)))}lastCorrelation=correlation}if (best_correlation>0.01){postMessage(sampleRate/best_offset)}else{postMessage(-1)}}};"]),amplitudeBlobURL=URL.createObjectURL(amplitudeBlob),amplitudeWorker=new Worker(amplitudeBlobURL),pitchBlobURL=URL.createObjectURL(pitchBlob),pitchWorker=new Worker(pitchBlobURL),amplitudeCallback=null,noteStrings=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],pitchCallback=null,pitchCallbackObject={hertz:null,note:null,noteIndex:null,detuneCents:null,detune:null};return amplitudeWorker.onmessage=function(e){amplitudeCallback&&amplitudeCallback(e.data)},pitchWorker.onmessage=function(e){if(pitchCallback){var Hz=e.data;if(Hz!==-1){var note=noteFromPitch(Hz),detune=centsOffFromPitch(Hz,note);pitchCallbackObject.hertz=Hz,pitchCallbackObject.noteIndex=note%12,pitchCallbackObject.note=noteStrings[note%12],pitchCallbackObject.detuneCents=detune,0===detune?pitchCallbackObject.detune="":detune<0?pitchCallbackObject.detune="flat":pitchCallbackObject.detune="sharp"}pitchCallback(pitchCallbackObject)}},node.getWaveform=function(float){return arguments.length||(float=waveFloat),needsUpdate(waveform,float)&&(fftSize=node.fftSize,waveFloat=float,waveform=createArray(float,fftSize)),float&&this.getFloatTimeDomainData?this.getFloatTimeDomainData(waveform):this.getByteTimeDomainData(waveform),waveform},node.getPitch=function(callback){pitchCallback=pitchCallback||callback;var f=new Float32Array(node.fftSize);f.set(node.getWaveform(!0)),pitchWorker.postMessage({sampleRate:context.sampleRate,b:f.buffer},[f.buffer])},node.getFrequencies=function(float){return arguments.length||(float=freqFloat),needsUpdate(frequencies,float)&&(fftSize=node.fftSize,freqFloat=float,frequencies=createArray(float,node.frequencyBinCount)),float?this.getFloatFrequencyData(frequencies):this.getByteFrequencyData(frequencies),frequencies},node.getAmplitude=function(callback){amplitudeCallback=amplitudeCallback||callback;var f=new Float32Array(node.fftSize);f.set(node.getFrequencies(!0)),amplitudeWorker.postMessage({sum:0,length:f.byteLength,numSamples:node.fftSize/2,b:f.buffer},[f.buffer])},node.update=function(){node.getWaveform(),node.getFrequencies()},Object.defineProperties(node,{smoothing:{get:function(){return node.smoothingTimeConstant},set:function(value){node.smoothingTimeConstant=value}}}),node}function number(value,defaultValue){return arguments.length<2&&(defaultValue=0),"number"!=typeof value||isNaN(value)?defaultValue:value}function Distortion(context,amount){amount=number(amount,1);var node=context.createWaveShaper(),curve=new Float32Array(n);return node.update=function(value){if(amount=value,amount<=0)return amount=0,void(this.curve=null);for(var k=100*value,deg=Math.PI/180,x=void 0,i=0;i<n;i++)x=2*i/n-1,curve[i]=(3+k)*x*20*deg/(Math.PI+k*Math.abs(x));this.curve=curve},Object.defineProperties(node,{amount:{get:function(){return amount},set:function(value){this.update(value)}}}),"undefined"!=typeof amount&&node.update(amount),node}function Echo(context,config){config=config||{};var input=context.createGain(),delay=context.createDelay(),gain=context.createGain(),output=context.createGain();delay.delayTime.value=number(config.delayTime,.5),gain.gain.value=number(config.feedback,.5),input.connect(delay),input.connect(output),delay.connect(gain),gain.connect(delay),gain.connect(output);var node=input;return node.name="Echo",node._output=output,Object.defineProperties(node,{delay:{get:function(){return delay.delayTime.value},set:function(value){delay.delayTime.value=value}},feedback:{get:function(){return gain.gain.value},set:function(value){gain.gain.value=value}}}),node}function FakeContext(){function fn(){}function param(){return{value:1,defaultValue:1,linearRampToValueAtTime:fn,setValueAtTime:fn,exponentialRampToValueAtTime:fn,setTargetAtTime:fn,setValueCurveAtTime:fn,cancelScheduledValues:fn}}function fakeNode(){return{connect:fn,disconnect:fn,frequencyBinCount:0,smoothingTimeConstant:0,fftSize:0,minDecibels:0,maxDecibels:0,getByteTimeDomainData:fn,getByteFrequencyData:fn,getFloatTimeDomainData:fn,getFloatFrequencyData:fn,gain:param(),panningModel:0,setPosition:fn,setOrientation:fn,setVelocity:fn,distanceModel:0,refDistance:0,maxDistance:0,rolloffFactor:0,coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,type:0,frequency:param(),Q:param(),detune:param(),delayTime:param(),buffer:0,threshold:param(),knee:param(),ratio:param(),attack:param(),release:param(),reduction:param(),oversample:0,curve:0,sampleRate:1,length:0,duration:0,numberOfChannels:0,getChannelData:function(){return[]},copyFromChannel:fn,copyToChannel:fn,dopplerFactor:0,speedOfSound:0,start:fn}}var startTime=Date.now();return window.Uint8Array||(window.Uint8Array=window.Float32Array=Array),{createAnalyser:fakeNode,createBuffer:fakeNode,createBiquadFilter:fakeNode,createChannelMerger:fakeNode,createChannelSplitter:fakeNode,createDynamicsCompressor:fakeNode,createConvolver:fakeNode,createDelay:fakeNode,createGain:fakeNode,createOscillator:fakeNode,createPanner:fakeNode,createScriptProcessor:fakeNode,createWaveShaper:fakeNode,listener:fakeNode(),get currentTime(){return(Date.now()-startTime)/1e3}}}function Filter(context){function getFrequency(value){var numberOfOctaves=Math.log(maxFrequency/minFrequency)/Math.LN2,multiplier=Math.pow(2,numberOfOctaves*(value-1));return maxFrequency*multiplier}var config=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],minFrequency=40,maxFrequency=context.sampleRate/2,node=context.createBiquadFilter();return node.type=config.type,node.set=function(frequency,q,gain){return"undefined"!=typeof frequency&&"number"==typeof frequency&&(node.frequency.value=frequency),"undefined"!=typeof q&&"number"==typeof q&&(node.Q.value=q),"undefined"!=typeof gain&&"number"==typeof gain&&(node.gain.value=gain),node},node.setByPercent=function(percent,q,gain){return node.set(getFrequency(percent),q,gain)},node.set(config.frequency,config.q,config.gain)}function MonoFlanger(context,config){var input=context.createGain(),delay=context.createDelay(),feedback=context.createGain(),lfo=context.createOscillator(),gain=context.createGain(),output=context.createGain();delay.delayTime.value=number(config.delay,.005),feedback.gain.value=number(config.feedback,.5),lfo.type="sine",lfo.frequency.value=number(config.frequency,.002),gain.gain.value=number(config.gain,.25),input.connect(output),input.connect(delay),delay.connect(output),delay.connect(feedback),feedback.connect(input),lfo.connect(gain),gain.connect(delay.delayTime),lfo.start(0);var node=input;return node.name="Flanger",node._output=output,Object.defineProperties(node,{delay:{get:function(){return delay.delayTime.value},set:function(value){delay.delayTime.value=value}},lfoFrequency:{get:function(){return lfo.frequency.value},set:function(value){lfo.frequency.value=value}},lfoGain:{get:function(){return gain.gain.value},set:function(value){gain.gain.value=value}},feedback:{get:function(){return feedback.gain.value},set:function(value){feedback.gain.value=value}}}),node}function StereoFlanger(context,config){var input=context.createGain(),splitter=context.createChannelSplitter(2),merger=context.createChannelMerger(2),feedbackL=context.createGain(),feedbackR=context.createGain(),lfo=context.createOscillator(),lfoGainL=context.createGain(),lfoGainR=context.createGain(),delayL=context.createDelay(),delayR=context.createDelay(),output=context.createGain();feedbackL.gain.value=feedbackR.gain.value=number(config.feedback,.5),delayL.delayTime.value=delayR.delayTime.value=number(config.delay,.003),lfo.type="sine",lfo.frequency.value=number(config.frequency,.5),lfoGainL.gain.value=number(config.gain,.005),lfoGainR.gain.value=0-lfoGainL.gain.value,input.connect(splitter),splitter.connect(delayL,0),splitter.connect(delayR,1),delayL.connect(feedbackL),delayR.connect(feedbackR),feedbackL.connect(delayR),feedbackR.connect(delayL),delayL.connect(merger,0,0),delayR.connect(merger,0,1),merger.connect(output),input.connect(output),lfo.connect(lfoGainL),lfo.connect(lfoGainR),lfoGainL.connect(delayL.delayTime),lfoGainR.connect(delayR.delayTime),lfo.start(0);var node=input;return node.name="StereoFlanger",node._output=output,Object.defineProperties(node,{delay:{get:function(){return delayL.delayTime.value},set:function(value){delayL.delayTime.value=delayR.delayTime.value=value}},lfoFrequency:{get:function(){return lfo.frequency.value},set:function(value){lfo.frequency.value=value}},lfoGain:{get:function(){return lfoGainL.gain.value},set:function(value){lfoGainL.gain.value=lfoGainR.gain.value=value}},feedback:{get:function(){return feedbackL.gain.value},set:function(value){feedbackL.gain.value=feedbackR.gain.value=value}}}),node}function Flanger(context,config){return config=config||{},config.stereo?new StereoFlanger(context,config):new MonoFlanger(context,config)}function Panner(context){function cross(a,b){var ax=a.x,ay=a.y,az=a.z,bx=b.x,by=b.y,bz=b.z;a.x=ay*bz-az*by,a.y=az*bx-ax*bz,a.z=ax*by-ay*bx}function normalize(vec3){if(0===vec3.x&&0===vec3.y&&0===vec3.z)return vec3;var length=Math.sqrt(vec3.x*vec3.x+vec3.y*vec3.y+vec3.z*vec3.z),invScalar=1/length;return vec3.x*=invScalar,vec3.y*=invScalar,vec3.z*=invScalar,vec3}function setOrientation(pannerNode,fw){var up=vecPool.get(fw.x,fw.y,fw.z);cross(up,globalUp),cross(up,fw),normalize(up),normalize(fw),pannerNode.setOrientation(fw.x,fw.y,fw.z,up.x,up.y,up.z),vecPool.dispose(fw),vecPool.dispose(up)}function setPosition(nodeOrListener,vec){nodeOrListener.setPosition(vec.x,vec.y,vec.z),vecPool.dispose(vec)}var node=context.createPanner();node.panningModel=Panner.defaults.panningModel,node.distanceModel=Panner.defaults.distanceModel,node.refDistance=Panner.defaults.refDistance,node.maxDistance=Panner.defaults.maxDistance,node.rolloffFactor=Panner.defaults.rolloffFactor,node.coneInnerAngle=Panner.defaults.coneInnerAngle,node.coneOuterAngle=Panner.defaults.coneOuterAngle,node.coneOuterGain=Panner.defaults.coneOuterGain,node.setPosition(0,0,1),node.setOrientation(0,0,0);var vecPool={pool:[],get:function(x,y,z){var v=this.pool.length?this.pool.pop():{x:0,y:0,z:0};return"undefined"!=typeof x&&isNaN(x)&&"x"in x&&"y"in x&&"z"in x?(v.x=number(x.x),v.y=number(x.y),v.z=number(x.z)):(v.x=number(x),v.y=number(y),v.z=number(z)),v},dispose:function(instance){this.pool.push(instance)}},globalUp=vecPool.get(0,1,0),angle45=Math.PI/4,angle90=Math.PI/2;return node.set=function(x,y,z){var v=vecPool.get(x,y,z);1===arguments.length&&v.x&&(x=v.x,x>1&&(x=1),x<-1&&(x=-1),x*=angle45,z=x+angle90,z>angle90&&(z=Math.PI-z),v.x=Math.sin(x),v.z=Math.sin(z)),setPosition(node,v)},node.setSourcePosition=function(x,y,z){setPosition(node,vecPool.get(x,y,z))},node.setSourceOrientation=function(x,y,z){setOrientation(node,vecPool.get(x,y,z))},node.setListenerPosition=function(x,y,z){setPosition(context.listener,vecPool.get(x,y,z))},node.setListenerOrientation=function(x,y,z){setOrientation(context.listener,vecPool.get(x,y,z))},node.getDefaults=function(){return Panner.defaults},node.setDefaults=function(defaults){Object.keys(defaults).forEach(function(key){Panner.defaults[key]=defaults[key]})},node}function Phaser(context){var config=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],stages=number(config.stages,8),filters=[],filter=void 0,input=context.createGain(),feedback=context.createGain(),lfo=context.createOscillator(),lfoGain=context.createGain(),output=context.createGain();feedback.gain.value=number(config.feedback,.5),lfo.type="sine",lfo.frequency.value=number(config.frequency,.5),lfoGain.gain.value=number(config.gain,300);for(var i=0;i<stages;i++)filter=context.createBiquadFilter(),filter.type="allpass",filter.frequency.value=1e3*i,i>0&&filters[i-1].connect(filter),lfoGain.connect(filter.frequency),filters.push(filter);var first=filters[0],last=filters[filters.length-1];input.connect(first),input.connect(output),last.connect(output),last.connect(feedback),feedback.connect(first),lfo.connect(lfoGain),lfo.start(0);var node=input;return node.name="Phaser",node._output=output,Object.defineProperties(node,{lfoFrequency:{get:function(){return lfo.frequency.value},set:function(value){lfo.frequency.value=value}},lfoGain:{get:function(){return lfoGain.gain.value},set:function(value){lfoGain.gain.value=value}},feedback:{get:function(){return feedback.gain.value},set:function(value){feedback.gain.value=value}}}),node}function Recorder(context,passThrough){function mergeBuffers(buffers,length){for(var buffer=new Float32Array(length),offset=0,i=0;i<buffers.length;i++)buffer.set(buffers[i],offset),offset+=buffers[i].length;return buffer}function getBuffer(){if(!buffersL.length)return context.createBuffer(2,bufferLength,context.sampleRate);var recordingLength=buffersL.length*bufferLength,buffer=context.createBuffer(2,recordingLength,context.sampleRate);return buffer.getChannelData(0).set(mergeBuffers(buffersL,recordingLength)),buffer.getChannelData(1).set(mergeBuffers(buffersR,recordingLength)),buffer}function destroyScriptProcessor(){script&&(script.onaudioprocess=null,input.disconnect(),script.disconnect())}function createScriptProcessor(){destroyScriptProcessor(),script=context.createScriptProcessor(bufferLength,2,2),input.connect(script),script.connect(context.destination),script.connect(output),script.onaudioprocess=function(event){var inputL=event.inputBuffer.getChannelData(0),inputR=event.inputBuffer.getChannelData(1);if(passThrough){var outputL=event.outputBuffer.getChannelData(0),outputR=event.outputBuffer.getChannelData(1);outputL.set(inputL),outputR.set(inputR)}node.isRecording&&(buffersL.push(new Float32Array(inputL)),buffersR.push(new Float32Array(inputR)))}}var bufferLength=4096,buffersL=[],buffersR=[],startedAt=0,stoppedAt=0,input=context.createGain(),output=context.createGain(),script=void 0,node=input;return node.name="Recorder",node._output=output,node.isRecording=!1,node.start=function(){createScriptProcessor(),buffersL.length=0,buffersR.length=0,startedAt=context.currentTime,stoppedAt=0,this.isRecording=!0},node.stop=function(){return stoppedAt=context.currentTime,this.isRecording=!1,destroyScriptProcessor(),getBuffer()},node.getDuration=function(){return this.isRecording?context.currentTime-startedAt:stoppedAt-startedAt},node}function Reverb(context){var config=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],rate=context.sampleRate,time=number(config.time,1),decay=number(config.decay,5),reverse=!!config.reverse,length=void 0,impulseResponse=void 0,input=context.createGain(),reverb=context.createConvolver(),output=context.createGain();input.connect(reverb),input.connect(output),reverb.connect(output);var node=input;return node.name="Reverb",node._output=output,node.update=function(opt){if("undefined"!=typeof opt.time&&(time=opt.time,length=Math.floor(rate*time),impulseResponse=length?context.createBuffer(2,length,rate):null),"undefined"!=typeof opt.decay&&(decay=opt.decay),"undefined"!=typeof opt.reverse&&(reverse=opt.reverse),!impulseResponse)return void(reverb.buffer=null);for(var left=impulseResponse.getChannelData(0),right=impulseResponse.getChannelData(1),n=void 0,e=void 0,i=0;i<length;i++)n=reverse?length-i:i,e=Math.pow(1-n/length,decay),left[i]=(2*Math.random()-1)*e,right[i]=(2*Math.random()-1)*e;reverb.buffer=impulseResponse},node.update({time:time,decay:decay,reverse:reverse}),Object.defineProperties(node,{time:{get:function(){return time},set:function(value){value!==time&&this.update({time:value})}},decay:{get:function(){return decay},set:function(value){value!==decay&&this.update({decay:value})}},reverse:{get:function(){return reverse},set:function(value){value!==reverse&&this.update({reverse:!!value})}}}),node}function Effect(context){function connect(a,b){var output=a._output||a;output.disconnect(),output.connect(b)}function connectToDestination(node){var l=nodeList.length,lastNode=l?nodeList[l-1]:sourceNode;lastNode&&connect(lastNode,node),destination=node}function updateConnections(){if(sourceNode){for(var node=void 0,prev=void 0,i=0;i<nodeList.length;i++)node=nodeList[i],prev=0===i?sourceNode:nodeList[i-1],connect(prev,node);destination&&connectToDestination(destination)}}function has(node){return!!node&&nodeList.indexOf(node)>-1}function add(node){return node?has(node)?node:(nodeList.push(node),updateConnections(),node):null}function remove(node){if(!node)return null;if(!has(node))return node;for(var l=nodeList.length,i=0;i<l;i++)if(node===nodeList[i]){nodeList.splice(i,1);break}var output=node._output||node;return output.disconnect(),updateConnections(),node}function toggle(node,force){force=!!force;var hasNode=has(node);return arguments.length>1&&hasNode===force?api:(hasNode?remove(node):add(node),api)}function removeAll(){for(;nodeList.length;)nodeList.pop().disconnect();return updateConnections(),api}function destroy(){removeAll(),context=null,destination=null,nodeList=[],sourceNode&&sourceNode.disconnect(),sourceNode=null}function analyser(config){return add(new Analyser(context,config))}function compressor(options){var node=context.createDynamicsCompressor();return node.update=function(config){node.threshold.value="undefined"!=typeof config.threshold?config.threshold:-24,node.knee.value="undefined"!=typeof config.knee?config.knee:30,node.ratio.value="undefined"!=typeof config.ratio?config.ratio:12,node.attack.value="undefined"!=typeof config.attack?config.attack:3e-4,node.release.value="undefined"!=typeof config.release?config.release:.25},node.update(options||{}),add(node)}function convolver(impulseResponse){var node=context.createConvolver();return node.buffer=impulseResponse,add(node)}function delay(time){var node=context.createDelay();return"undefined"!=typeof time&&(node.delayTime.value=time),add(node)}function echo(config){return add(new Echo(context,config))}function distortion(amount){return add(new Distortion(context,amount))}function filter(type,frequency,q,gain){return add(new Filter(context,{type:type,frequency:frequency,q:q,gain:gain}))}function lowpass(frequency,peak){return filter("lowpass",{frequency:frequency,q:peak})}function highpass(frequency,peak){return filter("highpass",{frequency:frequency,q:peak})}function bandpass(frequency,width){return filter("bandpass",{frequency:frequency,q:width})}function lowshelf(frequency,gain){return filter("lowshelf",{frequency:frequency,q:0,gain:gain})}function highshelf(frequency,gain){return filter("highshelf",{frequency:frequency,q:0,gain:gain})}function peaking(frequency,width,gain){return filter("peaking",{frequency:frequency,q:width,gain:gain})}function notch(frequency,width,gain){return filter("notch",{frequency:frequency,q:width,gain:gain})}function allpass(frequency,sharpness){return filter("allpass",{frequency:frequency,q:sharpness})}function flanger(config){return add(new Flanger(context,config))}function gainNode(value){var node=context.createGain();return"undefined"!=typeof value&&(node.gain.value=value),node}function panner(){return add(new Panner(context))}function phaser(config){return add(new Phaser(context,config))}function recorder(passThrough){return add(new Recorder(context,passThrough))}function reverb(seconds,decay,reverse){return add(new Reverb(context,seconds,decay,reverse))}function script(){var config=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],bufferSize=config.bufferSize||1024,inputChannels="undefined"==typeof config.inputChannels?0:config.inputChannels,outputChannels="undefined"==typeof config.outputChannels?1:config.outputChannels,node=context.createScriptProcessor(bufferSize,inputChannels,outputChannels),thisArg=config.thisArg||config.context||node,callback=config.callback||function(){};return node.onaudioprocess=callback.bind(thisArg),add(node)}function setSource(node){return sourceNode=node,updateConnections(),node}function setDestination(node){return connectToDestination(node),node}context=context||new FakeContext;var panning=new Panner(context),api=null,destination=void 0,nodeList=[],sourceNode=void 0;return api={context:context,nodeList:nodeList,panning:panning,has:has,add:add,remove:remove,toggle:toggle,removeAll:removeAll,destroy:destroy,setSource:setSource,setDestination:setDestination,analyser:analyser,compressor:compressor,convolver:convolver,delay:delay,echo:echo,distortion:distortion,filter:filter,lowpass:lowpass,highpass:highpass,bandpass:bandpass,lowshelf:lowshelf,highshelf:highshelf,peaking:peaking,notch:notch,allpass:allpass,flanger:flanger,gain:gainNode,panner:panner,phaser:phaser,recorder:recorder,reverb:reverb,script:script},Object.freeze(api)}function Group(context,destination){function find(soundOrId,callback){var found=void 0;return soundOrId||0===soundOrId?(sounds.some(function(sound){return(sound===soundOrId||sound.id===soundOrId)&&(found=sound,!0)}),found&&callback?callback(found):found):found}function remove(soundOrId){return find(soundOrId,function(sound){return sounds.splice(sounds.indexOf(sound),1)}),group}function add(sound){return sound.gain.disconnect(),sound.gain.connect(gain),sounds.push(sound),sound.once("destroy",remove),group}function play(delay,offset){return sounds.forEach(function(sound){return sound.play(delay,offset)}),group}function pause(){return sounds.forEach(function(sound){sound.playing&&sound.pause()}),group}function resume(){return sounds.forEach(function(sound){sound.paused&&sound.play()}),group}function stop(){return sounds.forEach(function(sound){return sound.stop()}),group}function seek(percent){return sounds.forEach(function(sound){return sound.seek(percent)}),group}function mute(){return preMuteVolume=group.volume,
group.volume=0,group}function unMute(){return group.volume=preMuteVolume||1,group}function setVolume(value){return group.volume=value,group}function fade(volume,duration){if(context){var param=gain.gain,time=context.currentTime;param.cancelScheduledValues(time),param.setValueAtTime(param.value,time),param.linearRampToValueAtTime(volume,time+duration)}else sounds.forEach(function(sound){sound.fade(volume,duration)});return group}function destroy(){for(;sounds.length;)sounds.pop().destroy()}var sounds=[],effect=new Effect(context),gain=effect.gain(),preMuteVolume=1,group=null;return context&&(effect.setSource(gain),effect.setDestination(destination||context.destination)),group={add:add,find:find,remove:remove,play:play,pause:pause,resume:resume,stop:stop,seek:seek,setVolume:setVolume,mute:mute,unMute:unMute,fade:fade,destroy:destroy},Object.defineProperties(group,{effect:{value:effect},gain:{value:gain},sounds:{value:sounds},volume:{get:function(){return gain.gain.value},set:function(value){isNaN(value)||(context?(gain.gain.cancelScheduledValues(context.currentTime),gain.gain.value=value,gain.gain.setValueAtTime(value,context.currentTime)):gain.gain.value=value,sounds.forEach(function(sound){sound.context||(sound.groupVolume=value)}))}}}),group}function EventEmitter$1(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}function Loader(url){function removeListeners(){emitter.off("error"),emitter.off("progress"),emitter.off("complete"),emitter.off("loaded"),data&&"function"==typeof data.removeEventListener&&(data.removeEventListener("canplaythrough",readyHandler),data.removeEventListener("error",errorHandler)),request&&(request.removeEventListener("progress",progressHandler),request.removeEventListener("load",loadHandler),request.removeEventListener("error",errorHandler))}function dispatchComplete(buffer){emitter.emit("progress",1),emitter.emit("loaded",buffer),emitter.emit("complete",buffer),removeListeners()}function progressHandler(event){event.lengthComputable&&(progress=event.loaded/event.total,emitter.emit("progress",progress))}function errorHandler(event){window.clearTimeout(timeout);var message=event;data&&data.error&&(message="Media Error: "+ERROR_STATE[data.error.code]+" "+url),request&&(message="XHR Error: "+request.status+" "+request.statusText+" "+url),emitter.emit("error",message),removeListeners()}function decodeArrayBuffer(arraybuffer){audioContext.decodeAudioData(arraybuffer,function(buffer){data=buffer,request=null,progress=1,dispatchComplete(buffer)},errorHandler)}function loadHandler(){decodeArrayBuffer(request.response)}function readyHandler(){window.clearTimeout(timeout),data&&(progress=1,dispatchComplete(data))}function cancel(){removeListeners(),request&&4!==request.readyState&&request.abort(),request=null,window.clearTimeout(timeout)}function destroy(){cancel(),request=null,data=null,audioContext=null}function loadArrayBuffer(){return url instanceof window.ArrayBuffer?void decodeArrayBuffer(url):(request=new XMLHttpRequest,request.open("GET",url,!0),request.responseType="arraybuffer",request.addEventListener("progress",progressHandler),request.addEventListener("load",loadHandler),request.addEventListener("error",errorHandler),void request.send())}function loadAudioElement(){data&&data.tagName||(data=document.createElement("audio")),isTouchLocked||(window.clearTimeout(timeout),timeout=window.setTimeout(readyHandler,2e3),data.addEventListener("canplaythrough",readyHandler,!1)),data.addEventListener("error",errorHandler,!1),data.preload="auto",data.src=url,data.load(),isTouchLocked&&dispatchComplete(data)}function start(){audioContext?loadArrayBuffer():loadAudioElement()}function load(newUrl){url=newUrl,start()}var ERROR_STATE=["","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED"],emitter=new Emitter,progress=0,audioContext=void 0,isTouchLocked=void 0,request=void 0,timeout=void 0,data=void 0,api={on:emitter.on.bind(emitter),once:emitter.once.bind(emitter),off:emitter.off.bind(emitter),load:load,start:start,cancel:cancel,destroy:destroy};return Object.defineProperties(api,{data:{get:function(){return data}},progress:{get:function(){return progress}},audioContext:{set:function(value){audioContext=value}},isTouchLocked:{set:function(value){isTouchLocked=value}}}),Object.freeze(api)}function BufferSource(buffer,context,onEnded){function createSourceNode(){return!sourceNode&&context&&(sourceNode=context.createBufferSource(),sourceNode.buffer=buffer),sourceNode}function stop(){if(sourceNode){sourceNode.onended=null;try{sourceNode.disconnect(),sourceNode.stop(0)}catch(e){}sourceNode=null}paused=!1,pausedAt=0,playing=!1,startedAt=0}function pause(){var elapsed=context.currentTime-startedAt;stop(),pausedAt=elapsed,playing=!1,paused=!0}function endedHandler(){stop(),ended=!0,"function"==typeof endedCallback&&endedCallback(api)}function play(delay){var offset=arguments.length<=1||void 0===arguments[1]?0:arguments[1];if(!playing){for(delay=delay?context.currentTime+delay:0,offset&&(pausedAt=0),pausedAt&&(offset=pausedAt);offset>api.duration;)offset%=api.duration;createSourceNode(),sourceNode.onended=endedHandler,sourceNode.start(delay,offset),sourceNode.loop=loop,sourceNode.playbackRate.value=playbackRate,startedAt=context.currentTime-offset,ended=!1,paused=!1,pausedAt=0,playing=!0}}function destroy(){stop(),buffer=null,context=null,endedCallback=null,sourceNode=null}var api={},ended=!1,endedCallback=onEnded,loop=!1,paused=!1,pausedAt=0,playbackRate=1,playing=!1,sourceNode=null,startedAt=0;return Object.defineProperties(api,{play:{value:play},pause:{value:pause},stop:{value:stop},destroy:{value:destroy},currentTime:{get:function(){if(pausedAt)return pausedAt;if(startedAt){var time=context.currentTime-startedAt;return time>api.duration&&(time%=api.duration),time}return 0}},duration:{get:function(){return buffer?buffer.duration:0}},ended:{get:function(){return ended}},loop:{get:function(){return loop},set:function(value){loop=!!value,sourceNode&&(sourceNode.loop=loop)}},paused:{get:function(){return paused}},playbackRate:{get:function(){return playbackRate},set:function(value){playbackRate=value,sourceNode&&(sourceNode.playbackRate.value=playbackRate)}},playing:{get:function(){return playing}},progress:{get:function(){return api.duration?api.currentTime/api.duration:0}},sourceNode:{get:function(){return createSourceNode()}}}),Object.freeze(api)}function MediaSource(el,context,onEnded){function createSourceNode(){return!sourceNode&&context&&(sourceNode=context.createMediaElementSource(el)),sourceNode}function load(url){el.src=url,el.load(),ended=!1,paused=!1,playing=!1}function readyHandler(){el.removeEventListener("canplaythrough",readyHandler),playing&&el.play()}function endedHandler(){return loop?(el.currentTime=0,el.currentTime>0&&el.load(),void el.play()):(ended=!0,paused=!1,playing=!1,void("function"==typeof endedCallback&&endedCallback(api)))}function play(delay,offset){clearTimeout(delayTimeout),el.volume=volume*groupVolume,el.playbackRate=playbackRate,offset&&(el.currentTime=offset),delay?delayTimeout=setTimeout(play,delay):el.play(),ended=!1,paused=!1,playing=!0,el.removeEventListener("ended",endedHandler),el.addEventListener("ended",endedHandler,!1),el.readyState<1&&(el.removeEventListener("canplaythrough",readyHandler),el.addEventListener("canplaythrough",readyHandler,!1),el.load(),el.play())}function pause(){clearTimeout(delayTimeout),el&&(el.pause(),playing=!1,paused=!0)}function stop(){if(clearTimeout(delayTimeout),el){el.pause();try{el.currentTime=0,el.currentTime>0&&el.load()}catch(e){}playing=!1,paused=!1}}function fade(toVolume,duration){function ramp(value,step){fadeTimeout=window.setTimeout(function(){return api.volume=api.volume+.2*(value-api.volume),Math.abs(api.volume-value)>.05?void ramp(value,step):void(api.volume=value)},1e3*step)}return context?api:(window.clearTimeout(fadeTimeout),ramp(toVolume,duration/10),api)}function destroy(){el.removeEventListener("ended",endedHandler),el.removeEventListener("canplaythrough",readyHandler),stop(),el=null,context=null,endedCallback=null,sourceNode=null}var api={},ended=!1,endedCallback=onEnded,delayTimeout=void 0,fadeTimeout=void 0,loop=!1,paused=!1,playbackRate=1,playing=!1,sourceNode=null,groupVolume=1,volume=1;return Object.defineProperties(api,{play:{value:play},pause:{value:pause},stop:{value:stop},load:{value:load},fade:{value:fade},destroy:{value:destroy},currentTime:{get:function(){return el?el.currentTime:0}},duration:{get:function(){return el?el.duration:0}},ended:{get:function(){return ended}},loop:{get:function(){return loop},set:function(value){loop=!!value}},paused:{get:function(){return paused}},playbackRate:{get:function(){return playbackRate},set:function(value){playbackRate=value,el&&(el.playbackRate=playbackRate)}},playing:{get:function(){return playing}},progress:{get:function(){return el&&el.duration?el.currentTime/el.duration:0}},sourceNode:{get:function(){return createSourceNode()}},volume:{get:function(){return volume},set:function(value){window.clearTimeout(fadeTimeout),volume=value,el&&(el.volume=volume*groupVolume)}},groupVolume:{get:function(){return groupVolume},set:function(value){groupVolume=value,el&&(el.volume=volume*groupVolume)}}}),Object.freeze(api)}function MicrophoneSource(stream,context){function createSourceNode(){return!sourceNode&&context&&(sourceNode=context.createMediaStreamSource(stream),navigator.mozGetUserMedia&&(window.mozHack=sourceNode)),sourceNode}function play(delay){delay=delay?context.currentTime+delay:0,createSourceNode(),sourceNode.start(delay),startedAt=context.currentTime-pausedAt,ended=!1,playing=!0,paused=!1,pausedAt=0}function stop(){if(sourceNode){try{sourceNode.stop(0)}catch(e){}sourceNode=null}ended=!0,paused=!1,pausedAt=0,playing=!1,startedAt=0}function pause(){var elapsed=context.currentTime-startedAt;stop(),pausedAt=elapsed,playing=!1,paused=!0}function destroy(){stop(),context=null,sourceNode=null,stream=null,window.mozHack=null}var ended=!1,paused=!1,pausedAt=0,playing=!1,sourceNode=null,startedAt=0,api={play:play,pause:pause,stop:stop,destroy:destroy,duration:0,progress:0};return Object.defineProperties(api,{currentTime:{get:function(){return pausedAt?pausedAt:startedAt?context.currentTime-startedAt:0}},ended:{get:function(){return ended}},paused:{get:function(){return paused}},playing:{get:function(){return playing}},sourceNode:{get:function(){return createSourceNode()}}}),Object.freeze(api)}function OscillatorSource(type,context){function createSourceNode(){return!sourceNode&&context&&(sourceNode=context.createOscillator(),sourceNode.type=type,sourceNode.frequency.value=frequency),sourceNode}function play(delay){delay=delay||0,delay&&(delay=context.currentTime+delay),createSourceNode(),sourceNode.start(delay),startedAt=pausedAt?context.currentTime-pausedAt:context.currentTime,ended=!1,playing=!0,paused=!1,pausedAt=0}function stop(){if(sourceNode){try{sourceNode.stop(0)}catch(e){}sourceNode=null}ended=!0,paused=!1,pausedAt=0,playing=!1,startedAt=0}function pause(){var elapsed=context.currentTime-startedAt;stop(),pausedAt=elapsed,playing=!1,paused=!0}function destroy(){stop(),context=null,sourceNode=null}var ended=!1,paused=!1,pausedAt=0,playing=!1,sourceNode=null,startedAt=0,frequency=200,api=null;return api={play:play,pause:pause,stop:stop,destroy:destroy},Object.defineProperties(api,{currentTime:{get:function(){return pausedAt?pausedAt:startedAt?context.currentTime-startedAt:0}},duration:{value:0},ended:{get:function(){return ended}},frequency:{get:function(){return frequency},set:function(value){frequency=value,sourceNode&&(sourceNode.frequency.value=value)}},paused:{get:function(){return paused}},playing:{get:function(){return playing}},progress:{value:0},sourceNode:{get:function(){return createSourceNode()}}}),Object.freeze(api)}function ScriptSource(data,context){function createSourceNode(){return!sourceNode&&context&&(sourceNode=context.createScriptProcessor(bufferSize,0,channels)),sourceNode}function play(){createSourceNode(),sourceNode.onaudioprocess=onProcess,startedAt=context.currentTime-pausedAt,ended=!1,paused=!1,pausedAt=0,playing=!0}function onPaused(event){for(var buffer=event.outputBuffer,i=0;i<buffer.numberOfChannels;i++)for(var channel=buffer.getChannelData(i),j=0;j<channel.length;j++)channel[j]=0}function stop(){sourceNode&&(sourceNode.onaudioprocess=onPaused),ended=!0,paused=!1,pausedAt=0,playing=!1,startedAt=0}function pause(){var elapsed=context.currentTime-startedAt;stop(),pausedAt=elapsed,playing=!1,paused=!0}function destroy(){stop(),context=null,onProcess=null,sourceNode=null}var bufferSize=data.bufferSize||1024,channels=data.channels||1,ended=!1,onProcess=data.callback.bind(data.thisArg||this),paused=!1,pausedAt=0,playing=!1,sourceNode=null,startedAt=0,api=null;return api={play:play,pause:pause,stop:stop,destroy:destroy,duration:0,progress:0},Object.defineProperties(api,{currentTime:{get:function(){return pausedAt?pausedAt:startedAt?context.currentTime-startedAt:0}},ended:{get:function(){return ended}},paused:{get:function(){return paused}},playing:{get:function(){return playing}},sourceNode:{get:function(){return createSourceNode()}}}),Object.freeze(api)}function waveform(){var buffer=void 0,wave=void 0;return function(audioBuffer,length){if(!window.Float32Array||!window.AudioBuffer)return[];var sameBuffer=buffer===audioBuffer,sameLength=wave&&wave.length===length;if(sameBuffer&&sameLength)return wave;if(wave&&wave.length===length||(wave=new Float32Array(length)),!audioBuffer)return wave;buffer=audioBuffer;for(var chunk=Math.floor(buffer.length/length),resolution=5,incr=Math.max(Math.floor(chunk/resolution),1),greatest=0,i=0;i<buffer.numberOfChannels;i++)for(var channel=buffer.getChannelData(i),j=0;j<length;j++)for(var k=j*chunk,l=k+chunk;k<l;k+=incr){var a=channel[k];a<0&&(a=-a),a>wave[j]&&(wave[j]=a),a>greatest&&(greatest=a)}for(var scale=1/greatest,_i=0;_i<wave.length;_i++)wave[_i]*=scale;return wave}}function Sound(context,destination){function createSource(value){if(data=value,file.isAudioBuffer(data))source=new BufferSource(data,context,function(){return sound.emit("ended",sound)});else if(file.isMediaElement(data))source=new MediaSource(data,context,function(){return sound.emit("ended",sound)});else if(file.isMediaStream(data))source=new MicrophoneSource(data,context);else if(file.isOscillatorType(data&&data.type||data))source=new OscillatorSource(data.type||data,context);else{if(!file.isScriptConfig(data))throw new Error("Cannot detect data type: "+data);source=new ScriptSource(data,context)}effect.setSource(source.sourceNode),sound.emit("ready",sound),playWhenReady&&playWhenReady()}function load(config){var src=file.getSupportedFile(config.src||config.url||config.data||config);return source&&data&&data.tagName?source.load(src):(loader=loader||new Loader(src),loader.audioContext=config.asMediaElement?null:context,loader.isTouchLocked=isTouchLocked,loader.once("loaded",function(fileData){createSource(fileData),sound.emit("loaded",sound)})),sound}function play(delay,offset){return!source||isTouchLocked?(playWhenReady=function(){source&&play(delay,offset)},sound):(playWhenReady=null,effect.setSource(source.sourceNode),context||(sound.volume=gain.gain.value),source.play(delay,offset),source.hasOwnProperty("loop")&&(source.loop=loop),sound.emit("play",sound),sound)}function pause(){return source&&source.pause(),sound.emit("pause",sound),sound}function stop(delay){return source&&source.stop(delay||0),sound.emit("stop",sound),sound}function seek(percent){return source&&(source.stop(),play(0,source.duration*percent)),sound}function fade(volume,duration){if(!source)return sound;var param=gain.gain;if(context){var time=context.currentTime;param.cancelScheduledValues(time),param.setValueAtTime(param.value,time),param.linearRampToValueAtTime(volume,time+duration)}else"function"==typeof source.fade&&(source.fade(volume,duration),param.value=volume);return sound}function destroy(){source&&source.destroy(),effect&&effect.destroy(),gain&&gain.disconnect(),loader&&loader.destroy(),sound.off("loaded"),sound.off("ended"),gain=null,context=null,data=null,playWhenReady=null,source=null,effect=null,loader=null,wave=null,sound.emit("destroy",sound),sound.off("destroy")}var id=void 0,data=void 0,effect=new Effect(context),gain=effect.gain(),wave=waveform(),isTouchLocked=!1,loader=void 0,loop=!1,playbackRate=1,playWhenReady=void 0,source=void 0,sound=null;return context&&(effect.setDestination(gain),gain.connect(destination||context.destination)),sound=Object.create(Emitter.prototype,{_events:{value:{}},constructor:{value:Sound},play:{value:play},pause:{value:pause},load:{value:load},seek:{value:seek},stop:{value:stop},fade:{value:fade},destroy:{value:destroy},context:{value:context},currentTime:{get:function(){return source?source.currentTime:0},set:function(value){source&&source.stop(),play(0,value)}},data:{get:function(){return data},set:function(value){value&&createSource(value)}},duration:{get:function(){return source?source.duration:0}},effect:{value:effect},ended:{get:function(){return!!source&&source.ended}},frequency:{get:function(){return source?source.frequency:0},set:function(value){source&&source.hasOwnProperty("frequency")&&(source.frequency=value)}},gain:{value:gain},id:{get:function(){return id},set:function(value){id=value}},isTouchLocked:{set:function(value){isTouchLocked=value,loader&&(loader.isTouchLocked=value),!value&&playWhenReady&&playWhenReady()}},loader:{get:function(){return loader}},loop:{get:function(){return loop},set:function(value){loop=!!value,source&&source.hasOwnProperty("loop")&&source.loop!==loop&&(source.loop=loop)}},paused:{get:function(){return!!source&&source.paused}},playing:{get:function(){return!!source&&source.playing}},playbackRate:{get:function(){return playbackRate},set:function(value){playbackRate=value,source&&(source.playbackRate=playbackRate)}},progress:{get:function(){return source?source.progress:0}},sourceNode:{get:function(){return source?source.sourceNode:null}},volume:{get:function(){return context?gain.gain.value:source&&source.hasOwnProperty("volume")?source.volume:1},set:function(value){if(!isNaN(value)){var param=gain.gain;if(context){var time=context.currentTime;param.cancelScheduledValues(time),param.value=value,param.setValueAtTime(value,time)}else param.value=value,source&&source.hasOwnProperty("volume")&&(source.volume=value)}}},groupVolume:{get:function(){return source.groupVolume},set:function(value){source&&source.hasOwnProperty("groupVolume")&&(source.groupVolume=value)}},waveform:{value:function(length){return data||sound.once("ready",function(){return wave(data,length)}),wave(data,length)}},userData:{value:{}}}),Object.freeze(sound)}function SoundGroup(context,destination){function getSource(){sounds.length&&(src=sounds.slice(0).sort(function(a,b){return b.duration-a.duration})[0])}var group=new Group(context,destination),sounds=group.sounds,playbackRate=1,loop=!1,src=void 0,add=group.add;group.add=function(sound){return add(sound),getSource(),group};var remove=group.rmeove;return group.remove=function(soundOrId){return remove(soundOrId),getSource(),group},Object.defineProperties(group,{currentTime:{get:function(){return src?src.currentTime:0},set:function(value){this.stop(),this.play(0,value)}},duration:{get:function(){return src?src.duration:0}},loop:{get:function(){return loop},set:function(value){loop=!!value,sounds.forEach(function(sound){sound.loop=loop})}},paused:{get:function(){return!!src&&src.paused}},progress:{get:function(){return src?src.progress:0}},playbackRate:{get:function(){return playbackRate},set:function(value){playbackRate=value,sounds.forEach(function(sound){sound.playbackRate=playbackRate})}},playing:{get:function(){return!!src&&src.playing}}}),group}function Microphone(connected,denied,error){function connect(){return isSupported?(navigator.getUserMedia({audio:!0},function(micStream){stream=micStream,connected(stream)},function(e){denied&&"PermissionDeniedError"===e.name||"PERMISSION_DENIED"===e?denied():error(e.message||e)}),api):api}function disconnect(){return stream&&(stream.stop(),stream=null),api}navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,error=error||function(){};var isSupported=!!navigator.getUserMedia,api={},stream=null;return Object.defineProperties(api,{connect:{value:connect},disconnect:{value:disconnect},isSupported:{value:isSupported},stream:{get:function(){return stream}}}),Object.freeze(api)}function waveformer(config){function clear(){bgColor?(ctx.fillStyle=bgColor,ctx.fillRect(originX,originY,width,height)):ctx.clearRect(originX,originY,width,height),ctx.lineWidth=lineWidth,currentColor=null,"function"!=typeof color&&(ctx.strokeStyle=color,ctx.beginPath())}function updateColor(position,length,value){if("function"==typeof color){var newColor=color(position,length,value);newColor!==currentColor&&(currentColor=newColor,ctx.stroke(),ctx.strokeStyle=currentColor,ctx.beginPath())}}function getValue(value,position,length){return"function"==typeof transform?transform(value,position,length):value}function getWaveform(value,length){return value&&"function"==typeof value.waveform?value.waveform(length):value?value:config.waveform?config.waveform:config.sound?config.sound.waveform(length):null}function update(wave){if(clear(),"circular"===shape){var waveform=getWaveform(wave,360),length=Math.floor(waveform.length*percent),step=twoPI/length,angle=void 0,magnitude=void 0,sine=void 0,cosine=void 0;for(i=0;i<length;i++){var value=getValue(waveform[i],i,length);updateColor(i,length,value),angle=i*step-halfPI,cosine=Math.cos(angle),sine=Math.sin(angle),"fill"===style&&(x=centerX+innerRadius*cosine,y=centerY+innerRadius*sine,ctx.moveTo(x,y)),magnitude=innerRadius+(radius-innerRadius)*value,x=centerX+magnitude*cosine,y=centerY+magnitude*sine,"line"===style&&0===i&&ctx.moveTo(x,y),ctx.lineTo(x,y)}"line"===style&&ctx.closePath()}else{var _waveform=getWaveform(wave,width),_length=Math.min(_waveform.length,width-lineWidth/2);for(_length=Math.floor(_length*percent),i=0;i<_length;i++){var _value=getValue(_waveform[i],i,_length);updateColor(i,_length,_value),"line"===style&&i>0&&ctx.lineTo(x,y),x=originX+i,y=originY+height-Math.round(height*_value),y=Math.floor(Math.min(y,originY+height-lineWidth/2)),"fill"===style?(ctx.moveTo(x,y),ctx.lineTo(x,originY+height)):ctx.lineTo(x,y)}}ctx.stroke()}var style=config.style||"fill",shape=config.shape||"linear",color=config.color||0,bgColor=config.bgColor,lineWidth=config.lineWidth||1,percent=config.percent||1,originX=config.x||0,originY=config.y||0,transform=config.transform,canvas=config.canvas,width=config.width||canvas&&canvas.width,height=config.height||canvas&&canvas.height,ctx=null,currentColor=void 0,i=void 0,x=void 0,y=void 0,radius=void 0,innerRadius=void 0,centerX=void 0,centerY=void 0;return canvas||config.context||(canvas=document.createElement("canvas"),width=width||canvas.width,height=height||canvas.height,canvas.width=height,canvas.height=height),"circular"===shape&&(radius=config.radius||Math.min(height/2,width/2),innerRadius=config.innerRadius||radius/2,centerX=originX+width/2,centerY=originY+height/2),ctx=config.context||canvas.getContext("2d"),update.canvas=canvas,(config.waveform||config.sound)&&update(),update}function getContext(){if(ctx)return ctx;var Ctx=window.AudioContext||window.webkitAudioContext;ctx=Ctx?new Ctx:null;var isSuspended=ctx&&"suspended"===ctx.state;return isSuspended&&"function"==typeof ctx.resume&&window.setTimeout(function(){ctx.resume()},1e3),ctx}function getOfflineContext(numOfChannels,length,sampleRate){if(offlineCtx)return offlineCtx;numOfChannels=numOfChannels||2,sampleRate=sampleRate||44100,length=sampleRate||numOfChannels;var OfflineCtx=window.OfflineAudioContext||window.webkitOfflineAudioContext;return offlineCtx=OfflineCtx?new OfflineCtx(numOfChannels,length,sampleRate):null}function cloneBuffer(buffer){if(!ctx)return buffer;for(var numChannels=buffer.numberOfChannels,cloned=ctx.createBuffer(numChannels,buffer.length,buffer.sampleRate),i=0;i<numChannels;i++)cloned.getChannelData(i).set(buffer.getChannelData(i));return cloned}function reverseBuffer(buffer){for(var numChannels=buffer.numberOfChannels,i=0;i<numChannels;i++)Array.prototype.reverse.call(buffer.getChannelData(i));return buffer}function ramp(param,fromValue,toValue,duration,linear){ctx&&(param.setValueAtTime(fromValue,ctx.currentTime),linear?param.linearRampToValueAtTime(toValue,ctx.currentTime+duration):param.exponentialRampToValueAtTime(toValue,ctx.currentTime+duration))}function getFrequency(value){if(!ctx)return 0;var minValue=40,maxValue=ctx.sampleRate/2,numberOfOctaves=Math.log(maxValue/minValue)/Math.LN2,multiplier=Math.pow(2,numberOfOctaves*(value-1));return maxValue*multiplier}function microphone(connected,denied,error){return new Microphone(connected,denied,error)}function timeCode(seconds){var delim=arguments.length<=1||void 0===arguments[1]?":":arguments[1],m=Math.floor(seconds/60),s=Math.floor(seconds%3600%60),mn=(m<10?"0"+m:m)+delim,sc=s<10?"0"+s:s;return mn+sc}function Sono(){function getSound(id){return group.find(id)}function createGroup(sounds){var soundGroup=new SoundGroup(context,group.gain);return sounds&&sounds.forEach(function(sound){return soundGroup.add(sound)}),soundGroup}function add(config){var soundContext=config&&config.webAudio===!1?null:context,sound=new Sound(soundContext,group.gain);return sound.isTouchLocked=isTouchLocked,config&&(sound.id=config.id||config.name||"",sound.loop=!!config.loop,sound.volume=config.volume),group.add(sound),sound}function queue(config,loaderGroup){var sound=add(config).load(config);return loaderGroup&&loaderGroup.add(sound.loader),sound}function load(config){var src=config.src||config.url||config.data||config,sound=void 0,loader=void 0;if(file.containsURL(src))sound=queue(config),loader=sound.loader;else{if(!Array.isArray(src)||!file.containsURL(src[0].src||src[0].url)){var errorMessage="sono.load: No audio file URLs found in config.";if(!config.onError)throw new Error(errorMessage);return config.onError("[ERROR] "+errorMessage),null}sound=[],loader=new Loader.Group,src.forEach(function(url){return sound.push(queue(url,loader))})}return config.onProgress&&loader.on("progress",function(progress){return config.onProgress(progress)}),config.onComplete&&loader.once("complete",function(){loader.off("progress"),config.onComplete(sound)}),loader.once("error",function(err){loader.off("error"),config.onError&&config.onError(err)}),loader.start(),sound}function createSound(config){if(file.containsURL(config))return load(config);var sound=add(config);return sound.data=config.data||config,sound}function destroySound(soundOrId){return group.find(soundOrId,function(sound){return sound.destroy()}),api}function destroyAll(){return group.destroy(),api}function mute(){return group.mute(),api}function unMute(){return group.unMute(),api}function fade(volume,duration){return group.fade(volume,duration),api}function pauseAll(){return group.pause(),api}function resumeAll(){return group.resume(),api}function stopAll(){return group.stop(),api}function play(id,delay,offset){return group.find(id,function(sound){return sound.play(delay,offset)}),api}function pause(id){return group.find(id,function(sound){return sound.pause()}),api}function stop(id){return group.find(id,function(sound){return sound.stop()}),api}function log(){"Supported:"+api.isSupported+" WebAudioAPI:"+api.hasWebAudio+" TouchLocked:"+isTouchLocked+" State:"+(context&&context.state)+" Extensions:"+file.extensions;if(navigator.userAgent.indexOf("Chrome")>-1);else window.console&&window.console.log.call}var VERSION="0.1.8",context=utils.getContext(),destination=context?context.destination:null,group=new Group(context,destination),api=null,isTouchLocked=!1;return isTouchLocked=browser.handleTouchLock(context,function(){isTouchLocked=!1,group.sounds.forEach(function(sound){return sound.isTouchLocked=!1})}),function(){function onHidden(){group.sounds.forEach(function(sound){sound.playing&&(sound.pause(),pageHiddenPaused.push(sound))})}function onShown(){for(;pageHiddenPaused.length;)pageHiddenPaused.pop().play()}var pageHiddenPaused=[];browser.handlePageVisibility(onHidden,onShown)}(),api={createSound:createSound,destroySound:destroySound,destroyAll:destroyAll,getSound:getSound,createGroup:createGroup,file:file,load:load,mute:mute,unMute:unMute,fade:fade,pauseAll:pauseAll,resumeAll:resumeAll,stopAll:stopAll,play:play,pause:pause,stop:stop,log:log,canPlay:file.canPlay,context:context,getOfflineContext:utils.getOfflineContext,effect:group.effect,extensions:file.extensions,hasWebAudio:!!context,isSupported:file.extensions.length>0,gain:group.gain,utils:utils,VERSION:VERSION,Sound:Sound,Group:Group},Object.defineProperties(api,{isTouchLocked:{get:function(){return isTouchLocked}},sounds:{get:function(){return group.sounds.slice(0)}},volume:{get:function(){return group.volume},set:function(value){group.volume=value}}}),Object.freeze(api)}var browser={};browser.handlePageVisibility=function(onHidden,onShown){function onChange(){document[hidden]?onHidden():onShown()}var hidden=void 0,visibilityChange=void 0;"undefined"!=typeof document.hidden?(hidden="hidden",visibilityChange="visibilitychange"):"undefined"!=typeof document.mozHidden?(hidden="mozHidden",visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(hidden="msHidden",visibilityChange="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(hidden="webkitHidden",visibilityChange="webkitvisibilitychange"),"undefined"!=typeof visibilityChange&&document.addEventListener(visibilityChange,onChange,!1)},browser.handleTouchLock=function(context,onUnlock){function unlock(){context&&"suspended"===context.state?context.resume().then(function(){var buffer=context.createBuffer(1,1,22050),source=context.createBufferSource();source.buffer=buffer,source.connect(context.destination),source.start(0),source.stop(0),source.disconnect(),document.body.removeEventListener("touchend",unlock),onUnlock()}):(document.body.removeEventListener("touchend",unlock),onUnlock())}var ua=navigator.userAgent,locked=!!ua.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone|SymbianOS/i);return locked&&document.body.addEventListener("touchend",unlock,!1),locked};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")},inherits=function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)},possibleConstructorReturn=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call},extensions=[],canPlay={},tests=[{ext:"ogg",type:'audio/ogg; codecs="vorbis"'},{ext:"mp3",type:"audio/mpeg;"},{ext:"opus",type:'audio/ogg; codecs="opus"'},{ext:"wav",type:'audio/wav; codecs="1"'},{ext:"m4a",type:"audio/x-m4a;"},{ext:"m4a",type:"audio/aac;"}],el=document.createElement("audio");el&&(tests.forEach(function(test){var canPlayType=!!el.canPlayType(test.type);canPlayType&&extensions.indexOf(test.ext)===-1&&extensions.push(test.ext),
canPlay[test.ext]=canPlayType}),el=null);var file={canPlay:canPlay,containsURL:containsURL,extensions:extensions,getFileExtension:getFileExtension,getSupportedFile:getSupportedFile,isAudioBuffer:isAudioBuffer,isMediaElement:isMediaElement,isMediaStream:isMediaStream,isOscillatorType:isOscillatorType,isScriptConfig:isScriptConfig,isURL:isURL},n=22050;Panner.defaults={panningModel:"HRTF",distanceModel:"linear",refDistance:1,maxDistance:1e3,rolloffFactor:1,coneInnerAngle:360,coneOuterAngle:0,coneOuterGain:0},Group.Effect=Effect;var events=EventEmitter$1;EventEmitter$1.EventEmitter=EventEmitter$1,EventEmitter$1.prototype._events=void 0,EventEmitter$1.prototype._maxListeners=void 0,EventEmitter$1.defaultMaxListeners=10,EventEmitter$1.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter$1.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;var err=new Error('Uncaught, unspecified "error" event. ('+er+")");throw err.context=er,err}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1),handler.apply(this,args)}else if(isObject(handler))for(args=Array.prototype.slice.call(arguments,1),listeners=handler.slice(),len=listeners.length,i=0;i<len;i++)listeners[i].apply(this,args);return!0},EventEmitter$1.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned&&(m=isUndefined(this._maxListeners)?EventEmitter$1.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,"function"==typeof console.trace)),this},EventEmitter$1.prototype.on=EventEmitter$1.prototype.addListener,EventEmitter$1.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter$1.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-- >0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(position<0)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter$1.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else if(listeners)for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter$1.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter$1.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;if(evlistener)return evlistener.length}return 0},EventEmitter$1.listenerCount=function(emitter,type){return emitter.listenerCount(type)};var EventEmitter=events.EventEmitter,Emitter=function(_EventEmitter){function Emitter(){return classCallCheck(this,Emitter),possibleConstructorReturn(this,_EventEmitter.call(this))}return inherits(Emitter,_EventEmitter),Emitter.prototype.off=function(type,listener){return listener?this.removeListener(type,listener):type?this.removeAllListeners(type):this.removeAllListeners()},Emitter}(EventEmitter);Loader.Group=function(){function progressHandler(progress){var loaded=numLoaded+progress;emitter.emit("progress",loaded/numTotal)}function completeHandler(){numLoaded++,removeListeners(),emitter.emit("progress",numLoaded/numTotal),next()}function errorHandler(e){removeListeners(),emitter.emit("error",e),next()}function next(){return 0===queue.length?(currentLoader=null,void emitter.emit("complete")):(currentLoader=queue.pop(),currentLoader.on("progress",progressHandler),currentLoader.once("loaded",completeHandler),currentLoader.once("error",errorHandler),void currentLoader.start())}function removeListeners(){currentLoader.off("progress",progressHandler),currentLoader.off("loaded",completeHandler),currentLoader.off("error",errorHandler)}function add(loader){return queue.push(loader),numTotal++,loader}function start(){numTotal=queue.length,next()}var emitter=new Emitter,queue=[],numLoaded=0,numTotal=0,currentLoader=void 0;return Object.freeze({on:emitter.on.bind(emitter),once:emitter.once.bind(emitter),off:emitter.off.bind(emitter),add:add,start:start})},Sound.__source={BufferSource:BufferSource,MediaSource:MediaSource,MicrophoneSource:MicrophoneSource,OscillatorSource:OscillatorSource,ScriptSource:ScriptSource};var halfPI=Math.PI/2,twoPI=2*Math.PI,ctx=void 0,offlineCtx=void 0,utils=Object.freeze({getContext:getContext,getOfflineContext:getOfflineContext,cloneBuffer:cloneBuffer,reverseBuffer:reverseBuffer,ramp:ramp,getFrequency:getFrequency,microphone:microphone,timeCode:timeCode,waveformer:waveformer}),sono=new Sono;return sono})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(251),module.exports.color=__webpack_require__(252)},function(module,exports){var dat=module.exports=dat||{};dat.gui=dat.gui||{},dat.utils=dat.utils||{},dat.controllers=dat.controllers||{},dat.dom=dat.dom||{},dat.color=dat.color||{},dat.utils.css=function(){return{load:function(url,doc){doc=doc||document;var link=doc.createElement("link");link.type="text/css",link.rel="stylesheet",link.href=url,doc.getElementsByTagName("head")[0].appendChild(link)},inject:function(css,doc){doc=doc||document;var injected=document.createElement("style");injected.type="text/css",injected.innerHTML=css,doc.getElementsByTagName("head")[0].appendChild(injected)}}}(),dat.utils.common=function(){var ARR_EACH=Array.prototype.forEach,ARR_SLICE=Array.prototype.slice;return{BREAK:{},extend:function(target){return this.each(ARR_SLICE.call(arguments,1),function(obj){for(var key in obj)this.isUndefined(obj[key])||(target[key]=obj[key])},this),target},defaults:function(target){return this.each(ARR_SLICE.call(arguments,1),function(obj){for(var key in obj)this.isUndefined(target[key])&&(target[key]=obj[key])},this),target},compose:function(){var toCall=ARR_SLICE.call(arguments);return function(){for(var args=ARR_SLICE.call(arguments),i=toCall.length-1;i>=0;i--)args=[toCall[i].apply(this,args)];return args[0]}},each:function(obj,itr,scope){if(ARR_EACH&&obj.forEach===ARR_EACH)obj.forEach(itr,scope);else if(obj.length===obj.length+0){for(var key=0,l=obj.length;key<l;key++)if(key in obj&&itr.call(scope,obj[key],key)===this.BREAK)return}else for(var key in obj)if(itr.call(scope,obj[key],key)===this.BREAK)return},defer:function(fnc){setTimeout(fnc,0)},toArray:function(obj){return obj.toArray?obj.toArray():ARR_SLICE.call(obj)},isUndefined:function(obj){return void 0===obj},isNull:function(obj){return null===obj},isNaN:function(obj){return obj!==obj},isArray:Array.isArray||function(obj){return obj.constructor===Array},isObject:function(obj){return obj===Object(obj)},isNumber:function(obj){return obj===obj+0},isString:function(obj){return obj===obj+""},isBoolean:function(obj){return obj===!1||obj===!0},isFunction:function(obj){return"[object Function]"===Object.prototype.toString.call(obj)}}}(),dat.controllers.Controller=function(common){var Controller=function(object,property){this.initialValue=object[property],this.domElement=document.createElement("div"),this.object=object,this.property=property,this.__onChange=void 0,this.__onFinishChange=void 0};return common.extend(Controller.prototype,{onChange:function(fnc){return this.__onChange=fnc,this},onFinishChange:function(fnc){return this.__onFinishChange=fnc,this},setValue:function(newValue){return this.object[this.property]=newValue,this.__onChange&&this.__onChange.call(this,newValue),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),Controller}(dat.utils.common),dat.dom.dom=function(common){function cssValueToPixels(val){if("0"===val||common.isUndefined(val))return 0;var match=val.match(CSS_VALUE_PIXELS);return common.isNull(match)?0:parseFloat(match[1])}var EVENT_MAP={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},EVENT_MAP_INV={};common.each(EVENT_MAP,function(v,k){common.each(v,function(e){EVENT_MAP_INV[e]=k})});var CSS_VALUE_PIXELS=/(\d+(\.\d+)?)px/,dom={makeSelectable:function(elem,selectable){void 0!==elem&&void 0!==elem.style&&(elem.onselectstart=selectable?function(){return!1}:function(){},elem.style.MozUserSelect=selectable?"auto":"none",elem.style.KhtmlUserSelect=selectable?"auto":"none",elem.unselectable=selectable?"on":"off")},makeFullscreen:function(elem,horizontal,vertical){common.isUndefined(horizontal)&&(horizontal=!0),common.isUndefined(vertical)&&(vertical=!0),elem.style.position="absolute",horizontal&&(elem.style.left=0,elem.style.right=0),vertical&&(elem.style.top=0,elem.style.bottom=0)},fakeEvent:function(elem,eventType,params,aux){params=params||{};var className=EVENT_MAP_INV[eventType];if(!className)throw new Error("Event type "+eventType+" not supported.");var evt=document.createEvent(className);switch(className){case"MouseEvents":var clientX=params.x||params.clientX||0,clientY=params.y||params.clientY||0;evt.initMouseEvent(eventType,params.bubbles||!1,params.cancelable||!0,window,params.clickCount||1,0,0,clientX,clientY,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var init=evt.initKeyboardEvent||evt.initKeyEvent;common.defaults(params,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),init(eventType,params.bubbles||!1,params.cancelable,window,params.ctrlKey,params.altKey,params.shiftKey,params.metaKey,params.keyCode,params.charCode);break;default:evt.initEvent(eventType,params.bubbles||!1,params.cancelable||!0)}common.defaults(evt,aux),elem.dispatchEvent(evt)},bind:function(elem,event,func,bool){return bool=bool||!1,elem.addEventListener?elem.addEventListener(event,func,bool):elem.attachEvent&&elem.attachEvent("on"+event,func),dom},unbind:function(elem,event,func,bool){return bool=bool||!1,elem.removeEventListener?elem.removeEventListener(event,func,bool):elem.detachEvent&&elem.detachEvent("on"+event,func),dom},addClass:function(elem,className){if(void 0===elem.className)elem.className=className;else if(elem.className!==className){var classes=elem.className.split(/ +/);classes.indexOf(className)==-1&&(classes.push(className),elem.className=classes.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return dom},removeClass:function(elem,className){if(className)if(void 0===elem.className);else if(elem.className===className)elem.removeAttribute("class");else{var classes=elem.className.split(/ +/),index=classes.indexOf(className);index!=-1&&(classes.splice(index,1),elem.className=classes.join(" "))}else elem.className=void 0;return dom},hasClass:function(elem,className){return new RegExp("(?:^|\\s+)"+className+"(?:\\s+|$)").test(elem.className)||!1},getWidth:function(elem){var style=getComputedStyle(elem);return cssValueToPixels(style["border-left-width"])+cssValueToPixels(style["border-right-width"])+cssValueToPixels(style["padding-left"])+cssValueToPixels(style["padding-right"])+cssValueToPixels(style.width)},getHeight:function(elem){var style=getComputedStyle(elem);return cssValueToPixels(style["border-top-width"])+cssValueToPixels(style["border-bottom-width"])+cssValueToPixels(style["padding-top"])+cssValueToPixels(style["padding-bottom"])+cssValueToPixels(style.height)},getOffset:function(elem){var offset={left:0,top:0};if(elem.offsetParent)do offset.left+=elem.offsetLeft,offset.top+=elem.offsetTop;while(elem=elem.offsetParent);return offset},isActive:function(elem){return elem===document.activeElement&&(elem.type||elem.href)}};return dom}(dat.utils.common),dat.controllers.OptionController=function(Controller,dom,common){var OptionController=function(object,property,options){OptionController.superclass.call(this,object,property);var _this=this;if(this.__select=document.createElement("select"),common.isArray(options)){var map={};common.each(options,function(element){map[element]=element}),options=map}common.each(options,function(value,key){var opt=document.createElement("option");opt.innerHTML=key,opt.setAttribute("value",value),_this.__select.appendChild(opt)}),this.updateDisplay(),dom.bind(this.__select,"change",function(){var desiredValue=this.options[this.selectedIndex].value;_this.setValue(desiredValue)}),this.domElement.appendChild(this.__select)};return OptionController.superclass=Controller,common.extend(OptionController.prototype,Controller.prototype,{setValue:function(v){var toReturn=OptionController.superclass.prototype.setValue.call(this,v);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),toReturn},updateDisplay:function(){return this.__select.value=this.getValue(),OptionController.superclass.prototype.updateDisplay.call(this)}}),OptionController}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.NumberController=function(Controller,common){function numDecimals(x){return x=x.toString(),x.indexOf(".")>-1?x.length-x.indexOf(".")-1:0}var NumberController=function(object,property,params){NumberController.superclass.call(this,object,property),params=params||{},this.__min=params.min,this.__max=params.max,this.__step=params.step,common.isUndefined(this.__step)?0==this.initialValue?this.__impliedStep=1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=numDecimals(this.__impliedStep)};return NumberController.superclass=Controller,common.extend(NumberController.prototype,Controller.prototype,{setValue:function(v){return void 0!==this.__min&&v<this.__min?v=this.__min:void 0!==this.__max&&v>this.__max&&(v=this.__max),void 0!==this.__step&&v%this.__step!=0&&(v=Math.round(v/this.__step)*this.__step),NumberController.superclass.prototype.setValue.call(this,v)},min:function(v){return this.__min=v,this},max:function(v){return this.__max=v,this},step:function(v){return this.__step=v,this}}),NumberController}(dat.controllers.Controller,dat.utils.common),dat.controllers.NumberControllerBox=function(NumberController,dom,common){function roundToDecimal(value,decimals){var tenTo=Math.pow(10,decimals);return Math.round(value*tenTo)/tenTo}var NumberControllerBox=function(object,property,params){function onChange(){var attempted=parseFloat(_this.__input.value);common.isNaN(attempted)||_this.setValue(attempted)}function onBlur(){onChange(),_this.__onFinishChange&&_this.__onFinishChange.call(_this,_this.getValue())}function onMouseDown(e){dom.bind(window,"mousemove",onMouseDrag),dom.bind(window,"mouseup",onMouseUp),prev_y=e.clientY}function onMouseDrag(e){var diff=prev_y-e.clientY;_this.setValue(_this.getValue()+diff*_this.__impliedStep),prev_y=e.clientY}function onMouseUp(){dom.unbind(window,"mousemove",onMouseDrag),dom.unbind(window,"mouseup",onMouseUp)}this.__truncationSuspended=!1,NumberControllerBox.superclass.call(this,object,property,params);var prev_y,_this=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),dom.bind(this.__input,"change",onChange),dom.bind(this.__input,"blur",onBlur),dom.bind(this.__input,"mousedown",onMouseDown),dom.bind(this.__input,"keydown",function(e){13===e.keyCode&&(_this.__truncationSuspended=!0,this.blur(),_this.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return NumberControllerBox.superclass=NumberController,common.extend(NumberControllerBox.prototype,NumberController.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():roundToDecimal(this.getValue(),this.__precision),NumberControllerBox.superclass.prototype.updateDisplay.call(this)}}),NumberControllerBox}(dat.controllers.NumberController,dat.dom.dom,dat.utils.common),dat.controllers.NumberControllerSlider=function(NumberController,dom,css,common,styleSheet){function map(v,i1,i2,o1,o2){return o1+(o2-o1)*((v-i1)/(i2-i1))}var NumberControllerSlider=function(object,property,min,max,step){function onMouseDown(e){dom.bind(window,"mousemove",onMouseDrag),dom.bind(window,"mouseup",onMouseUp),onMouseDrag(e)}function onMouseDrag(e){e.preventDefault();var offset=dom.getOffset(_this.__background),width=dom.getWidth(_this.__background);return _this.setValue(map(e.clientX,offset.left,offset.left+width,_this.__min,_this.__max)),!1}function onMouseUp(){dom.unbind(window,"mousemove",onMouseDrag),dom.unbind(window,"mouseup",onMouseUp),_this.__onFinishChange&&_this.__onFinishChange.call(_this,_this.getValue())}NumberControllerSlider.superclass.call(this,object,property,{min:min,max:max,step:step});var _this=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),dom.bind(this.__background,"mousedown",onMouseDown),dom.addClass(this.__background,"slider"),dom.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return NumberControllerSlider.superclass=NumberController,NumberControllerSlider.useDefaultStyles=function(){css.inject(styleSheet)},common.extend(NumberControllerSlider.prototype,NumberController.prototype,{updateDisplay:function(){var pct=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*pct+"%",NumberControllerSlider.superclass.prototype.updateDisplay.call(this)}}),NumberControllerSlider}(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common,".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),dat.controllers.FunctionController=function(Controller,dom,common){var FunctionController=function(object,property,text){FunctionController.superclass.call(this,object,property);var _this=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===text?"Fire":text,dom.bind(this.__button,"click",function(e){return e.preventDefault(),_this.fire(),!1}),dom.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return FunctionController.superclass=Controller,common.extend(FunctionController.prototype,Controller.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),FunctionController}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.BooleanController=function(Controller,dom,common){var BooleanController=function(object,property){function onChange(){_this.setValue(!_this.__prev)}BooleanController.superclass.call(this,object,property);var _this=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),dom.bind(this.__checkbox,"change",onChange,!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return BooleanController.superclass=Controller,common.extend(BooleanController.prototype,Controller.prototype,{setValue:function(v){var toReturn=BooleanController.superclass.prototype.setValue.call(this,v);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),toReturn},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,BooleanController.superclass.prototype.updateDisplay.call(this)}}),BooleanController}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.color.toString=function(common){return function(color){if(1==color.a||common.isUndefined(color.a)){for(var s=color.hex.toString(16);s.length<6;)s="0"+s;return"#"+s}return"rgba("+Math.round(color.r)+","+Math.round(color.g)+","+Math.round(color.b)+","+color.a+")"}}(dat.utils.common),dat.color.interpret=function(toString,common){var result,toReturn,interpret=function(){toReturn=!1;var original=arguments.length>1?common.toArray(arguments):arguments[0];return common.each(INTERPRETATIONS,function(family){if(family.litmus(original))return common.each(family.conversions,function(conversion,conversionName){if(result=conversion.read(original),toReturn===!1&&result!==!1)return toReturn=result,result.conversionName=conversionName,result.conversion=conversion,common.BREAK}),common.BREAK}),toReturn},INTERPRETATIONS=[{litmus:common.isString,conversions:{THREE_CHAR_HEX:{read:function(original){var test=original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==test&&{space:"HEX",hex:parseInt("0x"+test[1].toString()+test[1].toString()+test[2].toString()+test[2].toString()+test[3].toString()+test[3].toString())}},write:toString},SIX_CHAR_HEX:{read:function(original){var test=original.match(/^#([A-F0-9]{6})$/i);return null!==test&&{space:"HEX",hex:parseInt("0x"+test[1].toString())}},write:toString},CSS_RGB:{read:function(original){var test=original.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==test&&{space:"RGB",r:parseFloat(test[1]),g:parseFloat(test[2]),b:parseFloat(test[3])}},write:toString},CSS_RGBA:{read:function(original){var test=original.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==test&&{space:"RGB",r:parseFloat(test[1]),g:parseFloat(test[2]),b:parseFloat(test[3]),a:parseFloat(test[4])}},write:toString}}},{litmus:common.isNumber,conversions:{HEX:{read:function(original){return{space:"HEX",hex:original,conversionName:"HEX"}},write:function(color){return color.hex}}}},{litmus:common.isArray,conversions:{RGB_ARRAY:{read:function(original){return 3==original.length&&{space:"RGB",r:original[0],g:original[1],b:original[2]}},write:function(color){return[color.r,color.g,color.b]}},RGBA_ARRAY:{read:function(original){return 4==original.length&&{space:"RGB",r:original[0],g:original[1],b:original[2],a:original[3]}},write:function(color){return[color.r,color.g,color.b,color.a]}}}},{litmus:common.isObject,conversions:{RGBA_OBJ:{read:function(original){return!!(common.isNumber(original.r)&&common.isNumber(original.g)&&common.isNumber(original.b)&&common.isNumber(original.a))&&{space:"RGB",r:original.r,g:original.g,b:original.b,a:original.a}},write:function(color){return{r:color.r,g:color.g,b:color.b,a:color.a}}},RGB_OBJ:{read:function(original){return!!(common.isNumber(original.r)&&common.isNumber(original.g)&&common.isNumber(original.b))&&{space:"RGB",r:original.r,g:original.g,b:original.b}},write:function(color){return{r:color.r,g:color.g,b:color.b}}},HSVA_OBJ:{read:function(original){return!!(common.isNumber(original.h)&&common.isNumber(original.s)&&common.isNumber(original.v)&&common.isNumber(original.a))&&{space:"HSV",h:original.h,s:original.s,v:original.v,a:original.a}},write:function(color){return{h:color.h,s:color.s,v:color.v,a:color.a}}},HSV_OBJ:{read:function(original){return!!(common.isNumber(original.h)&&common.isNumber(original.s)&&common.isNumber(original.v))&&{space:"HSV",h:original.h,s:original.s,v:original.v}},write:function(color){return{h:color.h,s:color.s,v:color.v}}}}}];return interpret}(dat.color.toString,dat.utils.common),dat.GUI=dat.gui.GUI=function(css,saveDialogueContents,styleSheet,controllerFactory,Controller,BooleanController,FunctionController,NumberControllerBox,NumberControllerSlider,OptionController,ColorController,requestAnimationFrame,CenteredDiv,dom,common){function add(gui,object,property,params){if(void 0===object[property])throw new Error("Object "+object+' has no property "'+property+'"');var controller;if(params.color)controller=new ColorController(object,property);else{var factoryArgs=[object,property].concat(params.factoryArgs);controller=controllerFactory.apply(gui,factoryArgs)}params.before instanceof Controller&&(params.before=params.before.__li),recallSavedValue(gui,controller),dom.addClass(controller.domElement,"c");var name=document.createElement("span");dom.addClass(name,"property-name"),name.innerHTML=controller.property;var container=document.createElement("div");container.appendChild(name),container.appendChild(controller.domElement);var li=addRow(gui,container,params.before);return dom.addClass(li,GUI.CLASS_CONTROLLER_ROW),dom.addClass(li,typeof controller.getValue()),augmentController(gui,li,controller),gui.__controllers.push(controller),controller}function addRow(gui,dom,liBefore){var li=document.createElement("li");return dom&&li.appendChild(dom),liBefore?gui.__ul.insertBefore(li,params.before):gui.__ul.appendChild(li),gui.onResize(),li}function augmentController(gui,li,controller){if(controller.__li=li,controller.__gui=gui,common.extend(controller,{options:function(options){return arguments.length>1?(controller.remove(),add(gui,controller.object,controller.property,{before:controller.__li.nextElementSibling,factoryArgs:[common.toArray(arguments)]})):common.isArray(options)||common.isObject(options)?(controller.remove(),add(gui,controller.object,controller.property,{before:controller.__li.nextElementSibling,factoryArgs:[options]})):void 0},name:function(v){return controller.__li.firstElementChild.firstElementChild.innerHTML=v,controller},listen:function(){return controller.__gui.listen(controller),controller},remove:function(){return controller.__gui.remove(controller),controller}}),controller instanceof NumberControllerSlider){var box=new NumberControllerBox(controller.object,controller.property,{min:controller.__min,max:controller.__max,step:controller.__step});common.each(["updateDisplay","onChange","onFinishChange"],function(method){var pc=controller[method],pb=box[method];controller[method]=box[method]=function(){var args=Array.prototype.slice.call(arguments);return pc.apply(controller,args),pb.apply(box,args)}}),dom.addClass(li,"has-slider"),controller.domElement.insertBefore(box.domElement,controller.domElement.firstElementChild)}else if(controller instanceof NumberControllerBox){var r=function(returned){return common.isNumber(controller.__min)&&common.isNumber(controller.__max)?(controller.remove(),add(gui,controller.object,controller.property,{before:controller.__li.nextElementSibling,factoryArgs:[controller.__min,controller.__max,controller.__step]})):returned};controller.min=common.compose(r,controller.min),controller.max=common.compose(r,controller.max)}else controller instanceof BooleanController?(dom.bind(li,"click",function(){dom.fakeEvent(controller.__checkbox,"click")}),dom.bind(controller.__checkbox,"click",function(e){e.stopPropagation()})):controller instanceof FunctionController?(dom.bind(li,"click",function(){dom.fakeEvent(controller.__button,"click")}),dom.bind(li,"mouseover",function(){dom.addClass(controller.__button,"hover")}),dom.bind(li,"mouseout",function(){dom.removeClass(controller.__button,"hover")})):controller instanceof ColorController&&(dom.addClass(li,"color"),controller.updateDisplay=common.compose(function(r){return li.style.borderLeftColor=controller.__color.toString(),r},controller.updateDisplay),controller.updateDisplay());controller.setValue=common.compose(function(r){return gui.getRoot().__preset_select&&controller.isModified()&&markPresetModified(gui.getRoot(),!0),r},controller.setValue)}function recallSavedValue(gui,controller){var root=gui.getRoot(),matched_index=root.__rememberedObjects.indexOf(controller.object);if(matched_index!=-1){var controller_map=root.__rememberedObjectIndecesToControllers[matched_index];if(void 0===controller_map&&(controller_map={},root.__rememberedObjectIndecesToControllers[matched_index]=controller_map),controller_map[controller.property]=controller,root.load&&root.load.remembered){var preset,preset_map=root.load.remembered;if(preset_map[gui.preset])preset=preset_map[gui.preset];else{if(!preset_map[DEFAULT_DEFAULT_PRESET_NAME])return;preset=preset_map[DEFAULT_DEFAULT_PRESET_NAME]}if(preset[matched_index]&&void 0!==preset[matched_index][controller.property]){var value=preset[matched_index][controller.property];controller.initialValue=value,controller.setValue(value)}}}}function getLocalStorageHash(gui,key){return document.location.href+"."+key}function addSaveMenu(gui){function showHideExplain(){explain.style.display=gui.useLocalStorage?"block":"none"}var div=gui.__save_row=document.createElement("li");dom.addClass(gui.domElement,"has-save"),gui.__ul.insertBefore(div,gui.__ul.firstChild),dom.addClass(div,"save-row");var gears=document.createElement("span");gears.innerHTML="&nbsp;",dom.addClass(gears,"button gears");var button=document.createElement("span");button.innerHTML="Save",dom.addClass(button,"button"),dom.addClass(button,"save");var button2=document.createElement("span");button2.innerHTML="New",dom.addClass(button2,"button"),dom.addClass(button2,"save-as");var button3=document.createElement("span");button3.innerHTML="Revert",dom.addClass(button3,"button"),dom.addClass(button3,"revert");var select=gui.__preset_select=document.createElement("select");if(gui.load&&gui.load.remembered?common.each(gui.load.remembered,function(value,key){addPresetOption(gui,key,key==gui.preset)}):addPresetOption(gui,DEFAULT_DEFAULT_PRESET_NAME,!1),dom.bind(select,"change",function(){for(var index=0;index<gui.__preset_select.length;index++)gui.__preset_select[index].innerHTML=gui.__preset_select[index].value;gui.preset=this.value}),div.appendChild(select),div.appendChild(gears),div.appendChild(button),div.appendChild(button2),div.appendChild(button3),SUPPORTS_LOCAL_STORAGE){var saveLocally=document.getElementById("dg-save-locally"),explain=document.getElementById("dg-local-explain");saveLocally.style.display="block";var localStorageCheckBox=document.getElementById("dg-local-storage");"true"===localStorage.getItem(getLocalStorageHash(gui,"isLocal"))&&localStorageCheckBox.setAttribute("checked","checked"),
showHideExplain(),dom.bind(localStorageCheckBox,"change",function(){gui.useLocalStorage=!gui.useLocalStorage,showHideExplain()})}var newConstructorTextArea=document.getElementById("dg-new-constructor");dom.bind(newConstructorTextArea,"keydown",function(e){!e.metaKey||67!==e.which&&67!=e.keyCode||SAVE_DIALOGUE.hide()}),dom.bind(gears,"click",function(){newConstructorTextArea.innerHTML=JSON.stringify(gui.getSaveObject(),void 0,2),SAVE_DIALOGUE.show(),newConstructorTextArea.focus(),newConstructorTextArea.select()}),dom.bind(button,"click",function(){gui.save()}),dom.bind(button2,"click",function(){var presetName=prompt("Enter a new preset name.");presetName&&gui.saveAs(presetName)}),dom.bind(button3,"click",function(){gui.revert()})}function addResizeHandle(gui){function dragStart(e){return e.preventDefault(),pmouseX=e.clientX,dom.addClass(gui.__closeButton,GUI.CLASS_DRAG),dom.bind(window,"mousemove",drag),dom.bind(window,"mouseup",dragStop),!1}function drag(e){return e.preventDefault(),gui.width+=pmouseX-e.clientX,gui.onResize(),pmouseX=e.clientX,!1}function dragStop(){dom.removeClass(gui.__closeButton,GUI.CLASS_DRAG),dom.unbind(window,"mousemove",drag),dom.unbind(window,"mouseup",dragStop)}gui.__resize_handle=document.createElement("div"),common.extend(gui.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var pmouseX;dom.bind(gui.__resize_handle,"mousedown",dragStart),dom.bind(gui.__closeButton,"mousedown",dragStart),gui.domElement.insertBefore(gui.__resize_handle,gui.domElement.firstElementChild)}function setWidth(gui,w){gui.domElement.style.width=w+"px",gui.__save_row&&gui.autoPlace&&(gui.__save_row.style.width=w+"px"),gui.__closeButton&&(gui.__closeButton.style.width=w+"px")}function getCurrentPreset(gui,useInitialValues){var toReturn={};return common.each(gui.__rememberedObjects,function(val,index){var saved_values={},controller_map=gui.__rememberedObjectIndecesToControllers[index];common.each(controller_map,function(controller,property){saved_values[property]=useInitialValues?controller.initialValue:controller.getValue()}),toReturn[index]=saved_values}),toReturn}function addPresetOption(gui,name,setSelected){var opt=document.createElement("option");opt.innerHTML=name,opt.value=name,gui.__preset_select.appendChild(opt),setSelected&&(gui.__preset_select.selectedIndex=gui.__preset_select.length-1)}function setPresetSelectIndex(gui){for(var index=0;index<gui.__preset_select.length;index++)gui.__preset_select[index].value==gui.preset&&(gui.__preset_select.selectedIndex=index)}function markPresetModified(gui,modified){var opt=gui.__preset_select[gui.__preset_select.selectedIndex];modified?opt.innerHTML=opt.value+"*":opt.innerHTML=opt.value}function updateDisplays(controllerArray){0!=controllerArray.length&&requestAnimationFrame(function(){updateDisplays(controllerArray)}),common.each(controllerArray,function(c){c.updateDisplay()})}css.inject(styleSheet);var SAVE_DIALOGUE,auto_place_container,CSS_NAMESPACE="dg",HIDE_KEY_CODE=72,CLOSE_BUTTON_HEIGHT=20,DEFAULT_DEFAULT_PRESET_NAME="Default",SUPPORTS_LOCAL_STORAGE=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}(),auto_place_virgin=!0,hide=!1,hideable_guis=[],GUI=function(params){function saveToLocalStorage(){localStorage.setItem(getLocalStorageHash(_this,"gui"),JSON.stringify(_this.getSaveObject()))}function resetWidth(){var root=_this.getRoot();root.width+=1,common.defer(function(){root.width-=1})}var _this=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),dom.addClass(this.domElement,CSS_NAMESPACE),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],params=params||{},params=common.defaults(params,{autoPlace:!0,width:GUI.DEFAULT_WIDTH}),params=common.defaults(params,{resizable:params.autoPlace,hideable:params.autoPlace}),common.isUndefined(params.load)?params.load={preset:DEFAULT_DEFAULT_PRESET_NAME}:params.preset&&(params.load.preset=params.preset),common.isUndefined(params.parent)&&params.hideable&&hideable_guis.push(this),params.resizable=common.isUndefined(params.parent)&&params.resizable,params.autoPlace&&common.isUndefined(params.scrollable)&&(params.scrollable=!0);var use_local_storage=SUPPORTS_LOCAL_STORAGE&&"true"===localStorage.getItem(getLocalStorageHash(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return params.parent}},scrollable:{get:function(){return params.scrollable}},autoPlace:{get:function(){return params.autoPlace}},preset:{get:function(){return _this.parent?_this.getRoot().preset:params.load.preset},set:function(v){_this.parent?_this.getRoot().preset=v:params.load.preset=v,setPresetSelectIndex(this),_this.revert()}},width:{get:function(){return params.width},set:function(v){params.width=v,setWidth(_this,v)}},name:{get:function(){return params.name},set:function(v){params.name=v,title_row_name&&(title_row_name.innerHTML=params.name)}},closed:{get:function(){return params.closed},set:function(v){params.closed=v,params.closed?dom.addClass(_this.__ul,GUI.CLASS_CLOSED):dom.removeClass(_this.__ul,GUI.CLASS_CLOSED),this.onResize(),_this.__closeButton&&(_this.__closeButton.innerHTML=v?GUI.TEXT_OPEN:GUI.TEXT_CLOSED)}},load:{get:function(){return params.load}},useLocalStorage:{get:function(){return use_local_storage},set:function(bool){SUPPORTS_LOCAL_STORAGE&&(use_local_storage=bool,bool?dom.bind(window,"unload",saveToLocalStorage):dom.unbind(window,"unload",saveToLocalStorage),localStorage.setItem(getLocalStorageHash(_this,"isLocal"),bool))}}}),common.isUndefined(params.parent)){if(params.closed=!1,dom.addClass(this.domElement,GUI.CLASS_MAIN),dom.makeSelectable(this.domElement,!1),SUPPORTS_LOCAL_STORAGE&&use_local_storage){_this.useLocalStorage=!0;var saved_gui=localStorage.getItem(getLocalStorageHash(this,"gui"));saved_gui&&(params.load=JSON.parse(saved_gui))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=GUI.TEXT_CLOSED,dom.addClass(this.__closeButton,GUI.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),dom.bind(this.__closeButton,"click",function(){_this.closed=!_this.closed})}else{void 0===params.closed&&(params.closed=!0);var title_row_name=document.createTextNode(params.name);dom.addClass(title_row_name,"controller-name");var title_row=addRow(_this,title_row_name),on_click_title=function(e){return e.preventDefault(),_this.closed=!_this.closed,!1};dom.addClass(this.__ul,GUI.CLASS_CLOSED),dom.addClass(title_row,"title"),dom.bind(title_row,"click",on_click_title),params.closed||(this.closed=!1)}params.autoPlace&&(common.isUndefined(params.parent)&&(auto_place_virgin&&(auto_place_container=document.createElement("div"),dom.addClass(auto_place_container,CSS_NAMESPACE),dom.addClass(auto_place_container,GUI.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(auto_place_container),auto_place_virgin=!1),auto_place_container.appendChild(this.domElement),dom.addClass(this.domElement,GUI.CLASS_AUTO_PLACE)),this.parent||setWidth(_this,params.width)),dom.bind(window,"resize",function(){_this.onResize()}),dom.bind(this.__ul,"webkitTransitionEnd",function(){_this.onResize()}),dom.bind(this.__ul,"transitionend",function(){_this.onResize()}),dom.bind(this.__ul,"oTransitionEnd",function(){_this.onResize()}),this.onResize(),params.resizable&&addResizeHandle(this);_this.getRoot();params.parent||resetWidth()};return GUI.toggleHide=function(){hide=!hide,common.each(hideable_guis,function(gui){gui.domElement.style.zIndex=hide?-999:999,gui.domElement.style.opacity=hide?0:1})},GUI.CLASS_AUTO_PLACE="a",GUI.CLASS_AUTO_PLACE_CONTAINER="ac",GUI.CLASS_MAIN="main",GUI.CLASS_CONTROLLER_ROW="cr",GUI.CLASS_TOO_TALL="taller-than-window",GUI.CLASS_CLOSED="closed",GUI.CLASS_CLOSE_BUTTON="close-button",GUI.CLASS_DRAG="drag",GUI.DEFAULT_WIDTH=245,GUI.TEXT_CLOSED="Close Controls",GUI.TEXT_OPEN="Open Controls",dom.bind(window,"keydown",function(e){"text"===document.activeElement.type||e.which!==HIDE_KEY_CODE&&e.keyCode!=HIDE_KEY_CODE||GUI.toggleHide()},!1),common.extend(GUI.prototype,{add:function(object,property){return add(this,object,property,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(object,property){return add(this,object,property,{color:!0})},remove:function(controller){this.__ul.removeChild(controller.__li),this.__controllers.slice(this.__controllers.indexOf(controller),1);var _this=this;common.defer(function(){_this.onResize()})},destroy:function(){this.autoPlace&&auto_place_container.removeChild(this.domElement)},addFolder:function(name){if(void 0!==this.__folders[name])throw new Error('You already have a folder in this GUI by the name "'+name+'"');var new_gui_params={name:name,parent:this};new_gui_params.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[name]&&(new_gui_params.closed=this.load.folders[name].closed,new_gui_params.load=this.load.folders[name]);var gui=new GUI(new_gui_params);this.__folders[name]=gui;var li=addRow(this,gui.domElement);return dom.addClass(li,"folder"),gui},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var root=this.getRoot();if(root.scrollable){var top=dom.getOffset(root.__ul).top,h=0;common.each(root.__ul.childNodes,function(node){root.autoPlace&&node===root.__save_row||(h+=dom.getHeight(node))}),window.innerHeight-top-CLOSE_BUTTON_HEIGHT<h?(dom.addClass(root.domElement,GUI.CLASS_TOO_TALL),root.__ul.style.height=window.innerHeight-top-CLOSE_BUTTON_HEIGHT+"px"):(dom.removeClass(root.domElement,GUI.CLASS_TOO_TALL),root.__ul.style.height="auto")}root.__resize_handle&&common.defer(function(){root.__resize_handle.style.height=root.__ul.offsetHeight+"px"}),root.__closeButton&&(root.__closeButton.style.width=root.width+"px")},remember:function(){if(common.isUndefined(SAVE_DIALOGUE)&&(SAVE_DIALOGUE=new CenteredDiv,SAVE_DIALOGUE.domElement.innerHTML=saveDialogueContents),this.parent)throw new Error("You can only call remember on a top level GUI.");var _this=this;common.each(Array.prototype.slice.call(arguments),function(object){0==_this.__rememberedObjects.length&&addSaveMenu(_this),_this.__rememberedObjects.indexOf(object)==-1&&_this.__rememberedObjects.push(object)}),this.autoPlace&&setWidth(this,this.width)},getRoot:function(){for(var gui=this;gui.parent;)gui=gui.parent;return gui},getSaveObject:function(){var toReturn=this.load;return toReturn.closed=this.closed,this.__rememberedObjects.length>0&&(toReturn.preset=this.preset,toReturn.remembered||(toReturn.remembered={}),toReturn.remembered[this.preset]=getCurrentPreset(this)),toReturn.folders={},common.each(this.__folders,function(element,key){toReturn.folders[key]=element.getSaveObject()}),toReturn},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=getCurrentPreset(this),markPresetModified(this,!1)},saveAs:function(presetName){this.load.remembered||(this.load.remembered={},this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME]=getCurrentPreset(this,!0)),this.load.remembered[presetName]=getCurrentPreset(this),this.preset=presetName,addPresetOption(this,presetName,!0)},revert:function(gui){common.each(this.__controllers,function(controller){this.getRoot().load.remembered?recallSavedValue(gui||this.getRoot(),controller):controller.setValue(controller.initialValue)},this),common.each(this.__folders,function(folder){folder.revert(folder)}),gui||markPresetModified(this.getRoot(),!1)},listen:function(controller){var init=0==this.__listening.length;this.__listening.push(controller),init&&updateDisplays(this.__listening)}}),GUI}(dat.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n",dat.controllers.factory=function(OptionController,NumberControllerBox,NumberControllerSlider,StringController,FunctionController,BooleanController,common){return function(object,property){var initialValue=object[property];return common.isArray(arguments[2])||common.isObject(arguments[2])?new OptionController(object,property,arguments[2]):common.isNumber(initialValue)?common.isNumber(arguments[2])&&common.isNumber(arguments[3])?new NumberControllerSlider(object,property,arguments[2],arguments[3]):new NumberControllerBox(object,property,{min:arguments[2],max:arguments[3]}):common.isString(initialValue)?new StringController(object,property):common.isFunction(initialValue)?new FunctionController(object,property,""):common.isBoolean(initialValue)?new BooleanController(object,property):void 0}}(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=function(Controller,dom,common){var StringController=function(object,property){function onChange(){_this.setValue(_this.__input.value)}function onBlur(){_this.__onFinishChange&&_this.__onFinishChange.call(_this,_this.getValue())}StringController.superclass.call(this,object,property);var _this=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),dom.bind(this.__input,"keyup",onChange),dom.bind(this.__input,"change",onChange),dom.bind(this.__input,"blur",onBlur),dom.bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return StringController.superclass=Controller,common.extend(StringController.prototype,Controller.prototype,{updateDisplay:function(){return dom.isActive(this.__input)||(this.__input.value=this.getValue()),StringController.superclass.prototype.updateDisplay.call(this)}}),StringController}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,dat.controllers.ColorController=function(Controller,dom,Color,interpret,common){function linearGradient(elem,x,a,b){elem.style.background="",common.each(vendors,function(vendor){elem.style.cssText+="background: "+vendor+"linear-gradient("+x+", "+a+" 0%, "+b+" 100%); "})}function hueGradient(elem){elem.style.background="",elem.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",elem.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",elem.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",elem.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",elem.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var ColorController=function(object,property){function fieldDown(e){setSV(e),dom.bind(window,"mousemove",setSV),dom.bind(window,"mouseup",unbindSV)}function unbindSV(){dom.unbind(window,"mousemove",setSV),dom.unbind(window,"mouseup",unbindSV)}function onBlur(){var i=interpret(this.value);i!==!1?(_this.__color.__state=i,_this.setValue(_this.__color.toOriginal())):this.value=_this.__color.toString()}function unbindH(){dom.unbind(window,"mousemove",setH),dom.unbind(window,"mouseup",unbindH)}function setSV(e){e.preventDefault();var w=dom.getWidth(_this.__saturation_field),o=dom.getOffset(_this.__saturation_field),s=(e.clientX-o.left+document.body.scrollLeft)/w,v=1-(e.clientY-o.top+document.body.scrollTop)/w;return v>1?v=1:v<0&&(v=0),s>1?s=1:s<0&&(s=0),_this.__color.v=v,_this.__color.s=s,_this.setValue(_this.__color.toOriginal()),!1}function setH(e){e.preventDefault();var s=dom.getHeight(_this.__hue_field),o=dom.getOffset(_this.__hue_field),h=1-(e.clientY-o.top+document.body.scrollTop)/s;return h>1?h=1:h<0&&(h=0),_this.__color.h=360*h,_this.setValue(_this.__color.toOriginal()),!1}ColorController.superclass.call(this,object,property),this.__color=new Color(this.getValue()),this.__temp=new Color(0);var _this=this;this.domElement=document.createElement("div"),dom.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",dom.bind(this.__input,"keydown",function(e){13===e.keyCode&&onBlur.call(this)}),dom.bind(this.__input,"blur",onBlur),dom.bind(this.__selector,"mousedown",function(e){dom.addClass(this,"drag").bind(window,"mouseup",function(e){dom.removeClass(_this.__selector,"drag")})});var value_field=document.createElement("div");common.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),common.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),common.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),common.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),common.extend(value_field.style,{width:"100%",height:"100%",background:"none"}),linearGradient(value_field,"top","rgba(0,0,0,0)","#000"),common.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),hueGradient(this.__hue_field),common.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),dom.bind(this.__saturation_field,"mousedown",fieldDown),dom.bind(this.__field_knob,"mousedown",fieldDown),dom.bind(this.__hue_field,"mousedown",function(e){setH(e),dom.bind(window,"mousemove",setH),dom.bind(window,"mouseup",unbindH)}),this.__saturation_field.appendChild(value_field),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};ColorController.superclass=Controller,common.extend(ColorController.prototype,Controller.prototype,{updateDisplay:function(){var i=interpret(this.getValue());if(i!==!1){var mismatch=!1;common.each(Color.COMPONENTS,function(component){if(!common.isUndefined(i[component])&&!common.isUndefined(this.__color.__state[component])&&i[component]!==this.__color.__state[component])return mismatch=!0,{}},this),mismatch&&common.extend(this.__color.__state,i)}common.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var flip=this.__color.v<.5||this.__color.s>.5?255:0,_flip=255-flip;common.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+flip+","+flip+","+flip+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,linearGradient(this.__saturation_field,"left","#fff",this.__temp.toString()),common.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+flip+","+flip+","+flip+")",textShadow:this.__input_textShadow+"rgba("+_flip+","+_flip+","+_flip+",.7)"})}});var vendors=["-moz-","-o-","-webkit-","-ms-",""];return ColorController}(dat.controllers.Controller,dat.dom.dom,dat.color.Color=function(interpret,math,toString,common){function defineRGBComponent(target,component,componentHexIndex){Object.defineProperty(target,component,{get:function(){return"RGB"===this.__state.space?this.__state[component]:(recalculateRGB(this,component,componentHexIndex),this.__state[component])},set:function(v){"RGB"!==this.__state.space&&(recalculateRGB(this,component,componentHexIndex),this.__state.space="RGB"),this.__state[component]=v}})}function defineHSVComponent(target,component){Object.defineProperty(target,component,{get:function(){return"HSV"===this.__state.space?this.__state[component]:(recalculateHSV(this),this.__state[component])},set:function(v){"HSV"!==this.__state.space&&(recalculateHSV(this),this.__state.space="HSV"),this.__state[component]=v}})}function recalculateRGB(color,component,componentHexIndex){if("HEX"===color.__state.space)color.__state[component]=math.component_from_hex(color.__state.hex,componentHexIndex);else{if("HSV"!==color.__state.space)throw"Corrupted color state";common.extend(color.__state,math.hsv_to_rgb(color.__state.h,color.__state.s,color.__state.v))}}function recalculateHSV(color){var result=math.rgb_to_hsv(color.r,color.g,color.b);common.extend(color.__state,{s:result.s,v:result.v}),common.isNaN(result.h)?common.isUndefined(color.__state.h)&&(color.__state.h=0):color.__state.h=result.h}var Color=function(){if(this.__state=interpret.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return Color.COMPONENTS=["r","g","b","h","s","v","hex","a"],common.extend(Color.prototype,{toString:function(){return toString(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),defineRGBComponent(Color.prototype,"r",2),defineRGBComponent(Color.prototype,"g",1),defineRGBComponent(Color.prototype,"b",0),defineHSVComponent(Color.prototype,"h"),defineHSVComponent(Color.prototype,"s"),defineHSVComponent(Color.prototype,"v"),Object.defineProperty(Color.prototype,"a",{get:function(){return this.__state.a},set:function(v){this.__state.a=v}}),Object.defineProperty(Color.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=math.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(v){this.__state.space="HEX",this.__state.hex=v}}),Color}(dat.color.interpret,dat.color.math=function(){var tmpComponent;return{hsv_to_rgb:function(h,s,v){var hi=Math.floor(h/60)%6,f=h/60-Math.floor(h/60),p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),c=[[v,t,p],[q,v,p],[p,v,t],[p,q,v],[t,p,v],[v,p,q]][hi];return{r:255*c[0],g:255*c[1],b:255*c[2]}},rgb_to_hsv:function(r,g,b){var h,s,min=Math.min(r,g,b),max=Math.max(r,g,b),delta=max-min;return 0==max?{h:NaN,s:0,v:0}:(s=delta/max,h=r==max?(g-b)/delta:g==max?2+(b-r)/delta:4+(r-g)/delta,h/=6,h<0&&(h+=1),{h:360*h,s:s,v:max/255})},rgb_to_hex:function(r,g,b){var hex=this.hex_with_component(0,2,r);return hex=this.hex_with_component(hex,1,g),hex=this.hex_with_component(hex,0,b)},component_from_hex:function(hex,componentIndex){return hex>>8*componentIndex&255},hex_with_component:function(hex,componentIndex,value){return value<<(tmpComponent=8*componentIndex)|hex&~(255<<tmpComponent)}}}(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback,element){window.setTimeout(callback,1e3/60)}}(),dat.dom.CenteredDiv=function(dom,common){var CenteredDiv=function(){this.backgroundElement=document.createElement("div"),common.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),dom.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),common.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var _this=this;dom.bind(this.backgroundElement,"click",function(){_this.hide()})};return CenteredDiv.prototype.show=function(){var _this=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),common.defer(function(){_this.backgroundElement.style.opacity=1,_this.domElement.style.opacity=1,_this.domElement.style.webkitTransform="scale(1)"})},CenteredDiv.prototype.hide=function(){var _this=this,hide=function(){_this.domElement.style.display="none",_this.backgroundElement.style.display="none",dom.unbind(_this.domElement,"webkitTransitionEnd",hide),dom.unbind(_this.domElement,"transitionend",hide),dom.unbind(_this.domElement,"oTransitionEnd",hide)};dom.bind(this.domElement,"webkitTransitionEnd",hide),dom.bind(this.domElement,"transitionend",hide),dom.bind(this.domElement,"oTransitionEnd",hide),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},CenteredDiv.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-dom.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-dom.getHeight(this.domElement)/2+"px"},CenteredDiv}(dat.dom.dom,dat.utils.common),dat.dom.dom,dat.utils.common)},function(module,exports){var dat=module.exports=dat||{};dat.color=dat.color||{},dat.utils=dat.utils||{},dat.utils.common=function(){var ARR_EACH=Array.prototype.forEach,ARR_SLICE=Array.prototype.slice;
return{BREAK:{},extend:function(target){return this.each(ARR_SLICE.call(arguments,1),function(obj){for(var key in obj)this.isUndefined(obj[key])||(target[key]=obj[key])},this),target},defaults:function(target){return this.each(ARR_SLICE.call(arguments,1),function(obj){for(var key in obj)this.isUndefined(target[key])&&(target[key]=obj[key])},this),target},compose:function(){var toCall=ARR_SLICE.call(arguments);return function(){for(var args=ARR_SLICE.call(arguments),i=toCall.length-1;i>=0;i--)args=[toCall[i].apply(this,args)];return args[0]}},each:function(obj,itr,scope){if(ARR_EACH&&obj.forEach===ARR_EACH)obj.forEach(itr,scope);else if(obj.length===obj.length+0){for(var key=0,l=obj.length;key<l;key++)if(key in obj&&itr.call(scope,obj[key],key)===this.BREAK)return}else for(var key in obj)if(itr.call(scope,obj[key],key)===this.BREAK)return},defer:function(fnc){setTimeout(fnc,0)},toArray:function(obj){return obj.toArray?obj.toArray():ARR_SLICE.call(obj)},isUndefined:function(obj){return void 0===obj},isNull:function(obj){return null===obj},isNaN:function(obj){return obj!==obj},isArray:Array.isArray||function(obj){return obj.constructor===Array},isObject:function(obj){return obj===Object(obj)},isNumber:function(obj){return obj===obj+0},isString:function(obj){return obj===obj+""},isBoolean:function(obj){return obj===!1||obj===!0},isFunction:function(obj){return"[object Function]"===Object.prototype.toString.call(obj)}}}(),dat.color.toString=function(common){return function(color){if(1==color.a||common.isUndefined(color.a)){for(var s=color.hex.toString(16);s.length<6;)s="0"+s;return"#"+s}return"rgba("+Math.round(color.r)+","+Math.round(color.g)+","+Math.round(color.b)+","+color.a+")"}}(dat.utils.common),dat.Color=dat.color.Color=function(interpret,math,toString,common){function defineRGBComponent(target,component,componentHexIndex){Object.defineProperty(target,component,{get:function(){return"RGB"===this.__state.space?this.__state[component]:(recalculateRGB(this,component,componentHexIndex),this.__state[component])},set:function(v){"RGB"!==this.__state.space&&(recalculateRGB(this,component,componentHexIndex),this.__state.space="RGB"),this.__state[component]=v}})}function defineHSVComponent(target,component){Object.defineProperty(target,component,{get:function(){return"HSV"===this.__state.space?this.__state[component]:(recalculateHSV(this),this.__state[component])},set:function(v){"HSV"!==this.__state.space&&(recalculateHSV(this),this.__state.space="HSV"),this.__state[component]=v}})}function recalculateRGB(color,component,componentHexIndex){if("HEX"===color.__state.space)color.__state[component]=math.component_from_hex(color.__state.hex,componentHexIndex);else{if("HSV"!==color.__state.space)throw"Corrupted color state";common.extend(color.__state,math.hsv_to_rgb(color.__state.h,color.__state.s,color.__state.v))}}function recalculateHSV(color){var result=math.rgb_to_hsv(color.r,color.g,color.b);common.extend(color.__state,{s:result.s,v:result.v}),common.isNaN(result.h)?common.isUndefined(color.__state.h)&&(color.__state.h=0):color.__state.h=result.h}var Color=function(){if(this.__state=interpret.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return Color.COMPONENTS=["r","g","b","h","s","v","hex","a"],common.extend(Color.prototype,{toString:function(){return toString(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),defineRGBComponent(Color.prototype,"r",2),defineRGBComponent(Color.prototype,"g",1),defineRGBComponent(Color.prototype,"b",0),defineHSVComponent(Color.prototype,"h"),defineHSVComponent(Color.prototype,"s"),defineHSVComponent(Color.prototype,"v"),Object.defineProperty(Color.prototype,"a",{get:function(){return this.__state.a},set:function(v){this.__state.a=v}}),Object.defineProperty(Color.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=math.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(v){this.__state.space="HEX",this.__state.hex=v}}),Color}(dat.color.interpret=function(toString,common){var result,toReturn,interpret=function(){toReturn=!1;var original=arguments.length>1?common.toArray(arguments):arguments[0];return common.each(INTERPRETATIONS,function(family){if(family.litmus(original))return common.each(family.conversions,function(conversion,conversionName){if(result=conversion.read(original),toReturn===!1&&result!==!1)return toReturn=result,result.conversionName=conversionName,result.conversion=conversion,common.BREAK}),common.BREAK}),toReturn},INTERPRETATIONS=[{litmus:common.isString,conversions:{THREE_CHAR_HEX:{read:function(original){var test=original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==test&&{space:"HEX",hex:parseInt("0x"+test[1].toString()+test[1].toString()+test[2].toString()+test[2].toString()+test[3].toString()+test[3].toString())}},write:toString},SIX_CHAR_HEX:{read:function(original){var test=original.match(/^#([A-F0-9]{6})$/i);return null!==test&&{space:"HEX",hex:parseInt("0x"+test[1].toString())}},write:toString},CSS_RGB:{read:function(original){var test=original.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==test&&{space:"RGB",r:parseFloat(test[1]),g:parseFloat(test[2]),b:parseFloat(test[3])}},write:toString},CSS_RGBA:{read:function(original){var test=original.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==test&&{space:"RGB",r:parseFloat(test[1]),g:parseFloat(test[2]),b:parseFloat(test[3]),a:parseFloat(test[4])}},write:toString}}},{litmus:common.isNumber,conversions:{HEX:{read:function(original){return{space:"HEX",hex:original,conversionName:"HEX"}},write:function(color){return color.hex}}}},{litmus:common.isArray,conversions:{RGB_ARRAY:{read:function(original){return 3==original.length&&{space:"RGB",r:original[0],g:original[1],b:original[2]}},write:function(color){return[color.r,color.g,color.b]}},RGBA_ARRAY:{read:function(original){return 4==original.length&&{space:"RGB",r:original[0],g:original[1],b:original[2],a:original[3]}},write:function(color){return[color.r,color.g,color.b,color.a]}}}},{litmus:common.isObject,conversions:{RGBA_OBJ:{read:function(original){return!!(common.isNumber(original.r)&&common.isNumber(original.g)&&common.isNumber(original.b)&&common.isNumber(original.a))&&{space:"RGB",r:original.r,g:original.g,b:original.b,a:original.a}},write:function(color){return{r:color.r,g:color.g,b:color.b,a:color.a}}},RGB_OBJ:{read:function(original){return!!(common.isNumber(original.r)&&common.isNumber(original.g)&&common.isNumber(original.b))&&{space:"RGB",r:original.r,g:original.g,b:original.b}},write:function(color){return{r:color.r,g:color.g,b:color.b}}},HSVA_OBJ:{read:function(original){return!!(common.isNumber(original.h)&&common.isNumber(original.s)&&common.isNumber(original.v)&&common.isNumber(original.a))&&{space:"HSV",h:original.h,s:original.s,v:original.v,a:original.a}},write:function(color){return{h:color.h,s:color.s,v:color.v,a:color.a}}},HSV_OBJ:{read:function(original){return!!(common.isNumber(original.h)&&common.isNumber(original.s)&&common.isNumber(original.v))&&{space:"HSV",h:original.h,s:original.s,v:original.v}},write:function(color){return{h:color.h,s:color.s,v:color.v}}}}}];return interpret}(dat.color.toString,dat.utils.common),dat.color.math=function(){var tmpComponent;return{hsv_to_rgb:function(h,s,v){var hi=Math.floor(h/60)%6,f=h/60-Math.floor(h/60),p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),c=[[v,t,p],[q,v,p],[p,v,t],[p,q,v],[t,p,v],[v,p,q]][hi];return{r:255*c[0],g:255*c[1],b:255*c[2]}},rgb_to_hsv:function(r,g,b){var h,s,min=Math.min(r,g,b),max=Math.max(r,g,b),delta=max-min;return 0==max?{h:NaN,s:0,v:0}:(s=delta/max,h=r==max?(g-b)/delta:g==max?2+(b-r)/delta:4+(r-g)/delta,h/=6,h<0&&(h+=1),{h:360*h,s:s,v:max/255})},rgb_to_hex:function(r,g,b){var hex=this.hex_with_component(0,2,r);return hex=this.hex_with_component(hex,1,g),hex=this.hex_with_component(hex,0,b)},component_from_hex:function(hex,componentIndex){return hex>>8*componentIndex&255},hex_with_component:function(hex,componentIndex,value){return value<<(tmpComponent=8*componentIndex)|hex&~(255<<tmpComponent)}}}(),dat.color.toString,dat.utils.common)}]);